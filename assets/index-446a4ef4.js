(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(i){if(i.ep)return;i.ep=!0;const l=n(i);fetch(i.href,l)}})();class s{constructor(t,n){this.x=t??0,this.y=n??0}set(t,n){this.x=t,this.y=n}distance(t){const n=this.x-t.x,r=this.y-t.y;return Math.sqrt(n*n+r*r)}toString(){return"X: "+this.x+", Y: "+this.y}}function m(e,t){if(e instanceof y)return t instanceof y?D(e,t)||D(t,e):H(t,e);if(t instanceof y)return H(e,t);if(m(e.boundingBox,t.boundingBox)||L(t.boundingBox,e.boundingBox)){const n=O(e);for(let r=0;r<n.length;r++)if(v(t,n[r]))return!0}return!1}function H(e,t){const n=O(e);for(let r=0;r<n.length;r++)if(I(t,n[r]))return!0;return!1}function L(e,t){if(e instanceof y)if(t instanceof y){const n=t.getCorners();for(let r=0;r<4;r++)if(!I(e,n[r]))return!1;return!0}else{const n=S(t);for(let r=0;r<4;r++)if(!I(e,n[r]))return!1;return!0}else if(t instanceof y){const n=t.getCorners();for(let r=0;r<4;r++)if(!v(e,n[r]))return!1;return!0}else{const n=O(t);for(let r=0;r<n.length;r++)if(!v(e,n[r]))return!1;return!0}}function D(e,t){const n=e.getCorners(),r=t.getCorners();return(n[0].y<=r[0].y&&n[2].y>=r[0].y||n[0].y<=r[2].y&&n[2].y>=r[2].y)&&(n[0].x<=r[0].x&&n[1].x>=r[0].x||n[0].x<=r[1].x&&n[1].x>=r[1].x)}function I(e,t){const n=e.getCorners();return n[0].x<t.x&&n[1].x>t.x&&n[0].y<t.y&&n[2].y>t.y}function v(e,t){return Math.pow(t.x-e.center.x,2)/Math.pow(e.radiusX,2)+Math.pow(t.y-e.center.y,2)/Math.pow(e.radiusY,2)<=1}function S(e){return[new s(e.center.x,e.center.y-e.radiusY),new s(e.center.x+e.radiusX,e.center.y),new s(e.center.x,e.center.y+e.radiusY),new s(e.center.x-e.radiusX,e.center.y)]}function O(e){const n=[],r=e.radiusX/100;n[0]=S(e)[3];let i,l;for(let a=1;a<400;a++)a<=400/2?(i=n[a-1].x+r,l=$(e,i,1)):(i=n[a-1].x-r,l=$(e,i,-1)),n[a]=new s(i,l);return n}function $(e,t,n){return n*e.radiusY*Math.sqrt(1-Math.pow((t-e.center.x)/e.radiusX,2))+e.center.y}class y{constructor(t,n,r){this.startVertex=t??new s,this.width=n??0,this.height=r??0}getCorners(){const t=[this.startVertex];return t.push(new s(this.startVertex.x+this.width,this.startVertex.y)),t.push(new s(this.startVertex.x+this.width,this.startVertex.y+this.height)),t.push(new s(this.startVertex.x,this.startVertex.y+this.height)),t}containsPoint(t){return I(this,t)}overlaps(t){return m(this,t)}contains(t){return L(this,t)}toString(){return`A rectangle with
Top Left Vertex at: `+this.startVertex.toString()+", Width: "+this.width+", Height: "+this.height}}class d{constructor(t,n,r){this.internalRectangle=r??new y,this.internalIdentifier=t,this.internalOrigin=n??new s}get rectangle(){return this.internalRectangle}set rectangle(t){this.internalRectangle=t}get identifier(){return this.internalIdentifier}set identifier(t){this.internalIdentifier=t}get origin(){return this.internalOrigin}set origin(t){this.internalOrigin=t}containsPoint(t){return this.internalRectangle.containsPoint(t)}containsNode(t){return t instanceof d?this.internalRectangle.contains(t.rectangle):this.internalRectangle.contains(t.ellipse)}toString(){return"An atom representing the proposition: "+this.internalIdentifier+" and Boundary box of: "+this.internalRectangle.toString()}}class g{constructor(t,n){this.internalEllipse=t,this.internalChildren=n??[]}get ellipse(){return this.internalEllipse}set ellipse(t){this.internalEllipse=t}get children(){return this.internalChildren}set children(t){this.internalChildren=t}set child(t){this.internalChildren.push(t)}getCurrentCut(t){for(let n=0;n<this.internalChildren.length;n++){const r=this.internalChildren[n];if(r instanceof g&&r.containsNode(t))return r.getCurrentCut(t)}return this}containsPoint(t){return this.internalEllipse===null?!0:this.internalEllipse.containsPoint(t)}containsNode(t){return this.internalEllipse===null?!0:t instanceof d?this.internalEllipse.contains(t.rectangle):this.internalEllipse.contains(t.ellipse)}remove(t){if(this.containsPoint(t)){let n=!0;for(let r=0;r<this.internalChildren.length;r++)if(this.internalChildren[r].containsPoint(t))return n=!1,this.internalChildren[r]instanceof g?this.internalChildren[r].remove(t):(this.internalChildren=this.internalChildren.splice(r,1),!0);if(n)return!0}return!1}toString(){let t;return this.internalEllipse===null?t="Sheet of Assertion of the AEG Tree":t=`A cut node with boundary box of 
`+this.internalEllipse.toString(),this.internalChildren.length>0&&(t+=`, 
With nested nodes: `+this.internalChildren.toString()),t}toFormulaString(){let t="";for(const n of this.internalChildren)n instanceof d?t+=n.identifier:n instanceof g&&(t+=n.toFormulaString()),t+=" ";return t=t.slice(0,-1),this.internalEllipse===null?t="["+t+"]":t="("+t+")",t}}class Q{constructor(t){this.sheet=t??new g(null)}verify(){return this.verifyAEG(this.sheet)}verifyAEG(t){for(let n=0;n<t.children.length;n++){if(!t.containsNode(t.children[n]))return!1;for(let r=n+1;r<t.children.length;r++)if(this.overlaps(t.children[n],t.children[r]))return!1}for(let n=0;n<t.children.length;n++)if(t.children[n]instanceof g&&!this.verifyAEG(t.children[n]))return!1;return!0}canInsert(t){const n=this.sheet.getCurrentCut(t);for(let r=0;r<n.children.length;r++)if(this.overlaps(t,n.children[r]))return!1;return!0}insert(t){if(!this.canInsert(t))throw new Error("Insertion failed. "+t+" had a collision.");const n=this.sheet.getCurrentCut(t),r=[...n.children];if(n.child=t,t instanceof g)for(let i=r.length-1;i>=0;i--)t.containsNode(r[i])&&(t.child=r[i],n.children.splice(i,1))}remove(t){this.sheet.remove(t)}overlaps(t,n){let r,i;return t instanceof d?n instanceof d?m(t.rectangle,n.rectangle):(r=n.ellipse,m(t.rectangle,r)):n instanceof d?(r=t.ellipse,m(r,n.rectangle)):(r=t.ellipse,i=n.ellipse,m(r,i))}toString(){return this.sheet.toFormulaString()}}class k{constructor(t,n,r){this.center=t??new s,this.radiusX=n??0,this.radiusY=r??0;const i=new s(this.center.x-this.radiusX,this.center.y-this.radiusY);this.boundingBox=new y(i,this.radiusX*2,this.radiusY*2)}toString(){return"An ellipse with Center at: "+this.center.toString()+`, 
Horizontal Radius of: `+this.radiusX+`, 
Vertical Radius of: `+this.radiusY+`, 
Bounding box: `+this.boundingBox.toString()}containsPoint(t){return v(this,t)}overlaps(t){return m(this,t)}contains(t){return L(this,t)}}const M=document.getElementById("canvas"),W=M.getContext("2d"),_=document.getElementById("showRect"),N=document.getElementById("mode");if(W===null)throw Error("2d rendering context not supported");const f=W;let E=new k,B=new s,X;function tt(e){B.x=e.clientX,B.y=e.clientY,X=!1}function et(e){const t=new g(new k),n=new s;n.x=e.clientX,n.y=e.clientY,f.clearRect(0,0,M.width,M.height),p(c.sheet),E=q(B,n),t.ellipse=E,X||(c.canInsert(t)&&U(E)?G(t,"#00FF00"):G(t,"#FF0000"))}function nt(e){let t=new g(E);const n=new s;n.x=e.clientX,n.y=e.clientY,E=q(B,n),t=new g(E),c.canInsert(t)&&!X&&U(E)&&c.insert(t),B=new s,f.clearRect(0,0,M.width,M.height),p(c.sheet)}function rt(){X=!0,B=new s,f.clearRect(0,0,M.width,M.height),p(c.sheet)}function q(e,t){const n=new s((t.x-e.x)/2+e.x,(t.y-e.y)/2+e.y),r=e.x-t.x,i=e.y-t.y,l=Math.abs(r),a=Math.abs(i);let V,A;if(N.value==="circumscribed"){const T=Math.floor(n.distance(t));A=Math.floor(T*(a/l)),V=Math.floor(T*(l/a))}else V=l/2,A=a/2;return _.checked&&(f.beginPath(),f.rect(e.x,e.y,-r,-i),f.stroke()),new k(n,V,A)}function G(e,t){f.strokeStyle=t;const n=e.ellipse,r=n.center;f.beginPath(),f.ellipse(r.x,r.y,n.radiusX,n.radiusY,0,0,2*Math.PI),f.stroke()}function U(e){return e.radiusX>15&&e.radiusY>15}const x=document.getElementById("canvas"),z=x.getContext("2d");if(z===null)throw Error("2d rendering context not supported");const u=z,K=document.getElementById("atomDisplay");let b,Y,o=new d("A");K.innerHTML=o.identifier;function it(e){new RegExp(/^[A-Za-z]$/).test(e.key)&&(o.identifier=e.key,K.innerHTML=o.identifier)}function st(e){b=u.measureText(o.identifier),Y=!1;const t=new s(e.clientX,e.clientY-b.actualBoundingBoxAscent);o.rectangle=new y(t,b.width,b.fontBoundingBoxDescent+b.actualBoundingBoxAscent),o.origin=new s(e.clientX,e.clientY),u.clearRect(0,0,x.width,x.height),p(c.sheet),c.canInsert(o)?P(o,"#00FF00"):P(o,"#FF0000")}function ot(e){o.origin=new s(e.clientX,e.clientY),o.rectangle.startVertex=new s(e.clientX,e.clientY-b.actualBoundingBoxAscent),u.clearRect(0,0,x.width,x.height),p(c.sheet),Y||(c.canInsert(o)?P(o,"#00FF00"):P(o,"#FF0000"))}function lt(){c.canInsert(o)&&!Y&&c.insert(o),o=new d(o.identifier),u.clearRect(0,0,x.width,x.height),p(c.sheet),console.log(c.toString())}function ct(){o=new d(o.identifier),Y=!0,u.clearRect(0,0,x.width,x.height),p(c.sheet)}function P(e,t){u.fillStyle=t,u.strokeStyle=t;const n=e.rectangle;u.beginPath(),u.fillText(e.identifier,e.origin.x,e.origin.y),u.rect(n.startVertex.x,n.startVertex.y,n.width,n.height),u.stroke()}const w=document.getElementById("canvas");w.width=window.innerWidth;w.height=window.innerHeight;const j=w.getContext("2d");if(j===null)throw Error("2d rendering context not supported");const h=j;h.font="35pt arial";const at=document.getElementById("graphString"),Z=document.getElementById("cutTools"),J=document.getElementById("atomTools");window.addEventListener("keypress",dt);w.addEventListener("mousedown",ft);w.addEventListener("mousemove",gt);w.addEventListener("mouseup",yt);w.addEventListener("mouseout",xt);w.addEventListener("mouseenter",wt);let C="",R=!1,F=!0;const c=new Q;window.atomMode=ht;window.ellipseMode=ut;function ut(){C="cutMode",Z.style.display="block",J.style.display="none"}function ht(){C="atomMode",J.style.display="block",Z.style.display="none"}function dt(e){switch(C){case"atomMode":it(e);break}}function ft(e){switch(C){case"cutMode":tt(e);break;case"atomMode":st(e);break}R=!0}function gt(e){switch(C){case"cutMode":R&&F&&et(e);break;case"atomMode":R&&F&&ot(e);break}}function yt(e){switch(C){case"cutMode":nt(e);break;case"atomMode":lt();break}R=!1}function xt(){switch(C){case"cutMode":rt();break;case"atomMode":ct();break}}function wt(){F=!0}function p(e){at.innerHTML=c.toString();for(let t=0;e.children.length>t;t++)e.children[t]instanceof d?pt(e.children[t]):p(e.children[t]);e.ellipse instanceof k&&(h.strokeStyle="#000000",h.beginPath(),h.ellipse(e.ellipse.center.x,e.ellipse.center.y,e.ellipse.radiusX,e.ellipse.radiusY,0,0,2*Math.PI),h.stroke())}function pt(e){const t=e.rectangle;h.strokeStyle="#000000",h.fillStyle="#000000",h.beginPath(),h.rect(t.startVertex.x,t.startVertex.y,t.width,t.height),h.fillText(e.identifier,e.origin.x,e.origin.y),h.stroke()}
