(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();class f{constructor(e,t){this.x=e??0,this.y=t??0}toString(){return"X: "+this.x+", Y: "+this.y}}class y{constructor(e,t,s){this.startVertex=e??new f,this.width=t??0,this.height=s??0}toString(){return`A rectangle with
Top Left Vertex at: `+this.startVertex.toString()+`, 
Width of: `+this.width+`, 
Height of: `+this.height}getCorners(){const e=[this.startVertex];return e.push(new f(this.startVertex.x+this.width,this.startVertex.y)),e.push(new f(this.startVertex.x+this.width,this.startVertex.y+this.height)),e.push(new f(this.startVertex.x,this.startVertex.y+this.height)),e}containsPoint(e){const t=this.getCorners();return t[0].x<=e.x&&t[1].x>=e.x&&t[1].y<=e.y&&t[2].y>=e.y}overlaps(e){if(e instanceof y){const t=this.getCorners(),s=e.getCorners();for(let r=0;r<4;r++)if(this.containsPoint(s[r])||e.containsPoint(t[r]))return!0;return!1}else return!1}containsShape(e){if(e instanceof y){const t=e.getCorners();return this.containsPoint(t[0])&&this.containsPoint(t[2])}else return!0}}class h{constructor(e,t,s){this.rect=s??new y,this.identifier=e,this.origin=t}toString(){return"An atom representing the proposition: "+this.identifier+` and 
Boundary box of: 
`+this.rect.toString}containsPoint(e){return this.rect.containsPoint(e)}containsNode(e){return e instanceof h?this.rect.containsShape(e.rect):this.rect.containsShape(e.ellipse)}}class L{constructor(e,t,s){this.center=e??new f,this.radiusX=t??0,this.radiusY=s??0;const r=new f(this.center.x-this.radiusX,this.center.y-this.radiusY);this.boundingBox=new y(r,this.radiusX*2,this.radiusY*2)}toString(){return`An ellipse with
Center at: `+this.center.toString+`, 
Horizontal Radius of: `+this.radiusX+`, 
Vertical Radius of: `+this.radiusY}containsPoint(e){return!1}overlaps(e){return!1}containsShape(e){return!1}}class c{constructor(e,t){this.ellipse=e??new L,this.children=t??[]}getCurrentCut(e){for(let t=0;t<this.children.length;t++)if(this.children[t]instanceof c&&this.children[t].containsNode(e))return this.getCurrentCut(this.children[t]);return this}toString(){let e;return this.ellipse===null?e="Sheet of Assertion of the AEG Tree":e=`A cut node with boundary box of 
`+this.ellipse.toString(),this.children.length>0&&(e+=`, 
With nested nodes: `+this.children.toString()),e}containsPoint(e){return this.ellipse===null?!0:this.ellipse.containsPoint(e)}containsNode(e){return this.ellipse===null?!0:e instanceof h?this.ellipse.containsShape(e.rect):this.ellipse.containsShape(e.ellipse)}verifyCut(){let e=!0;for(let t=0;t<this.children.length;t++){if(!e)return!1;this.ellipse===null&&this.children[t]instanceof c&&(e=this.children[t].verifyCut()),e=this.containsNode(this.children[t]),e&&this.children[t]instanceof c&&(e=this.children[t].verifyCut())}return e}remove(e){if(this.containsPoint(e)){let t=!0;for(let s=0;s<this.children.length;s++)if(this.children[s].containsPoint(e))return t=!1,this.children[s]instanceof c?this.children[s].remove(e):(this.children=this.children.splice(s,1),!0);if(t)return!0}return!1}}class k{constructor(e){this.sheet=e??new c,this.sheet.ellipse=null}verifyAEG(){return this.sheet.verifyCut()}canInsert(e){const t=this.sheet.getCurrentCut(e);for(let s=0;s<t.children.length;s++)if(this.overlaps(e,t.children[s]))return!1;return!0}insert(e){if(!this.canInsert(e))throw new Error("Insertion failed. "+e+" had a collision.");const t=this.sheet.getCurrentCut(e),s=t.children;if(t.children.push(e),e instanceof c)for(let r=0;r<s.length;r++)e.containsNode(s[r])&&(e.children.push(s[r]),t.children=t.children.splice(r,1))}remove(e){this.sheet.remove(e)}overlaps(e,t){let s,r;return e instanceof h?t instanceof h?e.rect.overlaps(t.rect):(s=t.ellipse,e.rect.overlaps(s)):t instanceof h?(s=e.ellipse,s.overlaps(t.rect)):(s=e.ellipse,r=t.ellipse,s.overlaps(r))}}const o=document.getElementById("canvas"),b=o.getContext("2d"),G=document.getElementById("showRect"),H=document.getElementById("mode");if(b===null)throw Error("2d rendering context not supported");const a=b;let I,g;function W(n,e){const t=n.x-e.x,s=n.y-e.y;return Math.sqrt(t*t+s*s)}function q(n,e){const t={x:(e.x-n.x)/2+n.x,y:(e.y-n.y)/2+n.y},s=n.x-e.x,r=n.y-e.y,i=Math.abs(s),u=Math.abs(r);let v,m;if(H.value==="circumscribed"){const A=Math.floor(W(t,e));v=Math.floor(A*(u/i)),m=Math.floor(A*(i/u))}else m=i/2,v=u/2;return G.checked&&(a.beginPath(),a.rect(n.x,n.y,-s,-r),a.stroke()),a.beginPath(),a.ellipse(t.x,t.y,v,m,Math.PI/2,0,2*Math.PI),a.stroke(),g=new L(t,v,m),g}function U(){o.addEventListener("mousedown",V)}function V(n){I={x:n.clientX,y:n.clientY},o.addEventListener("mousemove",X),o.addEventListener("mouseup",Y)}function X(n){a.clearRect(0,0,o.width,o.height);const e={x:n.clientX,y:n.clientY};S(w.sheet),g=q(I,e)}function Y(){o.removeEventListener("mousemove",X),o.removeEventListener("mouseup",Y);const n=new c(g);w.canInsert(n)&&w.insert(n)}function z(){o.removeEventListener("mousedown",V)}const l=document.getElementById("canvas"),B=l.getContext("2d");if(B===null)throw Error("2d rendering context not supported");const p=B;let x,E;function D(){window.addEventListener("keydown",F)}function F(n){E=n.key,l.addEventListener("mousedown",O)}function O(n){const e={x:n.clientX,y:n.clientY};x=e,p.fillText(E,e.x,e.y),p.stroke(),l.addEventListener("mousemove",T),l.addEventListener("mouseup",$)}function T(n){p.clearRect(0,0,l.width,l.height),S(w.sheet),x={x:n.clientX,y:n.clientY},p.fillText(E,x.x,x.y),p.stroke()}function $(){l.removeEventListener("mousemove",T);const n=new h(E,x);w.insert(n),l.removeEventListener("mouseup",$)}function K(){l.removeEventListener("mousedown",O)}const M=document.getElementById("canvas");M.width=window.innerWidth;M.height=window.innerHeight;const R=M.getContext("2d");if(R===null)throw Error("2d rendering context not supported");const d=R;d.font="35pt arial";let C=!1,P=!1;const w=new k;window.atomMode=J;window.ellipseMode=j;function j(){C=!0,U(),P&&(K(),P=!1)}function J(){P=!0,D(),C&&(z(),C=!1)}function S(n){for(let e=0;n.children.length>e;e++)n.children[e]instanceof h?Q(n.children[e]):S(n.children[e]);n.ellipse instanceof L&&(d.beginPath(),d.ellipse(n.ellipse.center.x,n.ellipse.center.y,n.ellipse.radiusX,n.ellipse.radiusY,Math.PI/2,0,2*Math.PI),d.stroke())}function Q(n){d.fillText(n.identifier,n.origin.x,n.origin.y),d.stroke()}
