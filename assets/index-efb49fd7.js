(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const p of o.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&r(p)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();class h{constructor(t,e,r){if(t.length!==1)throw new Error("String of length "+t.length+" passed in as identifier in AtomNode constructor, which is not of length 1.");if(!/^[A-Za-z]$/.test(t))throw new Error(t+" not contained in Latin alphabet passed in as identifier in AtomNode constructor.");this.internalIdentifier=t,this.internalOrigin=e,this.internalRectangle=r}get rectangle(){return this.internalRectangle}set rectangle(t){this.internalRectangle=t}get identifier(){return this.internalIdentifier}set identifier(t){this.internalIdentifier=t}get origin(){return this.internalOrigin}set origin(t){this.internalOrigin=t}containsPoint(t){return this.internalRectangle.containsPoint(t)}toString(){return"An atom representing the proposition: "+this.internalIdentifier+" and Boundary box of: "+this.internalRectangle.toString()}}class s{constructor(t,e){if(this.x=t,this.y=e,!Number.isFinite(this.x)||!Number.isFinite(this.y))throw new Error("NaN or Infinity value(s) were passed in constructing a Point.")}set(t,e){if(!Number.isFinite(t)||!Number.isFinite(e))throw new Error("NaN or Infinity value(s) were passed in setting "+this+"'s coords.");this.x=t,this.y=e}distance(t){const e=this.x-t.x,r=this.y-t.y;return Math.sqrt(e*e+r*r)}toString(){return"("+this.x+", "+this.y+")"}}class d{constructor(t,e,r){if(!Number.isFinite(e)||!Number.isFinite(r))throw new Error("Infinity/NaN passed in for width/height while constructing a Rectangle.");if(e!==void 0&&e<0)throw new Error("Negative value passed for width while constructing a Rectangle.");if(r!==void 0&&r<0)throw new Error("Negative value passed for height while constructing a Rectangle.");this.startVertex=t,this.width=e,this.height=r}getCorners(){const t=[this.startVertex];return t.push(new s(this.startVertex.x+this.width,this.startVertex.y)),t.push(new s(this.startVertex.x+this.width,this.startVertex.y+this.height)),t.push(new s(this.startVertex.x,this.startVertex.y+this.height)),t}containsPoint(t){return B(this,t)}overlaps(t){return C(this,t)}contains(t){return v(this,t)}toString(){return"Rectangle with top left vertex at: "+this.startVertex.toString()+", w: "+this.width+", h: "+this.height}}function C(n,t){return S(n,t)||v(t,n)}function S(n,t){if(n instanceof d)return t instanceof d?D(n,t):T(t,n);if(t instanceof d)return T(n,t);if(D(n.boundingBox,t.boundingBox)||v(t.boundingBox,n.boundingBox)){const e=O(n);let r;for(let i=0;i<e.length;i++)if(r=P(t,e[i]),r<=0)return!0;return!1}return!1}function T(n,t){const e=O(n);for(let r=0;r<e.length;r++)if(B(t,e[r]))return!0;return!1}function v(n,t){if(n instanceof d)if(t instanceof d){const e=t.getCorners();for(let r=0;r<4;r++)if(!B(n,e[r]))return!1;return!0}else{const e=J(t);for(let r=0;r<4;r++)if(!B(n,e[r]))return!1;return!0}else if(t instanceof d){const e=t.getCorners();let r;for(let i=0;i<4;i++)if(r=P(n,e[i]),!(r<0))return!1;return!0}else{const e=O(t);let r;for(let i=0;i<e.length;i++)if(r=P(n,e[i]),!(r<0))return!1;return!0}}function D(n,t){const e=n.getCorners(),r=t.getCorners();return(e[0].y<=r[0].y&&e[2].y>=r[0].y||e[0].y<=r[2].y&&e[2].y>=r[2].y||r[0].y<=e[0].y&&r[2].y>=e[0].y||r[0].y<=e[2].y&&r[2].y>=e[2].y)&&(e[0].x<=r[0].x&&e[1].x>=r[0].x||e[0].x<=r[1].x&&e[1].x>=r[1].x||r[0].x<=e[0].x&&r[1].x>=e[0].x||r[0].x<=e[1].x&&r[1].x>=e[1].x)}function B(n,t){const e=n.getCorners();return e[0].x<t.x&&e[1].x>t.x&&e[0].y<t.y&&e[2].y>t.y}function P(n,t){return Math.pow(t.x-n.center.x,2)/Math.pow(n.radiusX,2)+Math.pow(t.y-n.center.y,2)/Math.pow(n.radiusY,2)-1}function J(n){return[new s(n.center.x,n.center.y-n.radiusY),new s(n.center.x+n.radiusX,n.center.y),new s(n.center.x,n.center.y+n.radiusY),new s(n.center.x-n.radiusX,n.center.y)]}function O(n){const t=[];let e,r,i=1;for(let o=0;o<360;o++)e=n.center.x+n.radiusX*Math.cos(o*(Math.PI/180)),o>180&&(i=-1),r=Q(n,e,i),t[o]=new s(e,r);return t}function Q(n,t,e){return n.radiusX===0||n.radiusY===0?n.center.y:e*n.radiusY*Math.sqrt(1-Math.pow((t-n.center.x)/n.radiusX,2))+n.center.y}class g{constructor(t,e){this.internalEllipse=t,this.internalChildren=e??[]}get ellipse(){return this.internalEllipse}set ellipse(t){this.internalEllipse=t}get children(){return this.internalChildren}set children(t){this.internalChildren=t}set child(t){this.internalChildren.push(t)}getCurrentCut(t){for(let e=0;e<this.internalChildren.length;e++){const r=this.internalChildren[e];if(r instanceof g&&r.containsNode(t))return r.getCurrentCut(t)}return this}containsPoint(t){return this.internalEllipse===null?!0:this.internalEllipse.containsPoint(t)}containsNode(t){return this.internalEllipse===null?!0:t instanceof h?v(this.internalEllipse,t.rectangle):v(this.internalEllipse,t.internalEllipse)}remove(t){if(this.containsPoint(t)){let e=!0;for(let r=0;r<this.internalChildren.length;r++)if(this.internalChildren[r].containsPoint(t))return e=!1,this.internalChildren[r]instanceof g?this.internalChildren[r].remove(t):(this.internalChildren=this.internalChildren.splice(r,1),!0);if(e)return!0}return!1}toString(){let t;return this.internalEllipse===null?t="Sheet of Assertion of the AEG Tree":t=`A cut node with boundary box of 
`+this.internalEllipse.toString(),this.internalChildren.length>0&&(t+=`, 
With nested nodes: `+this.internalChildren.toString()),t}toFormulaString(){let t="";for(const e of this.internalChildren)e instanceof h?t+=e.identifier:e instanceof g&&(t+=e.toFormulaString()),t+=" ";return t=t.slice(0,-1),this.internalEllipse===null?t="["+t+"]":t="("+t+")",t}}class _{constructor(t){this.sheet=t??new g(null)}verify(){return this.verifyAEG(this.sheet)}verifyAEG(t){for(let e=0;e<t.children.length;e++){if(!t.containsNode(t.children[e]))return!1;for(let r=e+1;r<t.children.length;r++)if(this.overlaps(t.children[e],t.children[r]))return!1}for(let e=0;e<t.children.length;e++)if(t.children[e]instanceof g&&!this.verifyAEG(t.children[e]))return!1;return!0}canInsert(t){const e=this.sheet.getCurrentCut(t);for(let r=0;r<e.children.length;r++)if(this.intersects(t,e.children[r]))return!1;return!0}insert(t){if(!this.canInsert(t))throw new Error("Insertion failed. "+t+" had a collision.");const e=this.sheet.getCurrentCut(t),r=[...e.children];if(e.child=t,t instanceof g)for(let i=r.length-1;i>=0;i--)t.containsNode(r[i])&&(t.child=r[i],e.children.splice(i,1))}remove(t){this.sheet.remove(t)}intersects(t,e){const r=t instanceof h?t.rectangle:t.ellipse,i=e instanceof h?e.rectangle:e.ellipse;return S(r,i)}overlaps(t,e){let r,i;return t instanceof h?e instanceof h?C(t.rectangle,e.rectangle):(r=e.ellipse,C(t.rectangle,r)):e instanceof h?(r=t.ellipse,C(r,e.rectangle)):(r=t.ellipse,i=e.ellipse,C(r,i))}toString(){return this.sheet.toFormulaString()}}class X{constructor(t,e,r){if(this.center=t,this.radiusX=e,this.radiusY=r,!Number.isFinite(this.radiusX)||!Number.isFinite(this.radiusY))throw new Error("A radius passed into an Ellipse construction was NaN or Infinity.");if(this.radiusX!==void 0&&this.radiusX<0)throw new Error("Horizontal radius in an Ellipse construction was negative.");if(this.radiusY!==void 0&&this.radiusY<0)throw new Error("Vertical radius in an Ellipse construction was negative.");const i=new s(this.center.x-this.radiusX,this.center.y-this.radiusY);this.boundingBox=new d(i,this.radiusX*2,this.radiusY*2)}containsPoint(t){return P(this,t)<0}overlaps(t){return C(this,t)}contains(t){return v(this,t)}toString(){return"An ellipse with Center at: "+this.center.toString()+", Horizontal radius: "+this.radiusX+", Vertical radius: "+this.radiusY+", Bounding box: "+this.boundingBox.toString()}}const E=document.getElementById("canvas"),G=E.getContext("2d"),N=document.getElementById("showRect"),tt=document.getElementById("mode");if(G===null)throw Error("2d rendering context not supported");const f=G;let m=new X(new s(0,0),0,0),I=new s(0,0),Y;function et(n){I.x=n.clientX,I.y=n.clientY,Y=!1}function nt(n){const t=new g(new X(new s(0,0),0,0)),e=new s(0,0);e.x=n.clientX,e.y=n.clientY,f.clearRect(0,0,E.width,E.height),x(a.sheet),m=z(I,e),t.ellipse=m,Y||(a.canInsert(t)&&q(m)?$(t,"#00FF00"):$(t,"#FF0000"))}function rt(n){let t=new g(m);const e=new s(0,0);e.x=n.clientX,e.y=n.clientY,m=z(I,e),t=new g(m),a.canInsert(t)&&!Y&&q(m)&&a.insert(t),I=new s(0,0),f.clearRect(0,0,E.width,E.height),x(a.sheet)}function it(){Y=!0,I=new s(0,0),f.clearRect(0,0,E.width,E.height),x(a.sheet)}function z(n,t){const e=new s((t.x-n.x)/2+n.x,(t.y-n.y)/2+n.y),r=n.x-t.x,i=n.y-t.y,o=Math.abs(r),p=Math.abs(i);let A,V;if(tt.value==="circumscribed"){const H=Math.floor(e.distance(t));V=Math.floor(H*(p/o)),A=Math.floor(H*(o/p))}else A=o/2,V=p/2;return N.checked&&(f.beginPath(),f.rect(n.x,n.y,-r,-i),f.stroke()),new X(e,A,V)}function $(n,t){f.strokeStyle=t;const e=n.ellipse,r=e.center;f.beginPath(),f.ellipse(r.x,r.y,e.radiusX,e.radiusY,0,0,2*Math.PI),f.stroke()}function q(n){return n.radiusX>15&&n.radiusY>15}const w=document.getElementById("canvas"),U=w.getContext("2d");if(U===null)throw Error("2d rendering context not supported");const c=U,W=document.getElementById("atomDisplay");let b,k,l=new h("A",new s(0,0),new d(new s(0,0),0,0));W.innerHTML=l.identifier;function st(n){new RegExp(/^[A-Za-z]$/).test(n.key)&&(l.identifier=n.key,W.innerHTML=l.identifier)}function ot(n){b=c.measureText(l.identifier),k=!1;const t=new s(n.clientX,n.clientY-b.actualBoundingBoxAscent);l.rectangle=new d(t,b.width,b.fontBoundingBoxDescent+b.actualBoundingBoxAscent),l.origin=new s(n.clientX,n.clientY),c.clearRect(0,0,w.width,w.height),x(a.sheet),a.canInsert(l)?F(l,"#00FF00"):F(l,"#FF0000")}function lt(n){l.origin=new s(n.clientX,n.clientY),l.rectangle.startVertex=new s(n.clientX,n.clientY-b.actualBoundingBoxAscent),c.clearRect(0,0,w.width,w.height),x(a.sheet),k||(a.canInsert(l)?F(l,"#00FF00"):F(l,"#FF0000"))}function at(){a.canInsert(l)&&!k&&a.insert(l),l=new h(l.identifier,new s(0,0),new d(new s(0,0),0,0)),c.clearRect(0,0,w.width,w.height),x(a.sheet),console.log(a.toString())}function ct(){l=new h(l.identifier,new s(0,0),new d(new s(0,0),0,0)),k=!0,c.clearRect(0,0,w.width,w.height),x(a.sheet)}function F(n,t){c.fillStyle=t,c.strokeStyle=t;const e=n.rectangle;c.beginPath(),c.fillText(n.identifier,n.origin.x,n.origin.y),c.rect(e.startVertex.x,e.startVertex.y,e.width,e.height),c.stroke()}const y=document.getElementById("canvas");y.width=window.innerWidth;y.height=window.innerHeight;const K=y.getContext("2d");if(K===null)throw Error("2d rendering context not supported");const u=K;u.font="35pt arial";const ut=document.getElementById("graphString"),Z=document.getElementById("cutTools"),j=document.getElementById("atomTools");window.addEventListener("keypress",ft);y.addEventListener("mousedown",gt);y.addEventListener("mousemove",wt);y.addEventListener("mouseup",yt);y.addEventListener("mouseout",xt);y.addEventListener("mouseenter",pt);let M="",R=!1,L=!0;const a=new _;window.atomMode=dt;window.ellipseMode=ht;function ht(){M="cutMode",Z.style.display="block",j.style.display="none"}function dt(){M="atomMode",j.style.display="block",Z.style.display="none"}function ft(n){switch(M){case"atomMode":st(n);break}}function gt(n){switch(M){case"cutMode":et(n);break;case"atomMode":ot(n);break}R=!0}function wt(n){switch(M){case"cutMode":R&&L&&nt(n);break;case"atomMode":R&&L&&lt(n);break}}function yt(n){switch(M){case"cutMode":rt(n);break;case"atomMode":at();break}R=!1}function xt(){switch(M){case"cutMode":it();break;case"atomMode":ct();break}}function pt(){L=!0}function x(n){ut.innerHTML=a.toString();for(let t=0;n.children.length>t;t++)n.children[t]instanceof h?mt(n.children[t]):x(n.children[t]);n.ellipse instanceof X&&(u.strokeStyle="#000000",u.beginPath(),u.ellipse(n.ellipse.center.x,n.ellipse.center.y,n.ellipse.radiusX,n.ellipse.radiusY,0,0,2*Math.PI),u.stroke())}function mt(n){const t=n.rectangle;u.strokeStyle="#000000",u.fillStyle="#000000",u.beginPath(),u.rect(t.startVertex.x,t.startVertex.y,t.width,t.height),u.fillText(n.identifier,n.origin.x,n.origin.y),u.stroke()}
