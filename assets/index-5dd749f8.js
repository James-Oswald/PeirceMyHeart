(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();class i{constructor(e,t){this.x=e??0,this.y=t??0}set(e,t){this.x=e,this.y=t}distance(e){const t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)}toString(){return"X: "+this.x+", Y: "+this.y}}function F(n,e){if(n instanceof w){if(e instanceof w)return j(n,e);{const t=X(e,64);for(let r=0;r<t.length;r++)if(b(n,t[r]))return!0;return!1}}else if(e instanceof w){const t=X(n,64);for(let r=0;r<t.length;r++)if(b(e,t[r]))return!0;return!1}else{if(F(n.boundingBox,e.boundingBox)||k(e.boundingBox,n.boundingBox)){const t=X(n,64);for(let r=0;r<t.length;r++)if(Y(e,t[r]))return!0}return!1}}function k(n,e){if(n instanceof w)if(e instanceof w){const t=e.getCorners();for(let r=0;r<4;r++)if(!b(n,t[r]))return!1;return!0}else{const t=D(e);for(let r=0;r<4;r++)if(!b(n,t[r]))return!1;return!0}else if(e instanceof w){const t=e.getCorners();for(let r=0;r<4;r++)if(!Y(n,t[r]))return!1;return!0}else{const t=X(e,64);for(let r=0;r<t.length;r++)if(!Y(n,t[r]))return!1;return!0}}function j(n,e){const t=n.getCorners(),r=e.getCorners();return t[0].y<=r[0].y&&t[2].y>=r[0].y||r[0].y<=t[0].y&&r[2].y>=t[0].y||t[0].y<=r[2].y&&t[2].y>=r[2].y||r[0].y<=t[2].y&&r[2].y>=t[2].y?t[0].x<=r[0].x&&t[1].x>=r[0].x||r[0].x<=t[0].x&&r[1].x>=t[0].x||t[0].x<=r[1].x&&t[1].x>=r[1].x?!0:r[0].x<=t[1].x&&r[1].x>=t[1].x:!1}function b(n,e){const t=n.getCorners();return t[0].x<e.x&&t[1].x>e.x&&t[0].y<e.y&&t[2].y>e.y}function Y(n,e){return Math.pow(e.x-n.center.x,2)/Math.pow(n.radiusX,2)+Math.pow(e.y-n.center.y,2)/Math.pow(n.radiusY,2)<1}function D(n){return[new i(n.center.x,n.center.y-n.radiusY),new i(n.center.x+n.radiusX,n.center.y),new i(n.center.x,n.center.y+n.radiusY),new i(n.center.x-n.radiusX,n.center.y)]}function X(n,e){const t=[],r=n.radiusX/(e/4);t[0]=D(n)[3];let s,o;for(let a=1;a<e;a++)a<e/2+1?(s=t[a-1].x+r,o=$(n,s,1)):(s=t[a-1].x-r,o=$(n,s,-1)),t[a]=new i(s,o);return t}function $(n,e,t){return t*n.radiusY*Math.sqrt(1-Math.pow((e-n.center.x)/n.radiusX,2))+n.center.y}class w{constructor(e,t,r){this.startVertex=e??new i,this.width=t??0,this.height=r??0}getCorners(){const e=[this.startVertex];return e.push(new i(this.startVertex.x+this.width,this.startVertex.y)),e.push(new i(this.startVertex.x+this.width,this.startVertex.y+this.height)),e.push(new i(this.startVertex.x,this.startVertex.y+this.height)),e}containsPoint(e){return b(this,e)}overlaps(e){return F(this,e)}contains(e){return k(this,e)}toString(){return`A rectangle with
Top Left Vertex at: `+this.startVertex.toString()+", Width: "+this.width+", Height: "+this.height}}class d{constructor(e,t,r){this.rect=r??new w,this.identifier=e,this.origin=t??new i}get Rectangle(){return this.rect}set Rectangle(e){this.rect=e}get Identifier(){return this.identifier}set Identifier(e){this.identifier=e}get Origin(){return this.origin}set Origin(e){this.origin=e}containsPoint(e){return this.rect.containsPoint(e)}containsNode(e){return e instanceof d?this.rect.contains(e.Rectangle):this.rect.contains(e.Ellipse)}toString(){return"An atom representing the proposition: "+this.identifier+" and Boundary box of: "+this.rect.toString()}}class p{constructor(e,t){this.ellipse=e,this.children=t??[]}get Ellipse(){return this.ellipse}set Ellipse(e){this.ellipse=e}get Children(){return this.children}set Children(e){this.children=e}set Child(e){this.children.push(e)}getCurrentCut(e){for(let t=0;t<this.children.length;t++){const r=this.children[t];if(r instanceof p&&r.containsNode(e))return r.getCurrentCut(e)}return this}containsPoint(e){return this.ellipse===null?!0:this.ellipse.containsPoint(e)}containsNode(e){return this.ellipse===null?!0:e instanceof d?this.ellipse.contains(e.Rectangle):this.ellipse.contains(e.Ellipse)}remove(e){if(this.containsPoint(e)){let t=!0;for(let r=0;r<this.children.length;r++)if(this.children[r].containsPoint(e))return t=!1,this.children[r]instanceof p?this.children[r].remove(e):(this.children=this.children.splice(r,1),!0);if(t)return!0}return!1}toString(){let e;return this.ellipse===null?e="Sheet of Assertion of the AEG Tree":e=`A cut node with boundary box of 
`+this.ellipse.toString(),this.children.length>0&&(e+=`, 
With nested nodes: `+this.children.toString()),e}toFormulaString(){let e="";for(const t of this.children)t instanceof d?e+=t.Identifier:t instanceof p&&(e+=t.toFormulaString()),e+=" ";return e=e.slice(0,-1),this.ellipse===null?e="["+e+"]":e="("+e+")",e}}class K{constructor(e){this.sheet=e??new p(null)}verify(){return this.verifyAEG(this.sheet)}verifyAEG(e){for(let t=0;t<e.Children.length;t++){if(!e.containsNode(e.Children[t]))return!1;for(let r=t+1;r<e.Children.length;r++)if(this.overlaps(e.Children[t],e.Children[r]))return!1}for(let t=0;t<e.Children.length;t++)if(e.Children[t]instanceof p&&!this.verifyAEG(e.Children[t]))return!1;return!0}canInsert(e){const t=this.sheet.getCurrentCut(e);for(let r=0;r<t.Children.length;r++)if(this.overlaps(e,t.Children[r]))return!1;return!0}insert(e){if(!this.canInsert(e))throw new Error("Insertion failed. "+e+" had a collision.");const t=this.sheet.getCurrentCut(e),r=[...t.Children];if(t.Child=e,e instanceof p)for(let s=0;s<r.length;s++)e.containsNode(r[s])&&(e.Child=r[s],t.Children.splice(s,1))}remove(e){this.sheet.remove(e)}overlaps(e,t){let r,s;return e instanceof d?t instanceof d?e.Rectangle.overlaps(t.Rectangle):(r=t.Ellipse,e.Rectangle.overlaps(r)):t instanceof d?(r=e.Ellipse,r.overlaps(t.Rectangle)):(r=e.Ellipse,s=t.Ellipse,r.overlaps(s))}toString(){return this.sheet.toFormulaString()}}class V{constructor(e,t,r){this.center=e??new i,this.radiusX=t??0,this.radiusY=r??0;const s=new i(this.center.x-this.radiusX,this.center.y-this.radiusY);this.boundingBox=new w(s,this.radiusX*2,this.radiusY*2)}toString(){return"An ellipse with Center at: "+this.center.toString()+`, 
Horizontal Radius of: `+this.radiusX+`, 
Vertical Radius of: `+this.radiusY+`, 
Bounding box: `+this.boundingBox.toString()}containsPoint(e){return Y(this,e)}overlaps(e){return F(this,e)}contains(e){return k(this,e)}}const C=document.getElementById("canvas"),G=C.getContext("2d"),Z=document.getElementById("showRect"),J=document.getElementById("mode");if(G===null)throw Error("2d rendering context not supported");const g=G;let I=!1,v=new V,B=new i;function m(n){let e=new p(new V);const t=new i;n.type==="mousedown"?(I=!0,B.x=n.clientX,B.y=n.clientY):n.type==="mousemove"&&I?(t.x=n.clientX,t.y=n.clientY,g.clearRect(0,0,C.width,C.height),E(c.sheet),v=Q(B,t),e.Ellipse=v,c.canInsert(e)&&v.radiusX>15&&v.radiusY>15?T(e,"#00FF00"):T(e,"#FF0000")):n.type==="mouseup"&&I?(e=new p(v),c.canInsert(e)&&v.radiusX>15&&v.radiusY>15&&c.insert(e),I=!1,B=new i,g.clearRect(0,0,C.width,C.height),E(c.sheet),console.log(c.toString())):n.type==="mouseout"&&I&&(I=!1,B=new i,g.clearRect(0,0,C.width,C.height),E(c.sheet))}function Q(n,e){const t=new i((e.x-n.x)/2+n.x,(e.y-n.y)/2+n.y),r=n.x-e.x,s=n.y-e.y,o=Math.abs(r),a=Math.abs(s);let A,O;if(J.value==="circumscribed"){const S=Math.floor(t.distance(e));O=Math.floor(S*(a/o)),A=Math.floor(S*(o/a))}else A=o/2,O=a/2;return Z.checked&&(g.beginPath(),g.rect(n.x,n.y,-r,-s),g.stroke()),new V(t,A,O)}function T(n,e){g.strokeStyle=e;const t=n.Ellipse,r=t.center;g.beginPath(),g.ellipse(r.x,r.y,t.radiusX,t.radiusY,0,0,2*Math.PI),g.stroke()}const y=document.getElementById("canvas"),W=y.getContext("2d");if(W===null)throw Error("2d rendering context not supported");const h=W;let M,L=!1,H=!1,u=new d("a");function x(n){if(n.type==="keypress"){const e=n;new RegExp(/^[A-Za-z]$/).test(e.key)&&(u.Identifier=e.key,H=!0)}else if(n.type==="mousedown"&&H){const e=n;M=h.measureText(u.Identifier);const t=new i(e.clientX,e.clientY-M.actualBoundingBoxAscent);u.Rectangle=new w(t,M.width,M.fontBoundingBoxDescent+M.actualBoundingBoxAscent),u.Origin=new i(e.clientX,e.clientY),h.clearRect(0,0,y.width,y.height),E(c.sheet),c.canInsert(u)?P(u,"#00FF00"):P(u,"#6600ff"),L=!0}else if(n.type==="mousemove"&&L){const e=n;u.Origin=new i(e.clientX,e.clientY),u.Rectangle.startVertex=new i(e.clientX,e.clientY-M.actualBoundingBoxAscent),h.clearRect(0,0,y.width,y.height),E(c.sheet),c.canInsert(u)?P(u,"#00FF00"):P(u,"#FF0000")}else n.type==="mouseup"&&L?(c.canInsert(u)&&c.insert(u),u=new d(u.Identifier),h.clearRect(0,0,y.width,y.height),E(c.sheet),L=!1,console.log(c.toString())):n.type==="mouseout"&&L&&(L=!1,u=new d(u.Identifier),h.clearRect(0,0,y.width,y.height),E(c.sheet))}function P(n,e){h.fillStyle=e,h.strokeStyle=e;const t=n.Rectangle;h.beginPath(),h.fillText(n.Identifier,n.Origin.x,n.Origin.y),h.rect(t.startVertex.x,t.startVertex.y,t.width,t.height),h.stroke()}const l=document.getElementById("canvas");l.width=window.innerWidth;l.height=window.innerHeight;const q=l.getContext("2d");if(q===null)throw Error("2d rendering context not supported");const f=q;f.font="35pt arial";const U=document.getElementById("graphString");let R;const c=new K;window.atomMode=N;window.ellipseMode=_;function _(){R!=="ellipseMode"&&(z(),R="ellipseMode"),l.addEventListener("mousedown",m),l.addEventListener("mousemove",m),l.addEventListener("mouseup",m),l.addEventListener("mouseout",m)}function N(){R!=="atomMode"&&(z(),R="atomMode"),window.addEventListener("keypress",x),l.addEventListener("mousedown",x),l.addEventListener("mousemove",x),l.addEventListener("mouseup",x),l.addEventListener("mouseout",x)}function z(){R==="ellipseMode"?(l.removeEventListener("mousedown",m),l.removeEventListener("mousemove",m),l.removeEventListener("mouseup",m),l.removeEventListener("mouseout",m)):R==="atomMode"&&(window.removeEventListener("keypress",x),l.removeEventListener("mousedown",x),l.removeEventListener("mousemove",x),l.removeEventListener("mouseup",x),l.removeEventListener("mouseout",x))}function E(n){U.innerHTML=c.toString();for(let e=0;n.Children.length>e;e++)n.Children[e]instanceof d?ee(n.Children[e]):E(n.Children[e]);n.Ellipse instanceof V&&(f.strokeStyle="#000000",f.beginPath(),f.ellipse(n.Ellipse.center.x,n.Ellipse.center.y,n.Ellipse.radiusX,n.Ellipse.radiusY,0,0,2*Math.PI),f.stroke())}function ee(n){const e=n.Rectangle;f.strokeStyle="#000000",f.fillStyle="#000000",f.beginPath(),f.rect(e.startVertex.x,e.startVertex.y,e.width,e.height),f.fillText(n.Identifier,n.Origin.x,n.Origin.y),f.stroke()}
