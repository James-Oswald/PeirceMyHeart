/* empty css               */(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const u of s)if(u.type==="childList")for(const S of u.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&i(S)}).observe(document,{childList:!0,subtree:!0});function n(s){const u={};return s.integrity&&(u.integrity=s.integrity),s.referrerPolicy&&(u.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?u.credentials="include":s.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(s){if(s.ep)return;s.ep=!0;const u=n(s);fetch(s.href,u)}})();class l{constructor(e,n){if(this.x=e,this.y=n,!Number.isFinite(this.x)||!Number.isFinite(this.y))throw new Error("NaN or Infinity value(s) were passed in constructing a Point.")}set(e,n){if(!Number.isFinite(e)||!Number.isFinite(n))throw new Error("NaN or Infinity value(s) were passed in setting "+this+"'s coords.");this.x=e,this.y=n}distance(e){const n=this.x-e.x,i=this.y-e.y;return Math.sqrt(n*n+i*i)}toString(){return"("+this.x+", "+this.y+")"}}function T(t,e){return be(t,e)||j(e,t)}function be(t,e){if(t instanceof P)return e instanceof P?me(t,e):xe(e,t);if(e instanceof P)return xe(t,e);if(me(t.boundingBox,e.boundingBox)||j(e.boundingBox,t.boundingBox)){const n=ce(t);let i;for(let s=0;s<n.length;s++)if(i=_(e,n[s]),i<=0)return!0;return!1}return!1}function xe(t,e){const n=ce(t);for(let i=0;i<n.length;i++)if(N(e,n[i]))return!0;return!1}function j(t,e){if(t instanceof P)if(e instanceof P){const n=e.getCorners();for(let i=0;i<4;i++)if(!N(t,n[i]))return!1;return!0}else{const n=ze(e);for(let i=0;i<4;i++)if(!N(t,n[i]))return!1;return!0}else if(e instanceof P){const n=e.getCorners();let i;for(let s=0;s<4;s++)if(i=_(t,n[s]),!(i<0))return!1;return!0}else{const n=ce(e);let i;for(let s=0;s<n.length;s++)if(i=_(t,n[s]),!(i<0))return!1;return!0}}function me(t,e){const n=t.getCorners(),i=e.getCorners();return(n[0].y<=i[0].y&&n[2].y>=i[0].y||n[0].y<=i[2].y&&n[2].y>=i[2].y||i[0].y<=n[0].y&&i[2].y>=n[0].y||i[0].y<=n[2].y&&i[2].y>=n[2].y)&&(n[0].x<=i[0].x&&n[1].x>=i[0].x||n[0].x<=i[1].x&&n[1].x>=i[1].x||i[0].x<=n[0].x&&i[1].x>=n[0].x||i[0].x<=n[1].x&&i[1].x>=n[1].x)}function N(t,e){const n=t.getCorners();return n[0].x<e.x&&n[1].x>e.x&&n[0].y<e.y&&n[2].y>e.y}function _(t,e){return Math.pow(e.x-t.center.x,2)/Math.pow(t.radiusX,2)+Math.pow(e.y-t.center.y,2)/Math.pow(t.radiusY,2)-1}function ze(t){return[new l(t.center.x,t.center.y-t.radiusY),new l(t.center.x+t.radiusX,t.center.y),new l(t.center.x,t.center.y+t.radiusY),new l(t.center.x-t.radiusX,t.center.y)]}function ce(t){const e=[];let n,i,s=1;for(let u=0;u<360;u++)n=t.center.x+t.radiusX*Math.cos(u*(Math.PI/180)),u>180&&(s=-1),i=Je(t,n,s),e[u]=new l(n,i);return e}function Je(t,e,n){return t.radiusX===0||t.radiusY===0?t.center.y:n*t.radiusY*Math.sqrt(1-Math.pow((e-t.center.x)/t.radiusX,2))+t.center.y}class P{constructor(e,n,i){if(!Number.isFinite(n)||!Number.isFinite(i))throw new Error("Infinity/NaN passed in for width/height while constructing a Rectangle.");if(n!==void 0&&n<0)throw new Error("Negative value passed for width while constructing a Rectangle.");if(i!==void 0&&i<0)throw new Error("Negative value passed for height while constructing a Rectangle.");this.startVertex=e,this.width=n,this.height=i}getCorners(){const e=[this.startVertex];return e.push(new l(this.startVertex.x+this.width,this.startVertex.y)),e.push(new l(this.startVertex.x+this.width,this.startVertex.y+this.height)),e.push(new l(this.startVertex.x,this.startVertex.y+this.height)),e}containsPoint(e){return N(this,e)}overlaps(e){return T(this,e)}contains(e){return j(this,e)}toString(){return"Rectangle with top left vertex at: "+this.startVertex.toString()+", w: "+this.width+", h: "+this.height}}class c{constructor(e,n,i,s){if(e.length!==1)throw new Error("String of length "+e.length+" passed in as identifier in AtomNode constructor, which is not of length 1.");if(!/^[A-Za-z]$/.test(e))throw new Error(e+" not contained in Latin alphabet passed in as identifier in AtomNode constructor.");this.internalIdentifier=e,this.internalOrigin=n,this.internalWidth=i,this.internalHeight=s}get width(){return this.internalWidth}set width(e){this.internalWidth=e}get height(){return this.internalHeight}set height(e){this.internalHeight=e}get identifier(){return this.internalIdentifier}set identifier(e){this.internalIdentifier=e}get origin(){return this.internalOrigin}set origin(e){this.internalOrigin=e}containsPoint(e){return this.calcRect().containsPoint(e)}toString(){return"An atom representing the proposition: "+this.internalIdentifier+" and Boundary box of: "+this.calcRect().toString()}calcRect(){return new P(new l(this.internalOrigin.x,this.internalOrigin.y-this.internalHeight),this.internalWidth,this.internalHeight)}}class h{constructor(e,n){this.internalEllipse=e,this.internalChildren=n??[]}get ellipse(){return this.internalEllipse}set ellipse(e){this.internalEllipse=e}get children(){return this.internalChildren}set children(e){this.internalChildren=e}set child(e){this.internalChildren.push(e)}getCurrentCut(e){for(let n=0;n<this.internalChildren.length;n++){const i=this.internalChildren[n];if(i instanceof h&&i.containsNode(e))return i.getCurrentCut(e)}return this}containsPoint(e){return this.internalEllipse===null?!0:this.internalEllipse.containsPoint(e)}containsNode(e){return this.internalEllipse===null?!0:e instanceof c?j(this.internalEllipse,e.calcRect()):j(this.internalEllipse,e.internalEllipse)}getLowestNode(e){if(!this.containsPoint(e))return null;for(let n=0;n<this.internalChildren.length;n++)if(this.internalChildren[n].containsPoint(e))return this.internalChildren[n]instanceof c||this.internalChildren[n]instanceof h&&this.internalChildren[n].children.length===0?this.internalChildren[n]:this.internalChildren[n].getLowestNode(e);return this}getLowestParent(e){if(!this.containsPoint(e))throw new Error("This parent "+this.toString+" does not contain the point.");for(let n=0;n<this.internalChildren.length;n++)if(this.internalChildren[n].containsPoint(e)){if(this.internalChildren[n]instanceof c||this.internalChildren[n]instanceof h&&this.internalChildren[n].children.length===0)return this;{const i=this.internalChildren[n];for(let s=0;s<i.children.length;s++)if(i.children[s].containsPoint(e))return i.getLowestParent(e);return this}}return null}remove(e){if(!this.containsPoint(e))return!1;for(let n=0;n<this.children.length;n++)if(this.children[n].containsPoint(e)){if(this.children[n]instanceof c||this.children[n]instanceof h&&this.children[n].children.length===0)return this.children.splice(n,1),!0;for(let i=0;i<this.children[n].children.length;i++)if(this.children[n].children[i].containsPoint(e))if(this.children[n].children[i]instanceof c)this.children[n].children.splice(i,1);else return this.children[n].children[i].remove(e);return this.children.splice(n,1),!0}return!1}toString(){let e;return this.internalEllipse===null?e="Sheet of Assertion of the AEG Tree":e="A cut node with boundary box of "+this.internalEllipse.toString(),this.internalChildren.length>0&&(e+=", With nested nodes: "+this.internalChildren.toString()),e}toFormulaString(){let e="";for(const n of this.internalChildren)n instanceof c?e+=n.identifier:n instanceof h&&(e+=n.toFormulaString()),e+=" ";return e=e.slice(0,-1),this.internalEllipse===null?e="["+e+"]":e="("+e+")",e}}class ae{constructor(e){this.internalSheet=e??new h(null)}get sheet(){return this.internalSheet}set sheet(e){this.internalSheet=e}verify(){return this.verifyAEG(this.internalSheet)}verifyAEG(e){for(let n=0;n<e.children.length;n++){if(!e.containsNode(e.children[n]))return!1;for(let i=n+1;i<e.children.length;i++)if(this.overlaps(e.children[n],e.children[i]))return!1}for(let n=0;n<e.children.length;n++)if(e.children[n]instanceof h&&!this.verifyAEG(e.children[n]))return!1;return!0}canInsert(e){const n=this.internalSheet.getCurrentCut(e);for(let i=0;i<n.children.length;i++)if(this.intersects(e,n.children[i]))return!1;return!0}insert(e){if(!this.canInsert(e))throw new Error("Insertion failed. "+e+" had a collision.");const n=this.internalSheet.getCurrentCut(e),i=[...n.children];if(n.child=e,e instanceof h)for(let s=i.length-1;s>=0;s--)e.containsNode(i[s])&&(e.child=i[s],n.children.splice(s,1));return!0}getLowestNode(e){return this.internalSheet.getLowestNode(e)}getLowestParent(e){return this.internalSheet.getLowestParent(e)}remove(e){return this.internalSheet.remove(e)}intersects(e,n){const i=e instanceof c?e.calcRect():e.ellipse,s=n instanceof c?n.calcRect():n.ellipse;return be(i,s)}overlaps(e,n){let i,s;return e instanceof c?n instanceof c?T(e.calcRect(),n.calcRect()):(i=n.ellipse,T(e.calcRect(),i)):n instanceof c?(i=e.ellipse,T(i,n.calcRect())):(i=e.ellipse,s=n.ellipse,T(i,s))}toString(){return this.internalSheet.toFormulaString()}}class Z{constructor(e,n,i){if(this.center=e,this.radiusX=n,this.radiusY=i,!Number.isFinite(this.radiusX)||!Number.isFinite(this.radiusY))throw new Error("A radius passed into an Ellipse construction was NaN or Infinity.");if(this.radiusX!==void 0&&this.radiusX<0)throw new Error("Horizontal radius in an Ellipse construction was negative.");if(this.radiusY!==void 0&&this.radiusY<0)throw new Error("Vertical radius in an Ellipse construction was negative.");const s=new l(this.center.x-this.radiusX,this.center.y-this.radiusY);this.boundingBox=new P(s,this.radiusX*2,this.radiusY*2)}containsPoint(e){return _(this,e)<0}overlaps(e){return T(this,e)}contains(e){return j(this,e)}toString(){return"An ellipse with Center at: "+this.center.toString()+", Horizontal radius: "+this.radiusX+", Vertical radius: "+this.radiusY+", Bounding box: "+this.boundingBox.toString()}}const q=document.getElementById("canvas"),ve=q.getContext("2d");if(ve===null)throw Error("2d rendering context not supported");const Ie=ve;let oe,o=new l(0,0),he;function qe(t){oe=new l(t.x-o.x,t.y-o.y),he=!1}function Ke(t){he||(o=new l(t.x-oe.x,t.y-oe.y),Ie.clearRect(0,0,q.width,q.height),a(r.sheet,o))}function Ze(){he=!0,Ie.clearRect(0,0,q.width,q.height),a(r.sheet,o)}const le=document.getElementById("canvas"),Qe=document.getElementById("theme-select"),ke=le.getContext("2d");if(ke===null)throw Error("2d rendering context not supported");const Ne=ke;function W(t){return getComputedStyle(document.body).getPropertyValue(t)}let Be=W("--good-placement"),Re=W("--bad-placement"),Pe=W("--canvas-items");function Le(){setTimeout(()=>{Be=W("--good-placement"),Re=W("--bad-placement"),Pe=W("--canvas-items"),Ne.clearRect(0,0,le.width,le.height),a(r.sheet,o)})}Qe.addEventListener("input",()=>{Le()});window.addEventListener("DOMContentLoaded",()=>{Le()});function E(){return Re}function M(){return Be}function Se(){return Pe}const $=document.getElementById("canvas"),$e=$.getContext("2d"),_e=document.getElementById("showRect"),et=document.getElementById("mode");if($e===null)throw Error("2d rendering context not supported");const v=$e;let ue,ne;function tt(t){ue=new l(t.clientX-o.x,t.clientY-o.y),ne=!1}function nt(t){const e=new h(new Z(new l(0,0),0,0)),n=new l(t.clientX-o.x,t.clientY-o.y);v.clearRect(0,0,$.width,$.height),a(r.sheet,o),e.ellipse=Ae(ue,n),ne||(r.canInsert(e)&&Oe(e.ellipse)?A(e,M()):A(e,E()))}function it(t){const e=new l(t.clientX-o.x,t.clientY-o.y),n=new h(Ae(ue,e));r.canInsert(n)&&!ne&&Oe(n.ellipse)&&r.insert(n),v.clearRect(0,0,$.width,$.height),a(r.sheet,o)}function rt(){ne=!0,v.clearRect(0,0,$.width,$.height),a(r.sheet,o)}function Ae(t,e){const n=new l((e.x-t.x)/2+t.x,(e.y-t.y)/2+t.y),i=t.x-e.x,s=t.y-e.y,u=Math.abs(i),S=Math.abs(s);let re,se;if(et.value==="circumscribed"){const pe=Math.floor(n.distance(e));se=Math.floor(pe*(S/u)),re=Math.floor(pe*(u/S))}else re=u/2,se=S/2;return _e.checked&&(v.beginPath(),v.rect(t.x+o.x,t.y+o.y,-i,-s),v.stroke()),new Z(n,re,se)}function A(t,e){v.strokeStyle=e;const n=t.ellipse,i=n.center;v.beginPath(),v.ellipse(i.x+o.x,i.y+o.y,n.radiusX,n.radiusY,0,0,2*Math.PI),v.stroke()}function Oe(t){return t.radiusX>15&&t.radiusY>15}const C=document.getElementById("canvas"),De=C.getContext("2d");if(De===null)throw Error("2d rendering context not supported");const w=De,He=document.getElementById("atomDisplay"),st=document.getElementById("atomBox"),Xe=document.getElementById("atomBoxes");Xe.addEventListener("input",ut);let x,ie,O="A";He.innerHTML=O;function ot(t){new RegExp(/^[A-Za-z]$/).test(t.key)&&(O=t.key,He.innerHTML=O)}function lt(t){x=w.measureText(O),ie=!1;const e=new c(O,new l(t.clientX-o.x,t.clientY-o.y),x.width,x.fontBoundingBoxDescent+x.actualBoundingBoxAscent);w.clearRect(0,0,C.width,C.height),a(r.sheet,o),r.canInsert(e)?y(e,M(),!0):y(e,E(),!0)}function ct(t){const e=new c(O,new l(t.clientX-o.x,t.clientY-o.y),x.width,x.fontBoundingBoxDescent+x.actualBoundingBoxAscent);w.clearRect(0,0,C.width,C.height),a(r.sheet,o),ie||(r.canInsert(e)?y(e,M(),!0):y(e,E(),!0))}function at(t){const e=new c(O,new l(t.clientX-o.x,t.clientY-o.y),x.width,x.fontBoundingBoxDescent+x.actualBoundingBoxAscent);r.canInsert(e)&&!ie&&r.insert(e),w.clearRect(0,0,C.width,C.height),a(r.sheet,o)}function ht(){ie=!0,w.clearRect(0,0,C.width,C.height),a(r.sheet,o)}function y(t,e,n){w.textBaseline="bottom",x=w.measureText(t.identifier),w.fillStyle=e,w.strokeStyle=e,w.beginPath(),w.fillText(t.identifier,t.origin.x+o.x,t.origin.y+o.y),(Xe.checked||st.checked&&n)&&w.rect(t.origin.x+o.x,t.origin.y+o.y-x.actualBoundingBoxAscent,t.width,t.height),w.stroke()}function ut(){w.clearRect(0,0,C.width,C.height),a(r.sheet,o)}async function dt(t,e){const n=JSON.stringify(e,null,"	"),i=await t.createWritable();await i.write(n),await i.close()}function ft(t){if(typeof t=="string"){const n=JSON.parse(t).internalSheet.internalChildren,i=new ae,s=[];return n.forEach(u=>{Object.prototype.hasOwnProperty.call(u,"internalEllipse")?s.push(Fe(u)):s.push(Ye(u))}),i.sheet.children=s,i}return null}function Fe(t){const e=new Z(new l(t.internalEllipse.center.x,t.internalEllipse.center.y),t.internalEllipse.radiusX,t.internalEllipse.radiusY),n=[];return t.internalChildren.forEach(i=>{"internalEllipse"in i?n.push(Fe(i)):n.push(Ye(i))}),new h(e,n)}function Ye(t){const e=t.internalIdentifier,n=new l(t.internalOrigin.x,t.internalOrigin.y);return new c(e,n,t.internalWidth,t.internalHeight)}function Q(t,e){if(t.ellipse!==null){const n=L(t,e);if(!r.canInsert(n))return!1}for(let n=0;n<t.children.length;n++){if(t.children[n]instanceof h&&t.children[n].ellipse!==null&&!Q(t.children[n],e))return!1;if(t.children[n]instanceof c){let i=t.children[n];if(i=b(i,e),!r.canInsert(i))return!1}}return!0}function K(t,e,n){if(t instanceof h&&t.ellipse!==null){const i=L(t,n);if(A(i,e),t.children.length!==0)for(let s=0;s<t.children.length;s++)K(t.children[s],e,n)}else if(t instanceof c){const i=b(t,n);y(i,e,!0)}}function de(t,e){if(t instanceof h&&t.ellipse!==null){const n=L(t,e);if(r.insert(n),t.children.length!==0)for(let i=0;i<t.children.length;i++)de(t.children[i],e)}else if(t instanceof c){const n=b(t,e);r.insert(n)}}function L(t,e){if(t.ellipse!==null)return new h(new Z(new l(t.ellipse.center.x+e.x-o.x,t.ellipse.center.y+e.y-o.y),t.ellipse.radiusX,t.ellipse.radiusY));throw new Error("Cannot alter the position of a cut without an ellipse.")}function b(t,e){return new c(t.identifier,new l(t.origin.x+e.x-o.x,t.origin.y+e.y-o.y),t.width,t.height)}const I=document.getElementById("canvas"),Te=I.getContext("2d");if(Te===null)throw Error("2d rendering context not supported");const ee=Te;let B,d=null,D;function wt(t){if(B=new l(t.x-o.x,t.y-o.y),d=r.getLowestNode(B),d!==r.sheet&&d!==null){const e=r.getLowestParent(B);if(e!==null&&e.remove(B),d instanceof h&&d.children.length!==0){for(let n=0;n<d.children.length;n++)r.insert(d.children[n]);d.children=[]}D=!0}else D=!1}function gt(t){if(D){const e=new l(t.x-B.x,t.y-B.y);if(d instanceof h){const n=L(d,e);ee.clearRect(0,0,I.width,I.height),a(r.sheet,o),r.canInsert(n)?A(n,M()):A(n,E())}else if(d instanceof c){const n=b(d,e);ee.clearRect(0,0,I.width,I.height),a(r.sheet,o),r.canInsert(n)?y(n,M(),!0):y(n,E(),!0)}}}function yt(t){if(D){const e=new l(t.x-B.x,t.y-B.y);if(d instanceof h){const n=L(d,e);r.canInsert(n)?r.insert(n):r.insert(d)}else if(d instanceof c){const n=b(d,e);r.canInsert(n)?r.insert(n):r.insert(d)}ee.clearRect(0,0,I.width,I.height),a(r.sheet,o)}D=!1}function pt(){D&&d!==null&&r.insert(d),D=!1,ee.clearRect(0,0,I.width,I.height),a(r.sheet,o)}const H=document.getElementById("canvas"),Ve=H.getContext("2d");if(Ve===null)throw Error("2d rendering context not supported");const fe=Ve;let R,f=null,X;function xt(t){if(R=new l(t.x-o.x,t.y-o.y),f=r.getLowestNode(R),f!==r.sheet&&f!==null){const e=r.getLowestParent(R);e!==null&&e.remove(R),X=!0}else X=!1}function mt(t){if(X){const e=new l(t.x-R.x,t.y-R.y);if(fe.clearRect(0,0,H.width,H.height),a(r.sheet,o),f instanceof h)Q(f,e)?K(f,M(),e):K(f,E(),e);else if(f instanceof c){const n=b(f,e);r.canInsert(n)?y(n,M(),!0):y(n,E(),!0)}}}function Et(t){if(X){const e=new l(t.x-R.x,t.y-R.y);if(f instanceof h)Q(f,e)?de(f,e):r.insert(f);else if(f instanceof c){const n=b(f,e);r.canInsert(n)?r.insert(n):r.insert(f)}}fe.clearRect(0,0,H.width,H.height),a(r.sheet,o),X=!1}function Mt(){X&&f!==null&&r.insert(f),X=!1,fe.clearRect(0,0,H.width,H.height),a(r.sheet,o)}const k=document.getElementById("canvas"),We=k.getContext("2d");if(We===null)throw Error("2d rendering context not supported");const te=We;let G,p=null,U;function Ct(t){G=new l(t.x-o.x,t.y-o.y);const e=r.getLowestNode(G);e!==r.sheet&&e!==null?(e instanceof h&&e.children.length!==0?(p=L(e,new l(0,0)),p.children=[]):e instanceof c&&(p=e),U=!0):U=!1}function bt(t){if(U){const e=new l(t.x-G.x,t.y-G.y);if(p instanceof h){const n=L(p,e);te.clearRect(0,0,k.width,k.height),a(r.sheet,o),r.canInsert(n)?A(n,M()):A(n,E())}else if(p instanceof c){const n=b(p,e);te.clearRect(0,0,k.width,k.height),a(r.sheet,o),r.canInsert(n)?y(n,M(),!0):y(n,E(),!0)}}}function vt(t){if(U){const e=new l(t.x-G.x,t.y-G.y);if(p instanceof h&&p.ellipse!==null){const n=L(p,e);r.canInsert(n)&&r.insert(n)}else if(p instanceof c){const n=b(p,e);r.canInsert(n)&&r.insert(n)}te.clearRect(0,0,k.width,k.height),a(r.sheet,o)}U=!1}function It(){U=!1,te.clearRect(0,0,k.width,k.height),a(r.sheet,o)}const F=document.getElementById("canvas"),je=F.getContext("2d");if(je===null)throw Error("2d rendering context not supported");const we=je;let z,g=null,J;function kt(t){z=new l(t.x-o.x,t.y-o.y),g=r.getLowestNode(z),g!==r.sheet&&g!==null?J=!0:J=!1}function Bt(t){if(J){const e=new l(t.x-z.x,t.y-z.y);if(we.clearRect(0,0,F.width,F.height),a(r.sheet,o),g instanceof h)Q(g,e)?K(g,M(),e):K(g,E(),e);else if(g instanceof c){const n=b(g,e);r.canInsert(n)?y(n,M(),!0):y(n,E(),!0)}}}function Rt(t){if(J){const e=new l(t.x-z.x,t.y-z.y);if(g instanceof h)Q(g,e)&&de(g,e);else if(g instanceof c){const n=b(g,e);r.canInsert(n)&&r.insert(n)}}we.clearRect(0,0,F.width,F.height),a(r.sheet,o),J=!1}function Pt(){J=!1,we.clearRect(0,0,F.width,F.height),a(r.sheet,o)}const m=document.getElementById("canvas");m.width=window.innerWidth;m.height=window.innerHeight;const Ge=m.getContext("2d");if(Ge===null)throw Error("2d rendering context not supported");const V=Ge;V.font="35pt arial";const Lt=document.getElementById("graphString"),Ee=document.getElementById("cutTools"),Me=document.getElementById("atomTools");window.addEventListener("keydown",Ot);m.addEventListener("mousedown",Dt);m.addEventListener("mousemove",Ht);m.addEventListener("mouseup",Xt);m.addEventListener("mouseout",Ft);m.addEventListener("mouseenter",Yt);let Y,ge=!1,ye=!0,r=new ae;window.atomMode=0;window.cutMode=1;window.dragMode=2;window.saveMode=Ue;window.loadMode=At;window.moveSingleMode=3;window.moveMultiMode=4;window.copySingleMode=5;window.copyMultiMode=6;window.deleteSingleMode=7;window.deleteMultiMode=8;window.setMode=$t;window.setHighlight=St;function St(t,e){const n=document.getElementById(e);switch(t){case"mousedown":n==null||n.classList.remove("no-highlight");break;case"mouseleave":n==null||n.classList.add("no-highlight");break}}const Ce=document.querySelectorAll(".modeButton");Ce.forEach(t=>{t.addEventListener("click",()=>{t.classList.toggle("modeButtonPressed"),Ce.forEach(e=>{e!==t&&e.classList.remove("modeButtonPressed")})})});function $t(t){switch(Y=t,Ee.style.display="none",Me.style.display="none",Y){case 0:Me.style.display="block";break;case 1:Ee.style.display="block";break}}async function Ue(){if("showSaveFilePicker"in window){const t=await window.showSaveFilePicker({excludeAcceptAllOption:!0,suggestedName:"AEG Tree",startIn:"downloads",types:[{description:"JSON Files",accept:{"text/json":[".json"]}}]});dt(t,r)}else{const t=document.createElement("a");t.href=JSON.stringify(r,null,"	"),t.download="AEGTree.json",t.click()}}async function At(){const[t]=await window.showOpenFilePicker({excludeAcceptAllOption:!0,multiple:!1,startIn:"downloads",types:[{description:"JSON Files",accept:{"text/json":[".json"]}}]}),e=await t.getFile(),n=new FileReader;n.addEventListener("load",()=>{const i=n.result,s=ft(i);s instanceof ae&&(r=s,V.clearRect(0,0,m.width,m.height),a(r.sheet,o))}),n.readAsText(e)}function Ot(t){if(t.ctrlKey&&t.key==="s")t.preventDefault(),Ue();else switch(Y){case 0:ot(t);break}}function Dt(t){switch(Y){case 1:tt(t);break;case 0:lt(t);break;case 2:qe(t);break;case 3:wt(t);break;case 4:xt(t);break;case 5:Ct(t);break;case 6:kt(t);break}ge=!0}function Ht(t){if(ge&&ye)switch(Y){case 1:nt(t);break;case 0:ct(t);break;case 2:Ke(t);break;case 3:gt(t);break;case 4:mt(t);break;case 5:bt(t);break;case 6:Bt(t);break}}function Xt(t){switch(Y){case 1:it(t);break;case 0:at(t);break;case 3:yt(t);break;case 4:Et(t);break;case 5:vt(t);break;case 6:Rt(t);break}ge=!1}function Ft(){switch(Y){case 1:rt();break;case 0:ht();break;case 2:Ze();break;case 3:pt();break;case 4:Mt();break;case 5:It();break;case 6:Pt()}ye=!1}function Yt(){ye=!0}function a(t,e){Lt.innerHTML=r.toString();for(let n=0;t.children.length>n;n++)t.children[n]instanceof c?Tt(t.children[n]):a(t.children[n],e);t.ellipse instanceof Z&&(V.strokeStyle=Se(),V.beginPath(),V.ellipse(t.ellipse.center.x+e.x,t.ellipse.center.y+e.y,t.ellipse.radiusX,t.ellipse.radiusY,0,0,2*Math.PI),V.stroke())}function Tt(t){y(t,Se(),!1)}function Vt(){m.width=window.innerWidth,m.height=window.innerHeight}window.onresize=Vt;
