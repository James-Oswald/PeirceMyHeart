(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const f of i)if(f.type==="childList")for(const g of f.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function n(i){const f={};return i.integrity&&(f.integrity=i.integrity),i.referrerPolicy&&(f.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?f.credentials="include":i.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function o(i){if(i.ep)return;i.ep=!0;const f=n(i);fetch(i.href,f)}})();class a{constructor(t,n){if(this.x=t,this.y=n,!Number.isFinite(this.x)||!Number.isFinite(this.y))throw new Error("NaN or Infinity value(s) were passed in constructing a Point.")}set(t,n){if(!Number.isFinite(t)||!Number.isFinite(n))throw new Error("NaN or Infinity value(s) were passed in setting "+this+"'s coords.");this.x=t,this.y=n}distance(t){const n=this.x-t.x,o=this.y-t.y;return Math.sqrt(n*n+o*o)}toString(){return"("+this.x+", "+this.y+")"}}function Ne(e,t){return yn(e,t)||He(t,e)}function yn(e,t){if(e instanceof Me)return t instanceof Me?tn(e,t):en(t,e);if(t instanceof Me)return en(e,t);if(tn(e.boundingBox,t.boundingBox)||He(t.boundingBox,e.boundingBox)){const n=mn(e);let o;for(let i=0;i<n.length;i++)if(o=pt(t,n[i]),o<=0)return!0;return!1}return!1}function en(e,t){const n=t.getCorners(),o=tt(e,n[0].x,1),i=tt(e,n[1].x,1),f=tt(e,n[0].x,-1),g=tt(e,n[1].x,-1);if(n[0].y<o&&o<n[2].y||n[0].y<f&&f<n[2].y||n[0].y<i&&i<n[2].y||n[0].y<g&&g<n[2].y)return!0;const u=-1/Math.pow(e.radiusX,2),m=2*e.center.x/Math.pow(e.radiusX,2),h=-Math.pow(e.center.x,2)/Math.pow(e.radiusX,2)+1-Math.pow((n[0].y-e.center.y)/e.radiusY,2),y=-Math.pow(e.center.x,2)/Math.pow(e.radiusX,2)+1-Math.pow((n[2].y-e.center.y)/e.radiusY,2),H=(-m+Math.sqrt(Math.pow(m,2)-4*u*h))/(2*u),S=(-m-Math.sqrt(Math.pow(m,2)-4*u*h))/(2*u),N=(-m+Math.sqrt(Math.pow(m,2)-4*u*y))/(2*u),Ke=(-m-Math.sqrt(Math.pow(m,2)-4*u*y))/(2*u);return!isNaN(H)&&n[0].x<H&&H<n[1].x||!isNaN(S)&&n[0].x<S&&S<n[1].x||!isNaN(N)&&n[0].x<N&&N<n[1].x||!isNaN(Ke)&&n[0].x<Ke&&Ke<n[1].x}function He(e,t){if(e instanceof Me)if(t instanceof Me){const n=t.getCorners();for(let o=0;o<4;o++)if(!Dt(e,n[o]))return!1;return!0}else{const n=Vn(t);for(let o=0;o<4;o++)if(!Dt(e,n[o]))return!1;return!0}else if(t instanceof Me){const n=t.getCorners();let o;for(let i=0;i<4;i++)if(o=pt(e,n[i]),!(o<0))return!1;return!0}else{const n=mn(t);let o;for(let i=0;i<n.length;i++)if(o=pt(e,n[i]),!(o<0))return!1;return!0}}function tn(e,t){const n=e.getCorners(),o=t.getCorners();return(n[0].y<=o[0].y&&n[2].y>=o[0].y||n[0].y<=o[2].y&&n[2].y>=o[2].y||o[0].y<=n[0].y&&o[2].y>=n[0].y||o[0].y<=n[2].y&&o[2].y>=n[2].y)&&(n[0].x<=o[0].x&&n[1].x>=o[0].x||n[0].x<=o[1].x&&n[1].x>=o[1].x||o[0].x<=n[0].x&&o[1].x>=n[0].x||o[0].x<=n[1].x&&o[1].x>=n[1].x)}function Dt(e,t){const n=e.getCorners();return n[0].x<t.x&&n[1].x>t.x&&n[0].y<t.y&&n[2].y>t.y}function pt(e,t){return Math.pow(t.x-e.center.x,2)/Math.pow(e.radiusX,2)+Math.pow(t.y-e.center.y,2)/Math.pow(e.radiusY,2)-1}function Vn(e){return[new a(e.center.x,e.center.y-e.radiusY),new a(e.center.x+e.radiusX,e.center.y),new a(e.center.x,e.center.y+e.radiusY),new a(e.center.x-e.radiusX,e.center.y)]}function mn(e){const t=[];let n,o,i=1;for(let f=0;f<360;f++)n=e.center.x+e.radiusX*Math.cos(f*(Math.PI/180)),f>180&&(i=-1),o=tt(e,n,i),t[f]=new a(n,o);return t}function tt(e,t,n){return e.radiusX===0||e.radiusY===0?e.center.y:n*e.radiusY*Math.sqrt(1-Math.pow((t-e.center.x)/e.radiusX,2))+e.center.y}class Me{constructor(t,n,o){if(!Number.isFinite(n)||!Number.isFinite(o))throw new Error("Infinity/NaN passed in for width/height while constructing a Rectangle.");if(n!==void 0&&n<0)throw new Error("Negative value passed for width while constructing a Rectangle.");if(o!==void 0&&o<0)throw new Error("Negative value passed for height while constructing a Rectangle.");this.startVertex=t,this.width=n,this.height=o}getCorners(){const t=[this.startVertex];return t.push(new a(this.startVertex.x+this.width,this.startVertex.y)),t.push(new a(this.startVertex.x+this.width,this.startVertex.y+this.height)),t.push(new a(this.startVertex.x,this.startVertex.y+this.height)),t}containsPoint(t){return Dt(this,t)}overlaps(t){return Ne(this,t)}contains(t){return He(this,t)}toString(){return"Rectangle with top left vertex at: "+this.startVertex.toString()+", w: "+this.width+", h: "+this.height}}class p{constructor(t,n,o,i){if(t.length!==1)throw new Error("String of length "+t.length+" passed in as identifier in AtomNode constructor, which is not of length 1.");if(!/^[A-Za-z]$/.test(t))throw new Error(t+" not contained in Latin alphabet passed in as identifier in AtomNode constructor.");this.internalIdentifier=t,this.internalOrigin=n,this.internalWidth=o,this.internalHeight=i}copy(){return new p(this.internalIdentifier,new a(this.internalOrigin.x,this.internalOrigin.y),this.internalWidth,this.internalHeight)}get width(){return this.internalWidth}set width(t){this.internalWidth=t}get height(){return this.internalHeight}set height(t){this.internalHeight=t}get identifier(){return this.internalIdentifier}set identifier(t){this.internalIdentifier=t}get origin(){return this.internalOrigin}set origin(t){this.internalOrigin=t}containsPoint(t){return this.calcRect().containsPoint(t)}calcRect(){return new Me(new a(this.internalOrigin.x,this.internalOrigin.y-this.internalHeight),this.internalWidth,this.internalHeight)}isEqualTo(t){return this.identifier===t.identifier}toString(){return"An atom representing the proposition: "+this.internalIdentifier+" and Boundary box of: "+this.calcRect().toString()}}class he{constructor(t,n,o){if(this.center=t,this.radiusX=n,this.radiusY=o,!Number.isFinite(this.radiusX)||!Number.isFinite(this.radiusY))throw new Error("A radius passed into an Ellipse construction was NaN or Infinity.");if(this.radiusX!==void 0&&this.radiusX<0)throw new Error("Horizontal radius in an Ellipse construction was negative.");if(this.radiusY!==void 0&&this.radiusY<0)throw new Error("Vertical radius in an Ellipse construction was negative.");const i=new a(this.center.x-this.radiusX,this.center.y-this.radiusY);this.boundingBox=new Me(i,this.radiusX*2,this.radiusY*2)}containsPoint(t){return pt(this,t)<0}overlaps(t){return Ne(this,t)}contains(t){return He(this,t)}toString(){return"An ellipse with Center at: "+this.center.toString()+", Horizontal radius: "+this.radiusX+", Vertical radius: "+this.radiusY+", Bounding box: "+this.boundingBox.toString()}}class c{constructor(t,n){this.internalEllipse=t,this.internalChildren=n??[]}copy(){let t;const n=[];if(this.ellipse!==null?t=new he(new a(this.ellipse.center.x,this.ellipse.center.y),this.ellipse.radiusX,this.ellipse.radiusY):t=null,this.children.length>0)for(let o=0;o<this.children.length;o++){const i=this.children[o];i instanceof p,n.push(i.copy())}return new c(t,n)}get ellipse(){return this.internalEllipse}set ellipse(t){this.internalEllipse=t}get children(){return this.internalChildren}set children(t){this.internalChildren=t}set child(t){this.internalChildren.push(t)}clear(){this.internalChildren=[]}isEmptySheet(){return this.internalEllipse===null&&this.internalChildren.length===0}getCurrentCut(t){for(let n=0;n<this.internalChildren.length;n++){const o=this.internalChildren[n];if(o instanceof c&&o.containsNode(t))return o.getCurrentCut(t)}return this}containsPoint(t){return this.internalEllipse===null?!0:this.internalEllipse.containsPoint(t)}containsNode(t){return this.internalEllipse===null?!0:t instanceof p?He(this.internalEllipse,t.calcRect()):He(this.internalEllipse,t.internalEllipse)}getLowestNode(t){if(!this.containsPoint(t))return null;for(let n=0;n<this.internalChildren.length;n++)if(this.internalChildren[n].containsPoint(t))return this.internalChildren[n]instanceof p||this.internalChildren[n]instanceof c&&this.internalChildren[n].children.length===0?this.internalChildren[n]:this.internalChildren[n].getLowestNode(t);return this}getLowestParent(t){if(!this.containsPoint(t))throw new Error("This parent "+this.toString+" does not contain the point.");for(let n=0;n<this.internalChildren.length;n++)if(this.internalChildren[n].containsPoint(t)){if(this.internalChildren[n]instanceof p||this.internalChildren[n]instanceof c&&this.internalChildren[n].children.length===0)return this;{const o=this.internalChildren[n];for(let i=0;i<o.children.length;i++)if(o.children[i].containsPoint(t))return o.getLowestParent(t);return this}}return null}getLevel(t,n){for(let o=0;o<this.internalChildren.length;o++){if(this.internalChildren[o]===t)return n;if(this.internalChildren[o]instanceof c&&this.internalChildren[o].containsNode(t))return this.internalChildren[o].getLevel(t,n+1)}return-1}remove(t){if(!this.containsPoint(t))return!1;for(let n=0;n<this.children.length;n++)if(this.children[n].containsPoint(t)){if(this.children[n]instanceof p||this.children[n]instanceof c&&this.children[n].children.length===0)return this.children.splice(n,1),!0;for(let o=0;o<this.children[n].children.length;o++)if(this.children[n].children[o].containsPoint(t))if(this.children[n].children[o]instanceof p)this.children[n].children.splice(o,1);else return this.children[n].children[o].remove(t);return this.children.splice(n,1),!0}return!1}isEqualTo(t){if(this.children.length===t.children.length){if(this.children.length===0)return!0;const n=this.copy().children,o=t.copy().children;for(let i=0;i<n.length;i++)for(let f=0;f<o.length;f++){if(n[i]instanceof p&&o[f]instanceof p&&n[i].isEqualTo(o[f])||n[i]instanceof c&&o[f]instanceof c&&n[i].isEqualTo(o[f])){n.splice(i,1),o.splice(f,1),i--;break}if(f===o.length-1)return!1}return n.length===0&&o.length===0}return!1}toFormulaString(){let t="";for(const n of this.internalChildren)n instanceof p?t+=n.identifier:n instanceof c&&(t+=n.toFormulaString()),t+=" ";return t=t.slice(0,-1),this.internalEllipse===null?t="["+t+"]":t="("+t+")",t}toString(){let t;return this.internalEllipse===null?t="Sheet of Assertion of the AEG Tree":t="A cut node with boundary box of "+this.internalEllipse.toString(),this.internalChildren.length>0&&(t+=", With nested nodes: "+this.internalChildren.toString()),t}}class I{constructor(t){t!==void 0?(this.internalSheet=t.copy(),this.internalSheet.ellipse=null):this.internalSheet=new c(null)}get sheet(){return this.internalSheet}set sheet(t){this.internalSheet=t}getLowestParent(t){return this.internalSheet.getLowestParent(t)}getLowestNode(t){return this.internalSheet.getLowestNode(t)}getLevel(t){return this.internalSheet.getLevel(t,0)}verify(){return this.verifyAEG(this.internalSheet)}verifyAEG(t){for(let n=0;n<t.children.length;n++){if(!t.containsNode(t.children[n]))return!1;for(let o=n+1;o<t.children.length;o++)if(this.overlaps(t.children[n],t.children[o]))return!1}for(let n=0;n<t.children.length;n++)if(t.children[n]instanceof c&&!this.verifyAEG(t.children[n]))return!1;return!0}canInsert(t){const n=this.internalSheet.getCurrentCut(t);for(let o=0;o<n.children.length;o++)if(this.intersects(t,n.children[o]))return!1;return!0}insert(t){if(!this.canInsert(t))throw new Error("Insertion failed. "+t+" had a collision.");const n=this.internalSheet.getCurrentCut(t),o=[...n.children];if(n.child=t,t instanceof c)for(let i=o.length-1;i>=0;i--)t.containsNode(o[i])&&(t.child=o[i],n.children.splice(i,1));return!0}remove(t){return this.internalSheet.remove(t)}clear(){this.internalSheet.clear()}intersects(t,n){const o=t instanceof p?t.calcRect():t.ellipse,i=n instanceof p?n.calcRect():n.ellipse;return yn(o,i)}overlaps(t,n){let o,i;return t instanceof p?n instanceof p?Ne(t.calcRect(),n.calcRect()):(o=n.ellipse,Ne(t.calcRect(),o)):n instanceof p?(o=t.ellipse,Ne(o,n.calcRect())):(o=t.ellipse,i=n.ellipse,Ne(o,i))}isEqualTo(t){return this.sheet.isEqualTo(t.sheet)}toString(){return this.internalSheet.toFormulaString()}}var k=(e=>(e[e.CLEAR=0]="CLEAR",e[e.DC_INSERT=1]="DC_INSERT",e[e.DC_DELETE=2]="DC_DELETE",e[e.MOVE_SINGLE=3]="MOVE_SINGLE",e[e.MOVE_MULTI=4]="MOVE_MULTI",e[e.ITERATION=5]="ITERATION",e[e.DEITERATION=6]="DEITERATION",e[e.INSERTION=7]="INSERTION",e[e.ERASURE=8]="ERASURE",e[e.RESIZE=9]="RESIZE",e[e.PASTE_GRAPH=10]="PASTE_GRAPH",e))(k||{});class W{constructor(t,n){this.appliedRule=n??0,this.tree=new I(t==null?void 0:t.sheet),this.index=r.proof.length}}let Ot,l=new a(0,0),Bt;function jn(){w("cursor: grab")}function Wn(e){w("cursor: grabbing"),Ot=new a(e.x-l.x,e.y-l.y),Bt=!1}function Zn(e){Bt||(w("cursor: grabbing"),l=new a(e.x-Ot.x,e.y-Ot.y),Tn())}function Jn(){w("cursor: grab")}function Kn(){w("cursor: default"),Bt=!0,Tn()}function Tn(){r.modeState==="Proof"?E():d(r.tree)}var et=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var En={exports:{}};(function(e,t){function n(){var g=document.querySelector("[data-toggle-theme]"),u=g?g.getAttribute("data-key"):null;(function(m=localStorage.getItem(u||"theme")){localStorage.getItem(u||"theme")&&(document.documentElement.setAttribute("data-theme",m),g&&[...document.querySelectorAll("[data-toggle-theme]")].forEach(h=>{h.classList.add(g.getAttribute("data-act-class"))}))})(),g&&[...document.querySelectorAll("[data-toggle-theme]")].forEach(m=>{m.addEventListener("click",function(){var h=m.getAttribute("data-toggle-theme");if(h){var y=h.split(",");document.documentElement.getAttribute("data-theme")==y[0]?y.length==1?(document.documentElement.removeAttribute("data-theme"),localStorage.removeItem(u||"theme")):(document.documentElement.setAttribute("data-theme",y[1]),localStorage.setItem(u||"theme",y[1])):(document.documentElement.setAttribute("data-theme",y[0]),localStorage.setItem(u||"theme",y[0]))}[...document.querySelectorAll("[data-toggle-theme]")].forEach(H=>{H.classList.toggle(this.getAttribute("data-act-class"))})})})}function o(){var g=document.querySelector("[data-set-theme='']"),u=g?g.getAttribute("data-key"):null;(function(m=localStorage.getItem(u||"theme")){if(m!=null&&m!="")if(localStorage.getItem(u||"theme")&&localStorage.getItem(u||"theme")!=""){document.documentElement.setAttribute("data-theme",m);var h=document.querySelector("[data-set-theme='"+m.toString()+"']");h&&([...document.querySelectorAll("[data-set-theme]")].forEach(y=>{y.classList.remove(y.getAttribute("data-act-class"))}),h.getAttribute("data-act-class")&&h.classList.add(h.getAttribute("data-act-class")))}else{var h=document.querySelector("[data-set-theme='']");h.getAttribute("data-act-class")&&h.classList.add(h.getAttribute("data-act-class"))}})(),[...document.querySelectorAll("[data-set-theme]")].forEach(m=>{m.addEventListener("click",function(){document.documentElement.setAttribute("data-theme",this.getAttribute("data-set-theme")),localStorage.setItem(u||"theme",document.documentElement.getAttribute("data-theme")),[...document.querySelectorAll("[data-set-theme]")].forEach(h=>{h.classList.remove(h.getAttribute("data-act-class"))}),m.getAttribute("data-act-class")&&m.classList.add(m.getAttribute("data-act-class"))})})}function i(){var g=document.querySelector("select[data-choose-theme]"),u=g?g.getAttribute("data-key"):null;(function(m=localStorage.getItem(u||"theme")){if(localStorage.getItem(u||"theme")){document.documentElement.setAttribute("data-theme",m);var h=document.querySelector("select[data-choose-theme] [value='"+m.toString()+"']");h&&[...document.querySelectorAll("select[data-choose-theme] [value='"+m.toString()+"']")].forEach(y=>{y.selected=!0})}})(),g&&[...document.querySelectorAll("select[data-choose-theme]")].forEach(m=>{m.addEventListener("change",function(){document.documentElement.setAttribute("data-theme",this.value),localStorage.setItem(u||"theme",document.documentElement.getAttribute("data-theme")),[...document.querySelectorAll("select[data-choose-theme] [value='"+localStorage.getItem(u||"theme")+"']")].forEach(h=>{h.selected=!0})})})}function f(g=!0){g===!0?document.addEventListener("DOMContentLoaded",function(u){n(),i(),o()}):(n(),i(),o())}e.exports={themeChange:f}})(En);var eo=En.exports;const to=document.getElementById("theme-select");eo.themeChange();let xn=$e("--good-placement"),Sn=$e("--bad-placement"),bn=$e("--canvas-items");function $e(e){return getComputedStyle(document.body).getPropertyValue(e)}function Mn(){setTimeout(()=>{xn=$e("--good-placement"),Sn=$e("--bad-placement"),bn=$e("--canvas-items"),r.modeState==="Draw"?d(r.tree):E()})}to.addEventListener("input",()=>{Mn()});window.addEventListener("DOMContentLoaded",()=>{Mn()});function T(){return Sn}function x(){return xn}function In(){return bn}const wt=document.getElementById("canvas"),kn=wt.getContext("2d");if(kn===null)throw Error("2d rendering context not supported.");const C=kn;C.font="35pt arial";const no=document.getElementById("graphString"),oo=document.getElementById("proofString"),ro=document.getElementById("atomBox"),Pn=document.getElementById("atomBoxes");Pn.addEventListener("input",so);function Y(e,t){const n=e.ellipse;if(n!==null){C.strokeStyle=t;const o=n.center;C.beginPath(),C.ellipse(o.x+l.x,o.y+l.y,n.radiusX,n.radiusY,0,0,2*Math.PI),C.stroke()}}function q(e,t,n){C.textBaseline="bottom";const o=C.measureText(e.identifier);C.fillStyle=t,C.strokeStyle=t,C.beginPath(),C.fillText(e.identifier,e.origin.x+l.x,e.origin.y+l.y),(Pn.checked||ro.checked&&n)&&C.rect(e.origin.x+l.x,e.origin.y+l.y-o.actualBoundingBoxAscent,e.width,e.height),C.stroke()}function Cn(e,t,n){C.beginPath(),C.strokeStyle=n;const o=e.x-t.x+l.x,i=e.y-t.y+l.y;C.rect(e.x,e.y,-o,-i),C.stroke()}function w(e){wt.style.cssText=e}function io(e,t,n){return e===x()?t:n}function D(e,t,n){w(io(e,t,n))}function so(){d(r.tree)}function at(){C.clearRect(0,0,wt.width,wt.height)}function d(e,t){no.innerHTML=e.toString(),at(),Ft(e.sheet,t),window.treeString=Tt(e)}function Ft(e,t){for(let n=0;e.children.length>n;n++)e.children[n]instanceof p?lo(e.children[n]):Ft(e.children[n]);e.ellipse instanceof he&&(C.strokeStyle=t||In(),C.beginPath(),C.ellipse(e.ellipse.center.x+l.x,e.ellipse.center.y+l.y,e.ellipse.radiusX,e.ellipse.radiusY,0,0,2*Math.PI),C.stroke())}function lo(e){q(e,In(),!1)}function E(){let e;r.proof.length===0||r.currentProofStep===void 0?e=new I:e=r.currentProofStep.tree,at(),oo.innerHTML=e.toString(),Ft(e.sheet)}function ae(e,t){if(e instanceof p)q(e,t,!1);else if(e instanceof c){Y(e,t);for(let n=0;n<e.children.length;n++)ae(e.children[n],t)}}function Ln(e,t){const n=new a(1,1);if(e instanceof c&&e.ellipse!==null){const o=e.ellipse,i=[new a(o.center.x-o.radiusX,o.center.y),new a(o.center.x,o.center.y-o.radiusY),new a(o.center.x+o.radiusX,o.center.y),new a(o.center.x,o.center.y+o.radiusY)];i[0].distance(t)>=i[2].distance(t)?n.x=1:n.x=-1,i[1].distance(t)>=i[3].distance(t)?n.y=1:n.y=-1}return n}const ao={[k.CLEAR]:"",[k.DC_INSERT]:"dot-circle-o",[k.DC_DELETE]:"times-circle",[k.MOVE_SINGLE]:"mouse-pointer",[k.MOVE_MULTI]:"arrows",[k.ITERATION]:"expand",[k.DEITERATION]:"compress",[k.INSERTION]:"plus",[k.ERASURE]:"trash",[k.RESIZE]:"arrows-alt",[k.PASTE_GRAPH]:"files-o"};function Rn(e,t){var u;const n=document.createElement("div");n.className="row";const o=t||r.proof.length;n.id="Row: "+o;const i=document.createElement("button");i.type="button",i.id="Step: "+r.proof.length,i.className="proofNodeButton",i.title=e.tree.toString(),i.onclick=function(){vt(e)};const f=document.createElement("Text"),g=ao[e.appliedRule];f.className="fa fa-"+g,i.appendChild(f),n.appendChild(i),(u=document.getElementById("proofHistoryBar"))==null||u.appendChild(n)}function vt(e){r.currentProofStep=e,E()}function Nt(e){var t;for(let n=r.proof.length;n>e+1;n--)(t=document.getElementById("Row: "+n))==null||t.remove()}function nn(){var e;(e=document.getElementById("Row: "+(r.proof.length+1)))==null||e.remove()}var ne=(e=>(e[e.CLEAR=0]="CLEAR",e[e.DRAW_ATOM=1]="DRAW_ATOM",e[e.DRAW_CUT=2]="DRAW_CUT",e[e.MOVE_SINGLE=3]="MOVE_SINGLE",e[e.MOVE_MULTI=4]="MOVE_MULTI",e[e.COPY_SINGLE=5]="COPY_SINGLE",e[e.COPY_MULTI=6]="COPY_MULTI",e[e.DELETE_SINGLE=7]="DELETE_SINGLE",e[e.DELETE_MULTI=8]="DELETE_MULTI",e[e.RESIZE=9]="RESIZE",e[e.COPY_GRAPH=10]="COPY_GRAPH",e))(ne||{});class co{constructor(t,n){this.tree=new I(t==null?void 0:t.sheet)??new I,this.appliedMove=n??0}}var s=(e=>(e[e.none=0]="none",e[e.atomTool=1]="atomTool",e[e.cutTool=2]="cutTool",e[e.dragTool=3]="dragTool",e[e.drawMoveSingleTool=4]="drawMoveSingleTool",e[e.drawMoveMultiTool=5]="drawMoveMultiTool",e[e.copySingleTool=6]="copySingleTool",e[e.copyMultiTool=7]="copyMultiTool",e[e.deleteSingleTool=8]="deleteSingleTool",e[e.deleteMultiTool=9]="deleteMultiTool",e[e.resizeTool=10]="resizeTool",e[e.copyFromDrawTool=11]="copyFromDrawTool",e[e.pasteInProofTool=12]="pasteInProofTool",e[e.doubleCutInsertionTool=13]="doubleCutInsertionTool",e[e.doubleCutDeletionTool=14]="doubleCutDeletionTool",e[e.insertionTool=15]="insertionTool",e[e.erasureTool=16]="erasureTool",e[e.proofMoveSingleTool=17]="proofMoveSingleTool",e[e.proofMoveMultiTool=18]="proofMoveMultiTool",e[e.proofResizeTool=19]="proofResizeTool",e[e.iterationTool=20]="iterationTool",e[e.deiterationTool=21]="deiterationTool",e[e.proofClearTool=22]="proofClearTool",e[e.drawClearTool=23]="drawClearTool",e))(s||{});const G=class G{static pushToDrawStack(t){this.recentlyUndoneOrRedoneDrawMove&&(this.drawHistoryRedoStack=[],this.recentlyUndoneOrRedoneDrawMove=!1),this.drawHistoryUndoStack.push(new co(this.tree,t))}static undoDrawStep(){const t=this.drawHistoryUndoStack.pop();if(t!==void 0){if(this.drawHistoryUndoStack[this.drawHistoryUndoStack.length-1]===void 0){this.tree=new I,d(this.tree),this.drawHistoryRedoStack.push(t);return}this.drawHistoryRedoStack.push(t),this.tree=new I(this.drawHistoryUndoStack[this.drawHistoryUndoStack.length-1].tree.sheet),d(this.tree),this.recentlyUndoneOrRedoneDrawMove=!0}}static redoDrawStep(){const t=this.drawHistoryRedoStack.pop();if(t!==void 0){if(this.drawHistoryRedoStack[this.drawHistoryRedoStack.length-1]===void 0){this.tree=new I(t.tree.sheet),d(this.tree),this.drawHistoryUndoStack.push(t);return}this.drawHistoryUndoStack.push(t),this.tree=new I(t.tree.sheet),d(this.tree),this.recentlyUndoneOrRedoneDrawMove=!0}}static undoProofStep(){if(this.proof.length<=1)return;const t=this.proof.pop();if(t!==void 0){if(this.proof.length===0){nn();return}nn(),this.proofHistoryRedoStack.push(t),vt(this.proof[this.proof.length-1]),E(),this.recentlyUndoneOrRedoneProofMove=!0}}static redoProofStep(){if(this.proofHistoryRedoStack.length===0)return;const t=this.proofHistoryRedoStack.pop();if(t!==void 0){if(this.proofHistoryRedoStack[this.proofHistoryRedoStack.length-1]===void 0){this.pushToProof(t),E();return}this.recentlyUndoneOrRedoneProofMove=!1,this.pushToProof(t),vt(t),E()}}static getLastProofStep(){return G.proof.length===0?new W(new I):G.proof[G.proof.length-1]}static pushToProof(t){var n;if(this.recentlyUndoneOrRedoneProofMove&&(this.proofHistoryRedoStack=[],this.recentlyUndoneOrRedoneProofMove=!1),t.appliedRule===k.PASTE_GRAPH)this.proof.pop(),(n=document.getElementById("Row: 1"))==null||n.remove(),t.index=0;else if(this.currentProofStep&&this.proof.length>0&&(!this.currentProofStep.tree.isEqualTo(this.proof[this.proof.length-1].tree)||this.currentProofStep.appliedRule!==this.proof[this.proof.length-1].appliedRule)){const o=this.currentProofStep.index;Nt(o),this.proof=this.proof.splice(0,o+1),t.index=this.proof.length}this.currentProofStep=t,this.proof.push(t),Rn(t)}static clearProof(){Nt(-1),this.proof=[],this.pushToProof(new W),this.currentProofStep=this.proof[0]}};G.tree=new I,G.drawHistoryUndoStack=[],G.drawHistoryRedoStack=[],G.recentlyUndoneOrRedoneDrawMove=!1,G.proof=[],G.proofHistoryRedoStack=[],G.recentlyUndoneOrRedoneProofMove=!1,G.selectForProof=new I,G.toolState=0,G.modeState="Draw";let r=G;var An={exports:{}};(function(e,t){(function(n,o){o()})(et,function(){function n(h,y){return typeof y>"u"?y={autoBom:!1}:typeof y!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),y={autoBom:!y}),y.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function o(h,y,H){var S=new XMLHttpRequest;S.open("GET",h),S.responseType="blob",S.onload=function(){m(S.response,y,H)},S.onerror=function(){console.error("could not download file")},S.send()}function i(h){var y=new XMLHttpRequest;y.open("HEAD",h,!1);try{y.send()}catch{}return 200<=y.status&&299>=y.status}function f(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var y=document.createEvent("MouseEvents");y.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(y)}}var g=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof et=="object"&&et.global===et?et:void 0,u=g.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),m=g.saveAs||(typeof window!="object"||window!==g?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(h,y,H){var S=g.URL||g.webkitURL,N=document.createElement("a");y=y||h.name||"download",N.download=y,N.rel="noopener",typeof h=="string"?(N.href=h,N.origin===location.origin?f(N):i(N.href)?o(h,y,H):f(N,N.target="_blank")):(N.href=S.createObjectURL(h),setTimeout(function(){S.revokeObjectURL(N.href)},4e4),setTimeout(function(){f(N)},0))}:"msSaveOrOpenBlob"in navigator?function(h,y,H){if(y=y||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(n(h,H),y);else if(i(h))o(h,y,H);else{var S=document.createElement("a");S.href=h,S.target="_blank",setTimeout(function(){f(S)})}}:function(h,y,H,S){if(S=S||open("","_blank"),S&&(S.document.title=S.document.body.innerText="downloading..."),typeof h=="string")return o(h,y,H);var N=h.type==="application/octet-stream",Ke=/constructor/i.test(g.HTMLElement)||g.safari,Kt=/CriOS\/[\d]+/.test(navigator.userAgent);if((Kt||N&&Ke||u)&&typeof FileReader<"u"){var It=new FileReader;It.onloadend=function(){var Qe=It.result;Qe=Kt?Qe:Qe.replace(/^data:[^;]*;/,"data:attachment/file;"),S?S.location.href=Qe:location=Qe,S=null},It.readAsDataURL(h)}else{var Qt=g.URL||g.webkitURL,kt=Qt.createObjectURL(h);S?S.location=kt:location.href=kt,S=null,setTimeout(function(){Qt.revokeObjectURL(kt)},4e4)}});g.saveAs=m.saveAs=m,e.exports=m})})(An);var uo=An.exports;const fo=Qn(uo);async function ho(e,t){const n=JSON.stringify(t,null,"	"),o=await e.createWritable();await o.write(n),await o.close()}function $t(e,t){const n=JSON.parse(t);if(e==="Draw"){const o=n.internalSheet.internalChildren;return on(o)}else{const o=[];let i;for(i of n){const f=i.tree.internalSheet.internalChildren;o.push(new W(on(f),i.appliedRule))}return o}}function on(e){const t=new I,n=[];for(const o of e)Object.prototype.hasOwnProperty.call(o,"internalEllipse")?n.push(Dn(o)):n.push(On(o));return t.sheet.children=n,t}function Dn(e){const t=new he(new a(e.internalEllipse.center.x,e.internalEllipse.center.y),e.internalEllipse.radiusX,e.internalEllipse.radiusY),n=[];for(const o of e.internalChildren)"internalEllipse"in o?n.push(Dn(o)):n.push(On(o));return new c(t,n)}function On(e){const t=e.internalIdentifier,n=new a(e.internalOrigin.x,e.internalOrigin.y);return new p(t,n,e.internalWidth,e.internalHeight)}function Tt(e){return JSON.stringify(e,null,"	")}async function vn(){let e,t;r.modeState==="Draw"?(e=r.tree.toString(),t=r.tree):(r.proof.length===1?e="One-Step Proof":e=r.proof[0].tree.toString()+" PROVES "+r.getLastProofStep().tree.toString(),t=r.proof);try{if("showSaveFilePicker"in window){const n=await window.showSaveFilePicker({excludeAcceptAllOption:!0,suggestedName:e,startIn:"downloads",types:[{accept:{"text/json":[".json"]}}]});ho(n,t)}else{const n=new Blob([Tt(t)],{type:"text/json"});fo(n,e+".json")}}catch{}}function rn(e){const t=new FileReader;t.addEventListener("load",()=>{var o;const n=t.result;if(typeof n=="string"){const i=$t(r.modeState,n);if(r.modeState==="Draw")r.tree=i,d(r.tree);else if(r.modeState==="Proof"){r.clearProof(),r.proof=i,(o=document.getElementById("Row: 1"))==null||o.remove();for(let f=0;f<r.proof.length;f++)Rn(r.proof[f],f+1);r.currentProofStep=r.proof[r.proof.length-1],E()}}else console.log("Loading failed because reading the file was unsuccessful.")}),t.readAsText(e)}async function po(){try{if("showOpenFilePicker"in window){const[e]=await window.showOpenFilePicker({excludeAcceptAllOption:!0,multiple:!1,startIn:"downloads",types:[{accept:{"text/json":[".json"]}}]}),t=await e.getFile();rn(t)}else{const e=document.createElement("input");e.type="file",e.accept=".json",e.addEventListener("change",()=>{var n;const t=(n=e.files)==null?void 0:n.item(0);rn(t)}),e.click()}}catch{}}let Pt=!0,Ct=null,Lt=null,sn=s.none,ln=s.none;const an=document.getElementById("DrawButtons"),cn=document.getElementById("ProofButtons"),un=document.getElementById("proofHistoryBar");function wo(){if(Pt=!Pt,Pt){an.style.display="block",hn.style.display="block",cn.style.display="none",pn.style.display="none",un.style.display="none",r.modeState="Draw",Lt=JSON.stringify(r.proof),ln=r.toolState;let e=null;if(Ct!==null&&(e=$t(r.modeState,Ct)),e!==null)r.tree.sheet=e.sheet;else throw Error("Invalidly cached AEG.");r.toolState=sn,d(r.tree)}else{an.style.display="none",hn.style.display="none",cn.style.display="block",pn.style.display="block",un.style.display="block",r.modeState="Proof",Ct=JSON.stringify(r.tree),sn=r.toolState,r.proof.length===0&&r.pushToProof(new W);let e=null;Lt!==null&&(e=$t(r.modeState,Lt)),e!==null&&(r.proof=e),r.toolState=ln,E()}}let Xt;function go(){Xt=!0,at(),ae(r.tree.sheet,T())}function yo(){Xt&&(r.tree=new I,d(r.tree),r.pushToDrawStack(ne.CLEAR))}function mo(){Xt=!1,d(r.tree)}const To=document.getElementById("canvas"),Nn=To.getContext("2d");if(Nn===null)throw Error("2d rendering context not supported.");const Eo=Nn,xo=document.getElementById("atomDisplay");let Et,Yt,F=ct("A",new a(0,0));function So(e){new RegExp(/^[A-Za-z]$/).test(e.key)&&(F=ct(e.key,new a(F.origin.x,F.origin.y)),F.origin.x!==0&&F.origin.y!==0&&Yt&&qt())}function bo(e){Et=!1,Yt=!0,F=ct(F.identifier,new a(e.clientX-l.x,e.clientY-l.y)),qt()}function Mo(e){F=ct(F.identifier,new a(e.clientX-l.x,e.clientY-l.y)),qt()}function Io(e){w("cursor: default"),F=ct(F.identifier,new a(e.clientX-l.x,e.clientY-l.y)),r.tree.canInsert(F)&&!Et&&(r.tree.insert(F),r.pushToDrawStack(ne.DRAW_ATOM)),d(r.tree),Yt=!1}function ko(){w("cursor: default"),Et=!0,d(r.tree)}function ct(e,t){xo.innerHTML=e;const n=Eo.measureText(e);return new p(e,new a(t.x,t.y),n.width,n.fontBoundingBoxDescent+n.actualBoundingBoxAscent)}function qt(){d(r.tree),Et||(r.tree.canInsert(F)?(w("cursor: default"),q(F,x(),!0)):(w("cursor: no-drop"),q(F,T(),!0)))}const Po=document.getElementById("mode");function Ie(e,t,n){if(t.ellipse!==null){const o=oe(t,n);if(!e.canInsert(o))return!1}for(let o=0;o<t.children.length;o++){if(t.children[o]instanceof c&&t.children[o].ellipse!==null&&!Ie(e,t.children[o],n))return!1;if(t.children[o]instanceof p){let i=t.children[o];if(i=A(i,n),!e.canInsert(i))return!1}}return!0}function j(e,t,n){if(e instanceof c&&e.ellipse!==null){const o=oe(e,n);if(Y(o,t),e.children.length!==0)for(let i=0;i<e.children.length;i++)j(e.children[i],t,n)}else if(e instanceof p){const o=A(e,n);q(o,t,!0)}}function ut(e,t,n){const o=n||r.tree;if(e instanceof c&&e.ellipse!==null){const i=oe(e,t);if(o.insert(i),e.children.length!==0)for(let f=0;f<e.children.length;f++)ut(e.children[f],t,n)}else if(e instanceof p){const i=A(e,t);o.insert(i)}}function it(e,t){return e instanceof p?A(e,t):oe(e,t)}function oe(e,t){if(e.ellipse!==null)return new c(new he(new a(e.ellipse.center.x+t.x-l.x,e.ellipse.center.y+t.y-l.y),e.ellipse.radiusX,e.ellipse.radiusY));throw new Error("Cannot alter the position of a CutNode without no Ellipse.")}function Gt(e,t){if(e.ellipse!==null){const n=[];for(let o=0;o<e.children.length;o++)e.children[o]instanceof c?n.push(Gt(e.children[o],t)):e.children[o]instanceof p&&n.push(A(e.children[o],t));return new c(new he(new a(e.ellipse.center.x+t.x-l.x,e.ellipse.center.y+t.y-l.y),e.ellipse.radiusX,e.ellipse.radiusY),n)}else throw new Error("Cannot alter the position of a CutNode without an Ellipse.")}function A(e,t){return new p(e.identifier,new a(e.origin.x+t.x-l.x,e.origin.y+t.y-l.y),e.width,e.height)}function xt(e,t,n){if(e.ellipse!==null)return new c(new he(new a(e.ellipse.center.x+t.x,e.ellipse.center.y+t.y),Math.abs(e.ellipse.radiusX+t.x*n.x),Math.abs(e.ellipse.radiusY+t.y*n.y)));throw new Error("Cannot alter the position of a CutNode without an Ellipse.")}function ft(e,t){for(let n=0;n<t.children.length;n++)e.canInsert(t.children[n])&&e.insert(t.children[n])}function ve(e,t){t instanceof c&&t.ellipse===null?e.sheet=t:e.canInsert(t)&&(e.insert(t),t instanceof c&&t.children.length!==0&&ft(e,t),d(e))}function St(e,t){const n=new a((t.x-e.x)/2+e.x,(t.y-e.y)/2+e.y),o=e.x-t.x,i=e.y-t.y,f=Math.abs(o),g=Math.abs(i);let u,m;if(Po.value==="circumscribed"){const h=Math.floor(n.distance(t));m=Math.floor(h*(g/f)),u=Math.floor(h*(f/g))}else u=f/2,m=g/2;return new he(n,u,m)}function Le(e){return e.radiusX>15&&e.radiusY>15}const Co=document.getElementById("showRect");let gt,bt;function Lo(){w("cursor: crosshair")}function Ro(e){gt=new a(e.clientX-l.x,e.clientY-l.y),bt=!1}function Ao(e){const t=new c(new he(new a(0,0),0,0)),n=new a(e.clientX-l.x,e.clientY-l.y);if(d(r.tree),t.ellipse=St(gt,n),!bt){const i=r.tree.canInsert(t)&&Le(t.ellipse)?x():T();D(i,"cursor: crosshair","cursor: no-drop"),Y(t,i),Co.checked&&Cn(gt,n,i)}}function Do(e){w("cursor: crosshair");const t=new a(e.clientX-l.x,e.clientY-l.y),n=new c(St(gt,t));r.tree.canInsert(n)&&!bt&&Le(n.ellipse)&&(r.tree.insert(n),r.pushToDrawStack(ne.DRAW_CUT)),d(r.tree)}function Oo(){w("cursor: default"),bt=!0,d(r.tree)}let Te,P=null,Re;function vo(e){if(Te=new a(e.x-l.x,e.y-l.y),P=r.tree.getLowestNode(Te),P!==r.tree.sheet&&P!==null){w("cursor: grabbing");const t=r.tree.getLowestParent(Te);if(t!==null&&t.remove(Te),P instanceof c&&P.children.length!==0){for(let n=0;n<P.children.length;n++)r.tree.insert(P.children[n]);P.children=[]}Re=!0,d(r.tree),P instanceof p?q(P,x(),!0):Y(P,x())}else Re=!1}function No(e){if(Re){const t=new a(e.x-Te.x,e.y-Te.y);if(P instanceof c){const n=oe(P,t);d(r.tree);const o=r.tree.canInsert(n)?x():T();Y(n,o),D(o,"cursor: grabbing","cursor: no-drop")}else if(P instanceof p){const n=A(P,t);d(r.tree);const o=r.tree.canInsert(n)?x():T();q(n,o,!0),D(o,"cursor: grabbing","cursor: no-drop")}}}function $o(e){if(w("cursor: default"),Re){const t=new a(e.x-Te.x,e.y-Te.y);if(P instanceof c){const n=oe(P,t);r.tree.canInsert(n)?r.tree.insert(n):r.tree.insert(P)}else if(P instanceof p){const n=A(P,t);r.tree.canInsert(n)?r.tree.insert(n):r.tree.insert(P)}d(r.tree),r.pushToDrawStack(ne.MOVE_SINGLE)}Re=!1}function Uo(){w("cursor: default"),Re&&P!==null&&r.tree.insert(P),Re=!1,d(r.tree)}let Ee,v=null,Ae;function Ho(e){if(Ee=new a(e.x-l.x,e.y-l.y),v=r.tree.getLowestNode(Ee),v!==r.tree.sheet&&v!==null){w("cursor: grabbing");const t=r.tree.getLowestParent(Ee);t!==null&&t.remove(Ee),Ae=!0,d(r.tree),ae(v,x())}else Ae=!1}function Bo(e){if(Ae){const t=new a(e.x-Ee.x,e.y-Ee.y);if(d(r.tree),v instanceof c){const n=Ie(r.tree,v,t)?x():T();j(v,n,t),D(n,"cursor: grabbing","cursor: no-drop")}else if(v instanceof p){const n=A(v,t),o=r.tree.canInsert(n)?x():T();q(n,o,!0),D(o,"cursor: grabbing","cursor: no-drop")}}}function Fo(e){if(w("cursor: default"),Ae){const t=new a(e.x-Ee.x,e.y-Ee.y);if(v instanceof c)Ie(r.tree,v,t)?ut(v,t):r.tree.insert(v);else if(v instanceof p){const n=A(v,t);r.tree.canInsert(n)?r.tree.insert(n):r.tree.insert(v)}r.pushToDrawStack(ne.MOVE_MULTI)}d(r.tree),Ae=!1}function Xo(){w("cursor: default"),Ae&&v!==null&&r.tree.insert(v),Ae=!1,d(r.tree)}let xe,ee=null,Be;function Yo(e){xe=new a(e.x-l.x,e.y-l.y);const t=r.tree.getLowestNode(xe),n=new a(e.x-xe.x,e.y-xe.y);t!==r.tree.sheet&&t!==null?(w("cursor: copy"),t instanceof c?(ee=oe(t,n),ee.children=[]):t instanceof p&&(ee=t),Be=!0):Be=!1}function qo(e){if(Be){const t=new a(e.x-xe.x,e.y-xe.y);if(ee instanceof c){const n=oe(ee,t);d(r.tree);const o=r.tree.canInsert(n)?x():T();Y(n,o),D(o,"cursor: grabbing","cursor: no-drop")}else if(ee instanceof p){const n=A(ee,t);d(r.tree);const o=r.tree.canInsert(n)?x():T();q(n,o,!0),D(o,"cursor: grabbing","cursor: no-drop")}}}function Go(e){if(w("cursor: default"),Be){const t=new a(e.x-xe.x,e.y-xe.y);if(ee instanceof c&&ee.ellipse!==null){const n=oe(ee,t);r.tree.canInsert(n)&&r.tree.insert(n)}else if(ee instanceof p){const n=A(ee,t);r.tree.canInsert(n)&&r.tree.insert(n)}d(r.tree),r.pushToDrawStack(ne.COPY_SINGLE)}Be=!1}function zo(){w("cursor: default"),Be=!1,d(r.tree)}let Fe,J=null,Xe;function _o(e){Fe=new a(e.x-l.x,e.y-l.y),J=r.tree.getLowestNode(Fe),J!==r.tree.sheet&&J!==null?(w("cursor: copy"),Xe=!0):Xe=!1}function Vo(e){if(Xe){const t=new a(e.x-Fe.x,e.y-Fe.y);if(d(r.tree),J instanceof c){const n=Ie(r.tree,J,t)?x():T();j(J,n,t),D(n,"cursor: grabbing","cursor: no-drop")}else if(J instanceof p){const n=A(J,t),o=r.tree.canInsert(n)?x():T();q(n,o,!0),D(o,"cursor: grabbing","cursor: no-drop")}}}function jo(e){if(w("cursor: default"),Xe){const t=new a(e.x-Fe.x,e.y-Fe.y);if(J instanceof c)Ie(r.tree,J,t)&&ut(J,t);else if(J instanceof p){const n=A(J,t);r.tree.canInsert(n)&&r.tree.insert(n)}r.pushToDrawStack(ne.COPY_MULTI)}d(r.tree),Xe=!1}function Wo(){w("cursor: default"),Xe=!1,d(r.tree)}let dt,M=null,ce;function Zo(e){if(dt=new a(e.x-l.x,e.y-l.y),M=r.tree.getLowestNode(dt),M!==null){const t=r.tree.getLowestParent(dt);t!==null&&t.remove(dt),M instanceof c&&M.children.length!==0&&M!==r.tree.sheet&&ft(r.tree,M),d(r.tree),M instanceof p?q(M,T(),!0):Y(M,T()),ce=!0}else ce=!1}function Jo(e){ce&&M!==null&&M.ellipse!==null&&ve(r.tree,M);const t=new a(e.x-l.x,e.y-l.y),n=r.tree.getLowestNode(t),o=r.tree.getLowestParent(t);ce&&M!==null&&o!==null&&(ce=!0,d(r.tree),n===null?(M=null,ce=!1):(o.remove(t),M=n,M instanceof c&&M.children.length!==0&&(ft(r.tree,M),M.children=[]),d(r.tree),M instanceof p?q(M,T(),!0):Y(M,T())))}function Ko(e){const t=new a(e.x-l.x,e.y-l.y);if(ce){const n=r.tree.getLowestNode(t);n!==null&&n instanceof c&&n.remove(t),n!==r.tree.sheet&&n instanceof c&&n.children.length!==0&&ft(r.tree,n),d(r.tree),r.pushToDrawStack(ne.DELETE_SINGLE)}M=null,ce=!1}function Qo(){ce&&M!==null&&ve(r.tree,M),M=null,ce=!1,d(r.tree)}let ht,B=null,ie;function er(e){if(ht=new a(e.x-l.x,e.y-l.y),B=r.tree.getLowestNode(ht),B!==null){const t=r.tree.getLowestParent(ht);t!==null?t.remove(ht):(B=r.tree.sheet.copy(),r.tree.clear()),ie=!0,d(r.tree),ae(B,T())}}function tr(e){ie&&B!==null&&ve(r.tree,B);const t=new a(e.x-l.x,e.y-l.y),n=r.tree.getLowestNode(t),o=r.tree.getLowestParent(t);ie&&B!==null&&o!==null?(ie=!0,n===null?(B=null,ie=!1):(o.remove(t),B=n,ie=!0,d(r.tree),ae(B,T()))):ie&&o===null&&(B=r.tree.sheet.copy(),r.tree.clear(),d(r.tree),ae(B,T()))}function nr(e){const t=new a(e.x-l.x,e.y-l.y);if(ie){const n=r.tree.getLowestNode(t);n!==null&&n instanceof c?n.remove(t):r.tree.clear(),d(r.tree),r.pushToDrawStack(ne.DELETE_MULTI)}B=null,ie=!1}function or(){ie&&B!==null&&ve(r.tree,B),B=null,ie=!1,d(r.tree)}let pe,_=null,Ye,zt=new a(1,1);function rr(e){if(pe=new a(e.x-l.x,e.y-l.y),_=r.tree.getLowestNode(pe),_ instanceof c&&_.ellipse!==null){Ye=!0;const t=r.tree.getLowestParent(pe);t!==null&&t.remove(pe);for(let n=0;n<_.children.length;n++)r.tree.insert(_.children[n]);zt=Ln(_,pe),_.children=[]}}function ir(e){if(Ye){const t=new a((e.x-l.x-pe.x)/2,(e.y-l.y-pe.y)/2);if(_ instanceof c){const n=xt(_,t,zt);if(n.ellipse!==null){d(r.tree);const i=r.tree.canInsert(n)&&Le(n.ellipse)?x():T();D(i,"cursor: crosshair","cursor: no-drop"),Y(n,i)}}}}function sr(e){if(w("cursor: default"),Ye){const t=new a((e.x-l.x-pe.x)/2,(e.y-l.y-pe.y)/2);if(_ instanceof c){const n=xt(_,t,zt);n.ellipse!==null&&(r.tree.canInsert(n)&&Le(n.ellipse)?r.tree.insert(n):r.tree.insert(_))}d(r.tree),Ye=!1,r.pushToDrawStack(ne.RESIZE)}}function lr(){w("cursor: default"),Ye&&_!==null&&r.tree.insert(_),Ye=!1,d(r.tree)}let qe,U=null,Ge,nt;const ar=document.getElementById("selectionString");function cr(e){nt=new I(r.tree.sheet),r.selectForProof.sheet=new I().sheet,qe=new a(e.x-l.x,e.y-l.y),U=r.tree.getLowestNode(qe),$n()}function ur(e){Ge&&(d(r.tree),qe=new a(e.x-l.x,e.y-l.y),U=r.tree.getLowestNode(qe),$n())}function fr(){if(w("cursor: default"),Ge&&U!==null){if(U instanceof c&&U.ellipse===null)for(let e=0;e<U.children.length;e++)r.selectForProof.insert(U.children[e]);else r.selectForProof.insert(U);d(r.tree),r.pushToDrawStack(ne.COPY_GRAPH)}U=null,Ge=!1}function dr(){w("cursor: default"),U=null,Ge=!1,d(r.tree)}function $n(){const e=new I;let t=!1;if(U!==null){if(Ge=!0,U instanceof p||!U.isEqualTo(nt.sheet)){e.insert(U);const n=nt.getLowestParent(qe);n!==null&&(n.remove(qe),t=!0),d(nt)}else e.sheet=U,at();ae(U,x()),w("cursor: copy"),t&&nt.insert(U)}else Ge=!1;ar.innerHTML=e.toString()}function re(){const e=new I;return r.currentProofStep&&(e.sheet=r.currentProofStep.tree.sheet.copy()),e}function ze(e,t){return e.canInsert(t)&&Un(new I(e.sheet),t)}function Un(e,t){return r.currentProofStep?(e.insert(t.copy()),e.isEqualTo(new I(r.currentProofStep.tree.sheet))):!1}let fn,_t;function hr(){fn=re(),_t=!0,at(),ae(fn.sheet,T())}function pr(){_t&&(Nt(-1),r.clearProof(),E())}function wr(){_t=!1,E()}const gr=document.getElementById("showRect");let yt,Mt,_e;function yr(){w("cursor: crosshair")}function mr(e){yt=new a(e.clientX-l.x,e.clientY-l.y),_e=re(),Mt=!1}function Tr(e){const t=new a(e.clientX-l.x,e.clientY-l.y),n=new c(St(yt,t)),o=new c(Hn(n.ellipse));if(E(),!Mt){const i=Bn(n,o)?x():T();Y(n,i),Y(o,i),D(i,"cursor: crosshair","cursor: no-drop"),gr.checked&&Cn(yt,t,i)}}function Er(e){w("cursor: crosshair");const t=new a(e.clientX-l.x,e.clientY-l.y);_e=re();const n=new c(St(yt,t)),o=new c(Hn(n.ellipse)),i=new W(_e,k.DC_INSERT);!Mt&&Bn(n,o)&&(i.tree.insert(n),i.tree.insert(o),r.pushToProof(i)),E()}function xr(){w("cursor: default"),Mt=!0,E()}function Hn(e){return new he(e.center,Math.floor(e.radiusX*.8),Math.floor(e.radiusY*.8))}function Bn(e,t){return e.ellipse!==null&&t.ellipse!==null&&_e.canInsert(e)&&Le(e.ellipse)&&_e.canInsert(t)&&Le(t.ellipse)&&Sr(e,t)}function Sr(e,t){const n=new I(_e.sheet),o=new c(e.ellipse),i=new c(t.ellipse);return n.insert(o),n.insert(i),o.children.length===1}let ge,K=null,st,ke,Ue;function br(e){ge=new a(e.x-l.x,e.y-l.y),ke=re(),Ue=new I(ke.sheet),K=ke.getLowestNode(ge),Fn()}function Mr(e){ge=new a(e.x-l.x,e.y-l.y),Ue=new I(ke.sheet),K!==null&&(K=ke.getLowestNode(ge),E(),Fn())}function Ir(e){const t=new W(ke,k.DC_DELETE);if(ge=new a(e.x-l.x,e.y-l.y),st&&K instanceof c){const n=t.tree.getLowestParent(ge),o=K.children[0];if(n!==null&&o instanceof c){n.remove(ge);for(let i=0;i<o.children.length;i++)t.tree.insert(o.children[i]);r.pushToProof(t)}}E()}function kr(){st&&K!==null&&ve(Ue,K),K=null,st=!1,E()}function Pr(e){return e.children.length===1&&e.children[0]instanceof c&&K!==ke.sheet}function Cr(e){Y(e,T()),e.children[0]instanceof c&&Y(e.children[0],T())}function Fn(){if(K instanceof c&&Pr(K)){st=!0;const e=Ue.getLowestParent(ge);if(e!==null){e.remove(ge);const t=K.children[0].copy();ft(Ue,t),t.children=[]}d(Ue),Cr(K)}else st=!1}let Se,L=null,De,Q;function Lr(e){if(Q=re(),Se=new a(e.x-l.x,e.y-l.y),L=Q.getLowestNode(Se),L!==Q.sheet&&L!==null){w("cursor: grabbing");const t=Q.getLowestParent(Se);if(t!==null&&t.remove(Se),L instanceof c&&L.children.length!==0){for(let n=0;n<L.children.length;n++)Q.insert(L.children[n]);L.children=[]}De=!0,d(Q),L instanceof p?q(L,x(),!0):Y(L,x())}else De=!1}function Rr(e){if(De){const t=new a(e.x-Se.x,e.y-Se.y);if(d(Q),L instanceof c){const n=oe(L,t),o=ze(Q,n)?x():T();Y(n,o),D(o,"cursor: grabbing","cursor: no-drop")}else if(L instanceof p){const n=A(L,t),o=ze(Q,n)?x():T();q(n,o,!0),D(o,"cursor: grabbing","cursor: no-drop")}}}function Ar(e){if(De){w("cursor: default");const t=new W(Q,k.MOVE_SINGLE),n=new a(e.x-Se.x,e.y-Se.y);let o=null;L instanceof c?o=oe(L,n):L instanceof p&&(o=A(L,n)),o!==null&&ze(Q,o)&&(t.tree.insert(o),r.pushToProof(t))}E(),De=!1}function Dr(){w("cursor: default"),De&&L!==null&&Q.insert(L),De=!1,E()}let be,z=null,Rt=null,Oe,se;function Or(e){se=re(),be=new a(e.x-l.x,e.y-l.y),z=se.getLowestNode(be),z!==se.sheet&&z!==null?(w("cursor: grabbing"),Rt=se.getLowestParent(be),Rt!==null&&Rt.remove(be),Oe=!0,d(se),ae(z,x())):Oe=!1}function vr(e){if(Oe){const t=new a(e.x-be.x,e.y-be.y);if(d(se),z instanceof c){const n=Gt(z,t),o=ze(se,n)?x():T();j(z,o,t),D(o,"cursor: grabbing","cursor: no-drop")}else if(z instanceof p){const n=A(z,t),o=ze(se,n)?x():T();q(n,o,!0),D(o,"cursor: grabbing","cursor: no-drop")}}}function Nr(e){if(Oe){w("cursor: default");const t=new W(se,k.MOVE_MULTI),n=new a(e.x-be.x,e.y-be.y);let o=null;z instanceof c?o=Gt(z,n):z instanceof p&&(o=A(z,n)),o!==null&&ze(se,o)&&(t.tree.insert(o),r.pushToProof(t))}E(),Oe=!1}function $r(){w("cursor: default"),Oe&&z!==null&&se.insert(z),Oe=!1,E()}let Pe,X=null,Ut=null,Ve,ue;function Ur(e){ue=re(),Pe=new a(e.x-l.x,e.y-l.y),X=ue.getLowestNode(Pe),Ut=ue.getLowestParent(Pe),Ve=X!==ue.sheet&&X!==null,Ve&&w("cursor: copy")}function Hr(e){if(Ve){const t=new a(e.x-Pe.x,e.y-Pe.y);E();const n=new a(e.x-l.x,e.y-l.y),o=Xn(t,n)?x():T();if(X instanceof c)j(X,o,t);else if(X instanceof p){const i=A(X,t);q(i,o,!0)}D(o,"cursor: grabbing","cursor: no-drop")}}function Br(e){if(Ve){w("cursor: default");const t=new a(e.x-Pe.x,e.y-Pe.y);if(Xn(t,new a(e.x-l.x,e.y-l.y))){if(X instanceof c)ut(X,t,ue);else if(X instanceof p){const n=A(X,t);ue.insert(n)}r.pushToProof(new W(ue,k.ITERATION))}}E(),Ve=!1}function Fr(){w("cursor: default"),Ve=!1,E()}function Xn(e,t){return Ut!==null&&Ut.containsPoint(t)&&(X instanceof c&&Ie(ue,X,e)&&Yn(ue.sheet,oe(X,e).ellipse)||X instanceof p&&ue.canInsert(A(X,e)))}function Yn(e,t){for(let n=0;n<e.children.length;n++)if(e.children[n]instanceof c){if(e.children[n].ellipse instanceof he&&(t.contains(e.children[n].ellipse)||!Yn(e.children[n],t)))return!1}else if(e.children[n]instanceof p&&t.contains(e.children[n].calcRect()))return!1;return!0}let ye,R=null,je,le,ot;function Xr(e){ye=new a(e.x-l.x,e.y-l.y),le=re(),ot=new I(le.sheet),R=le.getLowestNode(ye),qn()}function Yr(e){ye=new a(e.x-l.x,e.y-l.y),R!==null&&(R=le.getLowestNode(ye),E(),qn())}function qr(e){if(je&&(ye=new a(e.x-l.x,e.y-l.y),R!==null&&Vt(le.sheet,le.getLevel(R)))){const t=le.getLowestParent(ye);t instanceof c&&t.remove(ye),r.pushToProof(new W(le,k.DEITERATION))}je=!1,E()}function Gr(){je&&R!==null&&ve(ot,R),je=!1,R=null,E()}function qn(){if(R!==null&&!(R instanceof c&&R.ellipse===null)&&Vt(le.sheet,le.getLevel(R))){je=!0;const e=ot.getLowestParent(ye);e!==null&&e.remove(ye),d(ot),ae(R,T()),ot.insert(R)}else je=!1}function Vt(e,t){let n=null;for(let o=0;o<e.children.length;o++){if(e.children[o]instanceof c&&R instanceof c&&R.isEqualTo(e.children[o])&&R.ellipse!==e.children[o].ellipse)return!0;if(e.children[o]instanceof p&&R instanceof p&&e.children[o].identifier===R.identifier&&e.children[o].toString()!==R.toString())return!0;e.children[o]instanceof c&&e.children[o].containsNode(R)&&le.getLevel(e.children[o])<t&&(n=e.children[o])}return n!==null?Vt(n,t):!1}let b,O,V,$,We;function zr(e){V=re();const t=r.selectForProof.sheet.children,n=new a(e.x-l.x,e.y-l.y);if(r.proof.length>0&&t.length===1){We=!0,b=t[0];const o=jt(e,b),i=V.getLowestNode(n),f=V.getLowestParent(n);if(O=i instanceof p?f:i,o){const g=it(b,o);if(O!==null&&!O.containsNode(g))w("cursor: no-drop"),$=!1,j(b,T(),o);else if(O!==null&&O instanceof c&&O.ellipse!==null&&V.getLevel(O)%2===0){if(g instanceof c){$=!0;for(let u=0;u<O.children.length;u++)if(g.containsNode(O.children[u])){$=!1;break}}else $=!0;if($){let u="";if(b instanceof c)u=Ie(V,b,o)?x():T();else if(b instanceof p){const m=it(b,o);u=V.canInsert(m)?x():T()}$=u===x(),j(b,u,o),D(u,"cursor: copy","cursor: no-drop")}else w("cursor: no-drop"),j(b,T(),o)}else w("cursor: no-drop"),$=!1,j(b,T(),o)}}else $=!1,We=!1,j(b,T(),n)}function _r(e){if(We){const t=new a(e.x-l.x,e.y-l.y);E();const n=jt(e,b),o=V.getLowestNode(t),i=V.getLowestParent(t);if(O=o instanceof p?i:o,n){const f=it(b,n);if(O!==null&&!O.containsNode(f))w("cursor: no-drop"),$=!1,j(b,T(),n);else if(O!==null&&O instanceof c&&O.ellipse!==null&&V.getLevel(O)%2===0){if(f instanceof c){$=!0;for(let g=0;g<O.children.length;g++)if(f.containsNode(O.children[g])){$=!1;break}}else $=!0;if($){let g="";if(b instanceof c)g=Ie(V,b,n)?x():T();else if(b instanceof p){const u=it(b,n);g=V.canInsert(u)?x():T()}$=g===x(),j(b,g,n),D(g,"cursor: copy","cursor: no-drop")}else w("cursor: no-drop"),j(b,T(),n)}else w("cursor: no-drop"),$=!1,j(b,T(),n)}}else $=!1}function Vr(e){if(w("cursor: default"),We&&$){const t=jt(e,b);if(t){if(b instanceof c)ut(b,t,V);else if(b instanceof p){const n=it(b,t);V.insert(n)}r.pushToProof(new W(V,k.INSERTION))}}E(),We=!1}function jr(){w("cursor: default"),We=!1,E()}function jt(e,t){if(t instanceof c&&t.ellipse!==null)return new a(e.x-t.ellipse.center.x,e.y-t.ellipse.center.y);if(t instanceof p)return new a(e.x-t.origin.x,e.y-t.origin.y)}let me,te=null,Ze,Ce,rt;function Wr(e){me=new a(e.x-l.x,e.y-l.y),Ce=re(),rt=new I(Ce.sheet),te=Ce.getLowestNode(me),Gn()}function Zr(e){me=new a(e.x-l.x,e.y-l.y),te!==null&&(te=Ce.getLowestNode(me),E(),Gn())}function Jr(e){if(Ze){const t=new W(Ce,k.ERASURE);me=new a(e.x-l.x,e.y-l.y);const n=t.tree.getLowestParent(me);n!==null&&n.remove(me),r.pushToProof(t),E()}te=null,Ze=!1}function Kr(){Ze&&te!==null&&ve(rt,te),te=null,Ze=!1,E()}function Gn(){if(te!==Ce.sheet&&te!==null&&Ce.getLevel(te)%2===0){Ze=!0;const e=rt.getLowestParent(me);e!==null&&e.remove(me),d(rt),ae(te,T()),rt.insert(te)}else Ze=!1}let we,Z=null,Je,Wt=new a(1,1),fe;function Qr(e){if(fe=re(),we=new a(e.x-l.x,e.y-l.y),Z=fe.getLowestNode(we),Z instanceof c&&Z.ellipse!==null){Je=!0;const t=fe.getLowestParent(we);t!==null&&t.remove(we);for(let n=0;n<Z.children.length;n++)fe.insert(Z.children[n]);Wt=Ln(Z,we),Z.children=[]}}function ei(e){if(Je){const t=new a((e.x-l.x-we.x)/2,(e.y-l.y-we.y)/2);if(Z instanceof c){const n=xt(Z,t,Wt);if(n.ellipse!==null){d(fe);const o=zn(n)?x():T();Y(n,o),D(o,"cursor: crosshair","cursor: no-drop")}}}}function ti(e){if(Je){w("cursor: default");const t=new a((e.x-l.x-we.x)/2,(e.y-l.y-we.y)/2);if(Z instanceof c){const n=xt(Z,t,Wt);n.ellipse!==null&&zn(n)&&(fe.insert(n),r.pushToProof(new W(fe,k.RESIZE)))}E(),Je=!1}}function ni(){w("cursor: default"),Je&&Z!==null&&fe.insert(Z),Je=!1,E()}function zn(e){return fe.canInsert(e)&&Le(e.ellipse)&&Un(new I(fe.sheet),e)}let Ht,mt,lt;function oi(){mt=re(),Ht=r.selectForProof.sheet,Ht.children.length>0&&r.proof.length===1&&mt.sheet.isEmptySheet()&&(lt=!0,w("cursor: copy"))}function ri(){w("cursor: default"),lt=!1,E()}function ii(){lt&&(w("cursor: default"),mt.sheet=Ht,r.pushToProof(new W(mt,k.PASTE_GRAPH))),lt=!1,E()}function si(){w("cursor: default"),lt=!1,E()}const de=document.getElementById("canvas");de.width=window.innerWidth;de.height=window.innerHeight;const _n=de.getContext("2d");if(_n===null)throw Error("2d rendering context not supported");const li=_n;li.font="35pt arial";const At=document.getElementById("cutTools"),dn=document.getElementById("atomTools"),hn=document.getElementById("graphString"),pn=document.getElementById("proofString"),wn=document.getElementById("toProofTools");window.addEventListener("keydown",di);de.addEventListener("mouseenter",hi);de.addEventListener("mousedown",pi);de.addEventListener("mousemove",wi);de.addEventListener("mouseup",gi);de.addEventListener("mouseout",yi);let Zt=!1,Jt=!0;window.tree=r.tree;window.treeString=Tt(window.tree);window.atomTool=s.atomTool;window.cutTool=s.cutTool;window.dragTool=s.dragTool;window.aegJsonString=Tt;window.saveMode=vn;window.loadMode=po;window.drawMoveSingleTool=s.drawMoveSingleTool;window.drawMoveMultiTool=s.drawMoveMultiTool;window.copySingleTool=s.copySingleTool;window.copyMultiTool=s.copyMultiTool;window.deleteSingleTool=s.deleteSingleTool;window.deleteMultiTool=s.deleteMultiTool;window.copyFromDrawTool=s.copyFromDrawTool;window.pasteInProofTool=s.pasteInProofTool;window.doubleCutInsertionTool=s.doubleCutInsertionTool;window.resizeTool=s.resizeTool;window.doubleCutDeletionTool=s.doubleCutDeletionTool;window.insertionTool=s.insertionTool;window.erasureTool=s.erasureTool;window.proofMoveSingleTool=s.proofMoveSingleTool;window.proofMoveMultiTool=s.proofMoveMultiTool;window.proofResizeTool=s.proofResizeTool;window.iterationTool=s.iterationTool;window.deiterationTool=s.deiterationTool;window.proofClearTool=s.proofClearTool;window.drawClearTool=s.drawClearTool;window.setTool=ci;window.setHighlight=ai;window.toggleHandler=wo;function ai(e,t){const n=document.getElementById(t);switch(e){case"mousedown":n==null||n.classList.remove("no-highlight");break;case"mouseleave":n==null||n.classList.add("no-highlight");break}}const gn=document.querySelectorAll(".toolButton");gn.forEach(e=>{e.addEventListener("click",()=>{e.classList.add("toolButtonPressed"),gn.forEach(t=>{t!==e&&t.classList.remove("toolButtonPressed")})})});function ci(e){switch(r.toolState=e,At.style.display="none",dn.style.display="none",wn.style.display="none",r.toolState){case s.atomTool:dn.style.display="block";break;case s.cutTool:At.style.display="block";break;case s.copyFromDrawTool:wn.style.display="block";break;case s.doubleCutInsertionTool:At.style.display="block";break}}async function ui(){r.modeState==="Draw"?r.undoDrawStep():r.undoProofStep()}async function fi(){r.modeState==="Draw"?r.redoDrawStep():r.redoProofStep()}function di(e){if(e.ctrlKey)e.preventDefault(),e.key==="s"?vn():e.key==="z"?ui():e.key==="y"&&fi();else switch(r.toolState){case s.atomTool:So(e);break}}function hi(){switch(r.toolState){case s.cutTool:Lo();break;case s.dragTool:jn();break;case s.doubleCutInsertionTool:yr();break}Jt=!0}function pi(e){if(e.button===0){switch(r.toolState){case s.cutTool:Ro(e);break;case s.atomTool:bo(e);break;case s.dragTool:Wn(e);break;case s.drawMoveSingleTool:vo(e);break;case s.drawMoveMultiTool:Ho(e);break;case s.copySingleTool:Yo(e);break;case s.copyMultiTool:_o(e);break;case s.deleteSingleTool:Zo(e);break;case s.deleteMultiTool:er(e);break;case s.resizeTool:rr(e);break;case s.copyFromDrawTool:cr(e);break;case s.pasteInProofTool:oi();break;case s.doubleCutInsertionTool:mr(e);break;case s.doubleCutDeletionTool:br(e);break;case s.insertionTool:zr(e);break;case s.erasureTool:Wr(e);break;case s.proofMoveSingleTool:Lr(e);break;case s.proofMoveMultiTool:Or(e);break;case s.proofResizeTool:Qr(e);break;case s.iterationTool:Ur(e);break;case s.deiterationTool:Xr(e);break;case s.proofClearTool:hr();break;case s.drawClearTool:go();break}Zt=!0}}function wi(e){if(Zt&&Jt)switch(r.toolState){case s.cutTool:Ao(e);break;case s.atomTool:Mo(e);break;case s.dragTool:Zn(e);break;case s.drawMoveSingleTool:No(e);break;case s.drawMoveMultiTool:Bo(e);break;case s.copySingleTool:qo(e);break;case s.copyMultiTool:Vo(e);break;case s.deleteSingleTool:Jo(e);break;case s.deleteMultiTool:tr(e);break;case s.resizeTool:ir(e);break;case s.copyFromDrawTool:ur(e);break;case s.pasteInProofTool:ri();break;case s.doubleCutInsertionTool:Tr(e);break;case s.doubleCutDeletionTool:Mr(e);break;case s.insertionTool:_r(e);break;case s.erasureTool:Zr(e);break;case s.proofMoveSingleTool:Rr(e);break;case s.proofMoveMultiTool:vr(e);break;case s.proofResizeTool:ei(e);break;case s.iterationTool:Hr(e);break;case s.deiterationTool:Yr(e);break}}function gi(e){if(e.button===0){switch(r.toolState){case s.cutTool:Do(e);break;case s.atomTool:Io(e);break;case s.dragTool:Jn();break;case s.drawMoveSingleTool:$o(e);break;case s.drawMoveMultiTool:Fo(e);break;case s.copySingleTool:Go(e);break;case s.copyMultiTool:jo(e);break;case s.deleteSingleTool:Ko(e);break;case s.deleteMultiTool:nr(e);break;case s.resizeTool:sr(e);break;case s.copyFromDrawTool:fr();break;case s.pasteInProofTool:ii();break;case s.doubleCutInsertionTool:Er(e);break;case s.doubleCutDeletionTool:Ir(e);break;case s.insertionTool:Vr(e);break;case s.erasureTool:Jr(e);break;case s.proofMoveSingleTool:Ar(e);break;case s.proofMoveMultiTool:Nr(e);break;case s.proofResizeTool:ti(e);break;case s.iterationTool:Br(e);break;case s.deiterationTool:qr(e);break;case s.proofClearTool:pr();break;case s.drawClearTool:yo();break}Zt=!1}}function yi(){switch(r.toolState){case s.cutTool:Oo();break;case s.atomTool:ko();break;case s.dragTool:Kn();break;case s.drawMoveSingleTool:Uo();break;case s.drawMoveMultiTool:Xo();break;case s.copySingleTool:zo();break;case s.copyMultiTool:Wo();break;case s.deleteSingleTool:Qo();break;case s.deleteMultiTool:or();break;case s.resizeTool:lr();break;case s.copyFromDrawTool:dr();break;case s.pasteInProofTool:si();break;case s.doubleCutInsertionTool:xr();break;case s.doubleCutDeletionTool:kr();break;case s.insertionTool:jr();break;case s.erasureTool:Kr();break;case s.proofMoveSingleTool:Dr();break;case s.proofMoveMultiTool:$r();break;case s.proofResizeTool:ni();break;case s.iterationTool:Fr();break;case s.deiterationTool:Gr();break;case s.proofClearTool:wr();break;case s.drawClearTool:mo();break}Jt=!1}function mi(){de.width=window.innerWidth,de.height=window.innerHeight}window.onresize=mi;
