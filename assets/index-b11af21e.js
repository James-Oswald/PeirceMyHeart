/* empty css               */(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const g of u.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function n(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerPolicy&&(u.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?u.credentials="include":i.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(i){if(i.ep)return;i.ep=!0;const u=n(i);fetch(i.href,u)}})();class c{constructor(t,n){if(this.x=t,this.y=n,!Number.isFinite(this.x)||!Number.isFinite(this.y))throw new Error("NaN or Infinity value(s) were passed in constructing a Point.")}set(t,n){if(!Number.isFinite(t)||!Number.isFinite(n))throw new Error("NaN or Infinity value(s) were passed in setting "+this+"'s coords.");this.x=t,this.y=n}distance(t){const n=this.x-t.x,o=this.y-t.y;return Math.sqrt(n*n+o*o)}toString(){return"("+this.x+", "+this.y+")"}}function ie(e,t){return Et(e,t)||ce(t,e)}function Et(e,t){if(e instanceof K)return t instanceof K?yt(e,t):wt(t,e);if(t instanceof K)return wt(e,t);if(yt(e.boundingBox,t.boundingBox)||ce(t.boundingBox,e.boundingBox)){const n=kt(e);let o;for(let i=0;i<n.length;i++)if(o=Be(t,n[i]),o<=0)return!0;return!1}return!1}function wt(e,t){const n=t.getCorners(),o=be(e,n[0].x,1),i=be(e,n[1].x,1),u=be(e,n[0].x,-1),g=be(e,n[1].x,-1);if(n[0].y<o&&o<n[2].y||n[0].y<u&&u<n[2].y||n[0].y<i&&i<n[2].y||n[0].y<g&&g<n[2].y)return!0;const y=-1/Math.pow(e.radiusX,2),I=2*e.center.x/Math.pow(e.radiusX,2),re=-Math.pow(e.center.x,2)/Math.pow(e.radiusX,2)+1-Math.pow((n[0].y-e.center.y)/e.radiusY,2),ht=-Math.pow(e.center.x,2)/Math.pow(e.radiusX,2)+1-Math.pow((n[2].y-e.center.y)/e.radiusY,2),qe=(-I+Math.sqrt(Math.pow(I,2)-4*y*re))/(2*y),Ve=(-I-Math.sqrt(Math.pow(I,2)-4*y*re))/(2*y),Ge=(-I+Math.sqrt(Math.pow(I,2)-4*y*ht))/(2*y),We=(-I-Math.sqrt(Math.pow(I,2)-4*y*ht))/(2*y);return!isNaN(qe)&&n[0].x<qe&&qe<n[1].x||!isNaN(Ve)&&n[0].x<Ve&&Ve<n[1].x||!isNaN(Ge)&&n[0].x<Ge&&Ge<n[1].x||!isNaN(We)&&n[0].x<We&&We<n[1].x}function ce(e,t){if(e instanceof K)if(t instanceof K){const n=t.getCorners();for(let o=0;o<4;o++)if(!Qe(e,n[o]))return!1;return!0}else{const n=Kt(t);for(let o=0;o<4;o++)if(!Qe(e,n[o]))return!1;return!0}else if(t instanceof K){const n=t.getCorners();let o;for(let i=0;i<4;i++)if(o=Be(e,n[i]),!(o<0))return!1;return!0}else{const n=kt(t);let o;for(let i=0;i<n.length;i++)if(o=Be(e,n[i]),!(o<0))return!1;return!0}}function yt(e,t){const n=e.getCorners(),o=t.getCorners();return(n[0].y<=o[0].y&&n[2].y>=o[0].y||n[0].y<=o[2].y&&n[2].y>=o[2].y||o[0].y<=n[0].y&&o[2].y>=n[0].y||o[0].y<=n[2].y&&o[2].y>=n[2].y)&&(n[0].x<=o[0].x&&n[1].x>=o[0].x||n[0].x<=o[1].x&&n[1].x>=o[1].x||o[0].x<=n[0].x&&o[1].x>=n[0].x||o[0].x<=n[1].x&&o[1].x>=n[1].x)}function Qe(e,t){const n=e.getCorners();return n[0].x<t.x&&n[1].x>t.x&&n[0].y<t.y&&n[2].y>t.y}function Be(e,t){return Math.pow(t.x-e.center.x,2)/Math.pow(e.radiusX,2)+Math.pow(t.y-e.center.y,2)/Math.pow(e.radiusY,2)-1}function Kt(e){return[new c(e.center.x,e.center.y-e.radiusY),new c(e.center.x+e.radiusX,e.center.y),new c(e.center.x,e.center.y+e.radiusY),new c(e.center.x-e.radiusX,e.center.y)]}function kt(e){const t=[];let n,o,i=1;for(let u=0;u<360;u++)n=e.center.x+e.radiusX*Math.cos(u*(Math.PI/180)),u>180&&(i=-1),o=be(e,n,i),t[u]=new c(n,o);return t}function be(e,t,n){return e.radiusX===0||e.radiusY===0?e.center.y:n*e.radiusY*Math.sqrt(1-Math.pow((t-e.center.x)/e.radiusX,2))+e.center.y}class K{constructor(t,n,o){if(!Number.isFinite(n)||!Number.isFinite(o))throw new Error("Infinity/NaN passed in for width/height while constructing a Rectangle.");if(n!==void 0&&n<0)throw new Error("Negative value passed for width while constructing a Rectangle.");if(o!==void 0&&o<0)throw new Error("Negative value passed for height while constructing a Rectangle.");this.startVertex=t,this.width=n,this.height=o}getCorners(){const t=[this.startVertex];return t.push(new c(this.startVertex.x+this.width,this.startVertex.y)),t.push(new c(this.startVertex.x+this.width,this.startVertex.y+this.height)),t.push(new c(this.startVertex.x,this.startVertex.y+this.height)),t}containsPoint(t){return Qe(this,t)}overlaps(t){return ie(this,t)}contains(t){return ce(this,t)}toString(){return"Rectangle with top left vertex at: "+this.startVertex.toString()+", w: "+this.width+", h: "+this.height}}class f{constructor(t,n,o,i){if(t.length!==1)throw new Error("String of length "+t.length+" passed in as identifier in AtomNode constructor, which is not of length 1.");if(!/^[A-Za-z]$/.test(t))throw new Error(t+" not contained in Latin alphabet passed in as identifier in AtomNode constructor.");this.internalIdentifier=t,this.internalOrigin=n,this.internalWidth=o,this.internalHeight=i}copy(){return new f(this.internalIdentifier,new c(this.internalOrigin.x,this.internalOrigin.y),this.internalWidth,this.internalHeight)}get width(){return this.internalWidth}set width(t){this.internalWidth=t}get height(){return this.internalHeight}set height(t){this.internalHeight=t}get identifier(){return this.internalIdentifier}set identifier(t){this.internalIdentifier=t}get origin(){return this.internalOrigin}set origin(t){this.internalOrigin=t}containsPoint(t){return this.calcRect().containsPoint(t)}toString(){return"An atom representing the proposition: "+this.internalIdentifier+" and Boundary box of: "+this.calcRect().toString()}calcRect(){return new K(new c(this.internalOrigin.x,this.internalOrigin.y-this.internalHeight),this.internalWidth,this.internalHeight)}isEqualTo(t){return this.identifier===t.identifier}}class V{constructor(t,n,o){if(this.center=t,this.radiusX=n,this.radiusY=o,!Number.isFinite(this.radiusX)||!Number.isFinite(this.radiusY))throw new Error("A radius passed into an Ellipse construction was NaN or Infinity.");if(this.radiusX!==void 0&&this.radiusX<0)throw new Error("Horizontal radius in an Ellipse construction was negative.");if(this.radiusY!==void 0&&this.radiusY<0)throw new Error("Vertical radius in an Ellipse construction was negative.");const i=new c(this.center.x-this.radiusX,this.center.y-this.radiusY);this.boundingBox=new K(i,this.radiusX*2,this.radiusY*2)}containsPoint(t){return Be(this,t)<0}overlaps(t){return ie(this,t)}contains(t){return ce(this,t)}toString(){return"An ellipse with Center at: "+this.center.toString()+", Horizontal radius: "+this.radiusX+", Vertical radius: "+this.radiusY+", Bounding box: "+this.boundingBox.toString()}}class a{constructor(t,n){this.internalEllipse=t,this.internalChildren=n??[]}copy(){let t;const n=[];if(this.ellipse!==null?t=new V(new c(this.ellipse.center.x,this.ellipse.center.y),this.ellipse.radiusX,this.ellipse.radiusY):t=null,this.children.length>0)for(let o=0;o<this.children.length;o++){const i=this.children[o];i instanceof f,n.push(i.copy())}return new a(t,n)}get ellipse(){return this.internalEllipse}set ellipse(t){this.internalEllipse=t}get children(){return this.internalChildren}set children(t){this.internalChildren=t}set child(t){this.internalChildren.push(t)}getCurrentCut(t){for(let n=0;n<this.internalChildren.length;n++){const o=this.internalChildren[n];if(o instanceof a&&o.containsNode(t))return o.getCurrentCut(t)}return this}containsPoint(t){return this.internalEllipse===null?!0:this.internalEllipse.containsPoint(t)}containsNode(t){return this.internalEllipse===null?!0:t instanceof f?ce(this.internalEllipse,t.calcRect()):ce(this.internalEllipse,t.internalEllipse)}getLowestNode(t){if(!this.containsPoint(t))return null;for(let n=0;n<this.internalChildren.length;n++)if(this.internalChildren[n].containsPoint(t))return this.internalChildren[n]instanceof f||this.internalChildren[n]instanceof a&&this.internalChildren[n].children.length===0?this.internalChildren[n]:this.internalChildren[n].getLowestNode(t);return this}getLowestParent(t){if(!this.containsPoint(t))throw new Error("This parent "+this.toString+" does not contain the point.");for(let n=0;n<this.internalChildren.length;n++)if(this.internalChildren[n].containsPoint(t)){if(this.internalChildren[n]instanceof f||this.internalChildren[n]instanceof a&&this.internalChildren[n].children.length===0)return this;{const o=this.internalChildren[n];for(let i=0;i<o.children.length;i++)if(o.children[i].containsPoint(t))return o.getLowestParent(t);return this}}return null}getLevel(t,n){for(let o=0;o<this.internalChildren.length;o++){if(this.internalChildren[o]===t)return n;if(this.internalChildren[o]instanceof a&&this.internalChildren[o].containsNode(t))return this.internalChildren[o].getLevel(t,n+1)}return-1}remove(t){if(!this.containsPoint(t))return!1;for(let n=0;n<this.children.length;n++)if(this.children[n].containsPoint(t)){if(this.children[n]instanceof f||this.children[n]instanceof a&&this.children[n].children.length===0)return this.children.splice(n,1),!0;for(let o=0;o<this.children[n].children.length;o++)if(this.children[n].children[o].containsPoint(t))if(this.children[n].children[o]instanceof f)this.children[n].children.splice(o,1);else return this.children[n].children[o].remove(t);return this.children.splice(n,1),!0}return!1}clear(){this.internalChildren=[]}toString(){let t;return this.internalEllipse===null?t="Sheet of Assertion of the AEG Tree":t="A cut node with boundary box of "+this.internalEllipse.toString(),this.internalChildren.length>0&&(t+=", With nested nodes: "+this.internalChildren.toString()),t}isEmptySheet(){return this.internalEllipse===null&&this.internalChildren.length===0}toFormulaString(){let t="";for(const n of this.internalChildren)n instanceof f?t+=n.identifier:n instanceof a&&(t+=n.toFormulaString()),t+=" ";return t=t.slice(0,-1),this.internalEllipse===null?t="["+t+"]":t="("+t+")",t}isEqualTo(t){if(this.children.length===t.children.length){if(this.children.length===0)return!0;const n=this.copy().children,o=t.copy().children;for(let i=0;i<n.length;i++)for(let u=0;u<o.length;u++){if(n[i]instanceof f&&o[u]instanceof f&&n[i].isEqualTo(o[u])||n[i]instanceof a&&o[u]instanceof a&&n[i].isEqualTo(o[u])){n.splice(i,1),o.splice(u,1),i--;break}if(u===o.length-1)return!1}return n.length===0&&o.length===0}return!1}}class k{constructor(t){t!==void 0?(this.internalSheet=t.copy(),this.internalSheet.ellipse=null):this.internalSheet=new a(null)}get sheet(){return this.internalSheet}set sheet(t){this.internalSheet=t}verify(){return this.verifyAEG(this.internalSheet)}verifyAEG(t){for(let n=0;n<t.children.length;n++){if(!t.containsNode(t.children[n]))return!1;for(let o=n+1;o<t.children.length;o++)if(this.overlaps(t.children[n],t.children[o]))return!1}for(let n=0;n<t.children.length;n++)if(t.children[n]instanceof a&&!this.verifyAEG(t.children[n]))return!1;return!0}canInsert(t){const n=this.internalSheet.getCurrentCut(t);for(let o=0;o<n.children.length;o++)if(this.intersects(t,n.children[o]))return!1;return!0}insert(t){if(!this.canInsert(t))throw new Error("Insertion failed. "+t+" had a collision.");const n=this.internalSheet.getCurrentCut(t),o=[...n.children];if(n.child=t,t instanceof a)for(let i=o.length-1;i>=0;i--)t.containsNode(o[i])&&(t.child=o[i],n.children.splice(i,1));return!0}getLowestNode(t){return this.internalSheet.getLowestNode(t)}getLowestParent(t){return this.internalSheet.getLowestParent(t)}getLevel(t){return this.internalSheet.getLevel(t,0)}remove(t){return this.internalSheet.remove(t)}clear(){this.internalSheet.clear()}intersects(t,n){const o=t instanceof f?t.calcRect():t.ellipse,i=n instanceof f?n.calcRect():n.ellipse;return Et(o,i)}overlaps(t,n){let o,i;return t instanceof f?n instanceof f?ie(t.calcRect(),n.calcRect()):(o=n.ellipse,ie(t.calcRect(),o)):n instanceof f?(o=t.ellipse,ie(o,n.calcRect())):(o=t.ellipse,i=n.ellipse,ie(o,i))}isEqualTo(t){return this.sheet.isEqualTo(t.sheet)}toString(){return this.internalSheet.toFormulaString()}}class G{constructor(t,n){this.appliedRule=n??"",this.tree=new k(t==null?void 0:t.sheet)}}var s=(e=>(e[e.none=0]="none",e[e.atomTool=1]="atomTool",e[e.cutTool=2]="cutTool",e[e.dragTool=3]="dragTool",e[e.moveSingleTool=4]="moveSingleTool",e[e.moveMultiTool=5]="moveMultiTool",e[e.copySingleTool=6]="copySingleTool",e[e.copyMultiTool=7]="copyMultiTool",e[e.deleteSingleTool=8]="deleteSingleTool",e[e.deleteMultiTool=9]="deleteMultiTool",e[e.resizeTool=10]="resizeTool",e[e.copyFromDrawTool=11]="copyFromDrawTool",e[e.pasteInProofTool=12]="pasteInProofTool",e[e.doubleCutInsertionTool=13]="doubleCutInsertionTool",e[e.doubleCutDeletionTool=14]="doubleCutDeletionTool",e[e.insertionTool=15]="insertionTool",e[e.erasureTool=16]="erasureTool",e[e.iterationTool=17]="iterationTool",e[e.deiterationTool=18]="deiterationTool",e))(s||{});const Me=class Oe{static getLastProofStep(){return Oe.proofHistory.length===0?new G(new k):Oe.proofHistory[Oe.proofHistory.length-1]}};Me.tree=new k;Me.proofHistory=[];Me.selectForProof=new k;Me.toolState=0;Me.modeState="Draw";let r=Me;const Zt=document.getElementById("theme-select");function le(e){return getComputedStyle(document.body).getPropertyValue(e)}let It=le("--good-placement"),Lt=le("--bad-placement"),Dt=le("--canvas-items");function $t(){setTimeout(()=>{It=le("--good-placement"),Lt=le("--bad-placement"),Dt=le("--canvas-items"),d(r.tree)})}Zt.addEventListener("input",()=>{$t()});window.addEventListener("DOMContentLoaded",()=>{$t()});function h(){return Lt}function m(){return It}function Ot(){return Dt}const _e=document.getElementById("canvas"),Bt=_e.getContext("2d");if(Bt===null)throw Error("2d rendering context not supported");const x=Bt;x.font="35pt arial";const Qt=document.getElementById("graphString"),_t=document.getElementById("proofString"),en=document.getElementById("atomBox"),Ht=document.getElementById("atomBoxes");Ht.addEventListener("input",tn);function F(e,t){const n=e.ellipse;if(n!==null){x.strokeStyle=t;const o=n.center;x.beginPath(),x.ellipse(o.x+l.x,o.y+l.y,n.radiusX,n.radiusY,0,0,2*Math.PI),x.stroke()}}function H(e,t,n){x.textBaseline="bottom";const o=x.measureText(e.identifier);x.fillStyle=t,x.strokeStyle=t,x.beginPath(),x.fillText(e.identifier,e.origin.x+l.x,e.origin.y+l.y),(Ht.checked||en.checked&&n)&&x.rect(e.origin.x+l.x,e.origin.y+l.y-o.actualBoundingBoxAscent,e.width,e.height),x.stroke()}function Nt(e,t,n){x.beginPath(),x.strokeStyle=n;const o=e.x-t.x+l.x,i=e.y-t.y+l.y;x.rect(e.x,e.y,-o,-i),x.stroke()}function tn(){d(r.tree)}function rt(){x.clearRect(0,0,_e.width,_e.height)}function d(e,t){Qt.innerHTML=e.toString(),rt(),it(e.sheet,t)}function it(e,t){for(let n=0;e.children.length>n;n++)e.children[n]instanceof f?nn(e.children[n]):it(e.children[n]);e.ellipse instanceof V&&(x.strokeStyle=t||Ot(),x.beginPath(),x.ellipse(e.ellipse.center.x+l.x,e.ellipse.center.y+l.y,e.ellipse.radiusX,e.ellipse.radiusY,0,0,2*Math.PI),x.stroke())}function nn(e){H(e,Ot(),!1)}function p(){let e;r.proofHistory.length===0?e=new k:e=r.proofHistory[r.proofHistory.length-1].tree,rt(),_t.innerHTML=e.toString(),it(e.sheet)}function At(e,t){if(e instanceof f)H(e,t,!1);else if(e instanceof a){F(e,t);for(let n=0;n<e.children.length;n++)At(e.children[n],t)}}let et,l=new c(0,0),st;function on(e){et=new c(e.x-l.x,e.y-l.y),st=!1}function rn(e){st||(l=new c(e.x-et.x,e.y-et.y),d(r.tree))}function sn(){st=!0,d(r.tree)}const ln=document.getElementById("showRect"),cn=document.getElementById("mode");let He,Ye;function an(e){He=new c(e.clientX-l.x,e.clientY-l.y),Ye=!1}function un(e){const t=new a(new V(new c(0,0),0,0)),n=new c(e.clientX-l.x,e.clientY-l.y);if(d(r.tree),t.ellipse=Re(He,n),!Ye){const i=r.tree.canInsert(t)&&Q(t.ellipse)?m():h();F(t,i),ln.checked&&Nt(He,n,i)}}function fn(e){const t=new c(e.clientX-l.x,e.clientY-l.y),n=new a(Re(He,t));r.tree.canInsert(n)&&!Ye&&Q(n.ellipse)&&r.tree.insert(n),d(r.tree)}function dn(){Ye=!0,d(r.tree)}function Re(e,t){const n=new c((t.x-e.x)/2+e.x,(t.y-e.y)/2+e.y),o=e.x-t.x,i=e.y-t.y,u=Math.abs(o),g=Math.abs(i);let y,I;if(cn.value==="circumscribed"){const re=Math.floor(n.distance(t));I=Math.floor(re*(g/u)),y=Math.floor(re*(u/g))}else y=u/2,I=g/2;return new V(n,y,I)}function Q(e){return e.radiusX>15&&e.radiusY>15}const hn=document.getElementById("canvas"),Ft=hn.getContext("2d");if(Ft===null)throw Error("2d rendering context not supported");const wn=Ft,yn=document.getElementById("atomDisplay");let Ue,lt,D=Le("A",new c(0,0));function gn(e){new RegExp(/^[A-Za-z]$/).test(e.key)&&(D=Le(e.key,new c(D.origin.x,D.origin.y)),D.origin.x!==0&&D.origin.y!==0&&lt&&ct())}function pn(e){Ue=!1,lt=!0,D=Le(D.identifier,new c(e.clientX-l.x,e.clientY-l.y)),ct()}function xn(e){D=Le(D.identifier,new c(e.clientX-l.x,e.clientY-l.y)),ct()}function mn(e){D=Le(D.identifier,new c(e.clientX-l.x,e.clientY-l.y)),r.tree.canInsert(D)&&!Ue&&r.tree.insert(D),d(r.tree),lt=!1}function Mn(){Ue=!0,d(r.tree)}function Le(e,t){yn.innerHTML=e;const n=wn.measureText(e);return new f(e,new c(t.x,t.y),n.width,n.fontBoundingBoxDescent+n.actualBoundingBoxAscent)}function ct(){d(r.tree),Ue||(r.tree.canInsert(D)?H(D,m(),!0):H(D,h(),!0))}async function bn(e,t){const n=JSON.stringify(t,null,"	"),o=await e.createWritable();await o.write(n),await o.close()}function tt(e,t){const n=JSON.parse(t);if(e==="Draw"){const o=n.internalSheet.internalChildren;return gt(o)}else{const o=[];let i;for(i of n){const u=i.tree.internalSheet.internalChildren;o.push(new G(gt(u),i.appliedRule))}return o}}function gt(e){const t=new k,n=[];for(const o of e)Object.prototype.hasOwnProperty.call(o,"internalEllipse")?n.push(Xt(o)):n.push(vt(o));return t.sheet.children=n,t}function Xt(e){const t=new V(new c(e.internalEllipse.center.x,e.internalEllipse.center.y),e.internalEllipse.radiusX,e.internalEllipse.radiusY),n=[];for(const o of e.internalChildren)"internalEllipse"in o?n.push(Xt(o)):n.push(vt(o));return new a(t,n)}function vt(e){const t=e.internalIdentifier,n=new c(e.internalOrigin.x,e.internalOrigin.y);return new f(t,n,e.internalWidth,e.internalHeight)}function _(e,t,n){if(t.ellipse!==null){const o=q(t,n);if(!e.canInsert(o))return!1}for(let o=0;o<t.children.length;o++){if(t.children[o]instanceof a&&t.children[o].ellipse!==null&&!_(e,t.children[o],n))return!1;if(t.children[o]instanceof f){let i=t.children[o];if(i=O(i,n),!e.canInsert(i))return!1}}return!0}function N(e,t,n){if(e instanceof a&&e.ellipse!==null){const o=q(e,n);if(F(o,t),e.children.length!==0)for(let i=0;i<e.children.length;i++)N(e.children[i],t,n)}else if(e instanceof f){const o=O(e,n);H(o,t,!0)}}function De(e,t,n){const o=n||r.tree;if(e instanceof a&&e.ellipse!==null){const i=q(e,t);if(o.insert(i),e.children.length!==0)for(let u=0;u<e.children.length;u++)De(e.children[u],t,n)}else if(e instanceof f){const i=O(e,t);o.insert(i)}}function Pe(e,t){return e instanceof f?O(e,t):q(e,t)}function q(e,t){if(e.ellipse!==null)return new a(new V(new c(e.ellipse.center.x+t.x-l.x,e.ellipse.center.y+t.y-l.y),e.ellipse.radiusX,e.ellipse.radiusY));throw new Error("Cannot alter the position of a cut without an ellipse.")}function O(e,t){return new f(e.identifier,new c(e.origin.x+t.x-l.x,e.origin.y+t.y-l.y),e.width,e.height)}function $e(e,t){if(e instanceof f)H(e,t,!0);else if(e instanceof a){F(e,t);for(let n=0;n<e.children.length;n++)$e(e.children[n],t)}}let W,M=null,ne;function Tn(e){if(W=new c(e.x-l.x,e.y-l.y),M=r.tree.getLowestNode(W),M!==r.tree.sheet&&M!==null){const t=r.tree.getLowestParent(W);if(t!==null&&t.remove(W),M instanceof a&&M.children.length!==0){for(let n=0;n<M.children.length;n++)r.tree.insert(M.children[n]);M.children=[]}ne=!0}else ne=!1}function Pn(e){if(ne){const t=new c(e.x-W.x,e.y-W.y);if(M instanceof a){const n=q(M,t);d(r.tree);const o=r.tree.canInsert(n)?m():h();F(n,o)}else if(M instanceof f){const n=O(M,t);d(r.tree);const o=r.tree.canInsert(n)?m():h();H(n,o,!0)}}}function Cn(e){if(ne){const t=new c(e.x-W.x,e.y-W.y);if(M instanceof a){const n=q(M,t);r.tree.canInsert(n)?r.tree.insert(n):r.tree.insert(M)}else if(M instanceof f){const n=O(M,t);r.tree.canInsert(n)?r.tree.insert(n):r.tree.insert(M)}d(r.tree)}ne=!1}function Sn(){ne&&M!==null&&r.tree.insert(M),ne=!1,d(r.tree)}let j,S=null,oe;function En(e){if(j=new c(e.x-l.x,e.y-l.y),S=r.tree.getLowestNode(j),S!==r.tree.sheet&&S!==null){const t=r.tree.getLowestParent(j);t!==null&&t.remove(j),oe=!0}else oe=!1}function kn(e){if(oe){const t=new c(e.x-j.x,e.y-j.y);if(d(r.tree),S instanceof a){const n=_(r.tree,S,t)?m():h();N(S,n,t)}else if(S instanceof f){const n=O(S,t),o=r.tree.canInsert(n)?m():h();H(n,o,!0)}}}function In(e){if(oe){const t=new c(e.x-j.x,e.y-j.y);if(S instanceof a)_(r.tree,S,t)?De(S,t):r.tree.insert(S);else if(S instanceof f){const n=O(S,t);r.tree.canInsert(n)?r.tree.insert(n):r.tree.insert(S)}}d(r.tree),oe=!1}function Ln(){oe&&S!==null&&r.tree.insert(S),oe=!1,d(r.tree)}let ae,X=null,ue;function Dn(e){ae=new c(e.x-l.x,e.y-l.y);const t=r.tree.getLowestNode(ae);t!==r.tree.sheet&&t!==null?(t instanceof a?(X=q(t,new c(0,0)),X.children=[]):t instanceof f&&(X=t),ue=!0):ue=!1}function $n(e){if(ue){const t=new c(e.x-ae.x,e.y-ae.y);if(X instanceof a){const n=q(X,t);d(r.tree);const o=r.tree.canInsert(n)?m():h();F(n,o)}else if(X instanceof f){const n=O(X,t);d(r.tree);const o=r.tree.canInsert(n)?m():h();H(n,o,!0)}}}function On(e){if(ue){const t=new c(e.x-ae.x,e.y-ae.y);if(X instanceof a&&X.ellipse!==null){const n=q(X,t);r.tree.canInsert(n)&&r.tree.insert(n)}else if(X instanceof f){const n=O(X,t);r.tree.canInsert(n)&&r.tree.insert(n)}d(r.tree)}ue=!1}function Bn(){ue=!1,d(r.tree)}let fe,A=null,de;function Hn(e){fe=new c(e.x-l.x,e.y-l.y),A=r.tree.getLowestNode(fe),A!==r.tree.sheet&&A!==null?de=!0:de=!1}function Nn(e){if(de){const t=new c(e.x-fe.x,e.y-fe.y);if(d(r.tree),A instanceof a){const n=_(r.tree,A,t)?m():h();N(A,n,t)}else if(A instanceof f){const n=O(A,t),o=r.tree.canInsert(n)?m():h();H(n,o,!0)}}}function An(e){if(de){const t=new c(e.x-fe.x,e.y-fe.y);if(A instanceof a)_(r.tree,A,t)&&De(A,t);else if(A instanceof f){const n=O(A,t);r.tree.canInsert(n)&&r.tree.insert(n)}}d(r.tree),de=!1}function Fn(){de=!1,d(r.tree)}let pt,T=null,he;function Xn(e){pt=new c(e.x-l.x,e.y-l.y),T=r.tree.getLowestNode(pt),T!==null&&(he=!0,T instanceof f?H(T,h(),!0):F(T,h()))}function vn(e){const t=new c(e.x-l.x,e.y-l.y),n=r.tree.getLowestNode(t);T!==null&&T!==n&&(he=!0,d(r.tree),n===null?(T=null,he=!1):(T=n,T instanceof f?H(T,h(),!0):F(T,h())))}function Yn(e){const t=new c(e.x-l.x,e.y-l.y);if(he){const n=r.tree.getLowestParent(t);if(n!==null&&n.remove(t),T!==r.tree.sheet&&T instanceof a&&T.children.length!==0)for(let o=0;o<T.children.length;o++)r.tree.insert(T.children[o])}d(r.tree),T=null,he=!1}function Rn(){T=null,he=!1}let xt,Y=null,we;function Un(e){xt=new c(e.x-l.x,e.y-l.y),Y=r.tree.getLowestNode(xt),Y!==null&&(we=!0,$e(Y,h()))}function zn(e){const t=new c(e.x-l.x,e.y-l.y),n=r.tree.getLowestNode(t);Y!==null&&Y!==r.tree.getLowestNode(t)&&(we=!0,d(r.tree),n===null?(Y=null,we=!1):(Y=n,$e(Y,h())))}function qn(e){const t=new c(e.x-l.x,e.y-l.y);if(we){const n=r.tree.getLowestParent(t);n!==null?n.remove(t):r.tree.clear(),d(r.tree)}Y=null,we=!1}function Vn(){Y=null,we=!1}let ye,b=null,ge,Te;const Gn=document.getElementById("selectionString");function Wn(e){Te=new k(r.tree.sheet),r.selectForProof.sheet=new k().sheet,ye=new c(e.x-l.x,e.y-l.y),b=r.tree.getLowestNode(ye),Yt()}function jn(e){ge&&(d(r.tree),ye=new c(e.x-l.x,e.y-l.y),b=r.tree.getLowestNode(ye),Yt())}function Jn(){if(ge&&b!==null){if(b instanceof a&&b.ellipse===null)for(let e=0;e<b.children.length;e++)r.selectForProof.insert(b.children[e]);else r.selectForProof.insert(b);d(r.tree)}b=null,ge=!1}function Kn(){b=null,ge=!1,d(r.tree)}function Yt(){const e=new k;let t=!1;if(b!==null){if(ge=!0,b instanceof f||!b.isEqualTo(Te.sheet)){e.insert(b);const n=Te.getLowestParent(ye);n!==null&&(n.remove(ye),t=!0),d(Te)}else e.sheet=b,rt();b instanceof f?H(b,m(),!0):At(b,m()),t&&Te.insert(b)}else ge=!1;Gn.innerHTML=e.toString()}const Zn=document.getElementById("showRect");let Ne,ze,ee;function Qn(e){Ne=new c(e.clientX-l.x,e.clientY-l.y),ee=new k(r.getLastProofStep().tree.sheet),ze=!1}function _n(e){const t=new c(e.clientX-l.x,e.clientY-l.y),n=new a(Re(Ne,t)),o=new a(Rt(n.ellipse));if(p(),!ze&&n.ellipse!==null&&o.ellipse!==null){const u=ee.canInsert(n)&&Q(n.ellipse)&&ee.canInsert(o)&&Q(o.ellipse)?m():h();F(n,u),F(o,u),Zn.checked&&Nt(Ne,t,u)}}function eo(e){const t=new c(e.clientX-l.x,e.clientY-l.y);ee=new k(r.getLastProofStep().tree.sheet);const n=new a(Re(Ne,t)),o=new a(Rt(n.ellipse)),i=new G(ee,"Double Cut Insertion");!ze&&n.ellipse!==null&&o.ellipse!==null&&ee.canInsert(n)&&Q(n.ellipse)&&ee.canInsert(o)&&Q(o.ellipse)&&(i.tree.insert(n),i.tree.insert(o),r.proofHistory.push(i)),p()}function to(){ze=!0,p()}function Rt(e){return new V(e.center,Math.floor(e.radiusX*.8),Math.floor(e.radiusY*.8))}let Z=null,Ae,Ce;function no(e){const t=new c(e.x-l.x,e.y-l.y);Ce=new k(r.getLastProofStep().tree.sheet),Z=Ce.getLowestNode(t),Ut()}function oo(e){const t=new c(e.x-l.x,e.y-l.y);Z=Ce.getLowestNode(t),p(),Ut()}function ro(e){const t=new G(Ce,"Double Cut Deletion"),n=new c(e.x-l.x,e.y-l.y);if(Ae&&Z instanceof a){const o=t.tree.getLowestParent(n),i=Z.children[0];if(o!==null&&i instanceof a){o.remove(n);for(let u=0;u<i.children.length;u++)t.tree.insert(i.children[u])}r.proofHistory.push(t)}p()}function io(){Ae=!1,p()}function so(e){return e.children.length===1&&e.children[0]instanceof a&&Z!==Ce.sheet}function lo(e){F(e,h()),e.children[0]instanceof a&&F(e.children[0],h())}function Ut(){Z instanceof a&&so(Z)?(Ae=!0,lo(Z)):Ae=!1}let w,P,B,C,pe;function co(e){B=new k(r.getLastProofStep().tree.sheet);const t=r.selectForProof.sheet.children,n=new c(e.x-l.x,e.y-l.y);if(r.proofHistory.length>0&&t.length===1){pe=!0,w=t[0];const o=at(e,w),i=B.getLowestNode(n),u=B.getLowestParent(n);if(P=i instanceof f?u:i,o){const g=Pe(w,o);if(P!==null&&!P.containsNode(g))C=!1,N(w,h(),o);else if(P!==null&&P instanceof a&&P.ellipse!==null&&B.getLevel(P)%2===0){if(g instanceof a){C=!0;for(let y=0;y<P.children.length;y++)if(g.containsNode(P.children[y])){C=!1;break}}else C=!0;if(C){let y="";if(w instanceof a)y=_(B,w,o)?m():h();else if(w instanceof f){const I=Pe(w,o);y=B.canInsert(I)?m():h()}C=y===m(),N(w,y,o)}else N(w,h(),o)}else C=!1,N(w,h(),o)}}else C=!1,pe=!1,N(w,h(),n)}function ao(e){if(pe){const t=new c(e.x-l.x,e.y-l.y);p();const n=at(e,w),o=B.getLowestNode(t),i=B.getLowestParent(t);if(P=o instanceof f?i:o,n){const u=Pe(w,n);if(P!==null&&!P.containsNode(u))C=!1,N(w,h(),n);else if(P!==null&&P instanceof a&&P.ellipse!==null&&B.getLevel(P)%2===0){if(u instanceof a){C=!0;for(let g=0;g<P.children.length;g++)if(u.containsNode(P.children[g])){C=!1;break}}else C=!0;if(C){let g="";if(w instanceof a)g=_(B,w,n)?m():h();else if(w instanceof f){const y=Pe(w,n);g=B.canInsert(y)?m():h()}C=g===m(),N(w,g,n)}else N(w,h(),n)}else C=!1,N(w,h(),n)}}else C=!1}function uo(e){if(pe&&C){const t=at(e,w);if(t){if(w instanceof a)De(w,t,B);else if(w instanceof f){const n=Pe(w,t);B.insert(n)}r.proofHistory.push(new G(B,"Insertion"))}}p(),pe=!1}function fo(){pe=!1,p()}function at(e,t){if(t instanceof a&&t.ellipse!==null)return new c(e.x-t.ellipse.center.x-l.x,e.y-t.ellipse.center.y-l.y);if(t instanceof f)return new c(e.x-t.origin.x-l.x,e.y-t.origin.y-l.y)}let J=null,Se,xe;function ho(e){const t=new c(e.x-l.x,e.y-l.y);xe=new k(r.getLastProofStep().tree.sheet),J=xe.getLowestNode(t),zt()}function wo(e){const t=new c(e.x-l.x,e.y-l.y);J=xe.getLowestNode(t),p(),zt()}function yo(e){if(Se){const t=new G(xe,"Erasure"),n=new c(e.x-l.x,e.y-l.y),o=t.tree.getLowestParent(n);o!==null&&o.remove(n),r.proofHistory.push(t),p()}J=null,Se=!1}function go(){J=null,Se=!1,p()}function zt(){J!==xe.sheet&&J!==null&&xe.getLevel(J)%2===0?(Se=!0,$e(J,h())):Se=!1}let je=!0,Je=null,Ke=null,mt=s.none,Mt=s.none;const bt=document.getElementById("DrawButtons"),Tt=document.getElementById("ProofButtons");function po(){if(je=!je,je){bt.style.display="block",Xe.style.display="block",Tt.style.display="none",ve.style.display="none",r.modeState="Draw",Ke=JSON.stringify(r.proofHistory),Mt=r.toolState;let e=null;if(Je!==null&&(e=tt(r.modeState,Je)),e!==null)r.tree.sheet=e.sheet;else throw Error("invalid cached AEG");r.toolState=mt,d(r.tree)}else{bt.style.display="none",Xe.style.display="none",Tt.style.display="block",ve.style.display="block",r.modeState="Proof",Je=JSON.stringify(r.tree),mt=r.toolState;let e=null;Ke!==null&&(e=tt(r.modeState,Ke)),e!==null&&(r.proofHistory=e),r.toolState=Mt,p()}}let v,L=null,me;const se=new c(1,1);function xo(e){if(v=new c(e.x-l.x,e.y-l.y),L=r.tree.getLowestNode(v),L!==r.tree.sheet&&L instanceof a){me=!0;const t=r.tree.getLowestParent(v);t!==null&&t.remove(v);for(let n=0;n<L.children.length;n++)r.tree.insert(L.children[n]);To(),L.children=[]}}function mo(e){if(me){const t=new c((e.x-l.x-v.x)/2,(e.y-l.y-v.y)/2);if(L instanceof a){const n=qt(L,t);if(n.ellipse!==null){d(r.tree);const i=r.tree.canInsert(n)&&Q(n.ellipse)?m():h();F(n,i)}}}}function Mo(e){if(me){const t=new c((e.x-l.x-v.x)/2,(e.y-l.y-v.y)/2);if(L instanceof a){const n=qt(L,t);n.ellipse!==null&&(r.tree.canInsert(n)&&Q(n.ellipse)?r.tree.insert(n):r.tree.insert(L))}d(r.tree),me=!1}}function bo(){me&&L!==null&&r.tree.insert(L),me=!1,d(r.tree)}function qt(e,t){if(e.ellipse!==null)return new a(new V(new c(e.ellipse.center.x+t.x,e.ellipse.center.y+t.y),e.ellipse.radiusX+t.x*se.x,e.ellipse.radiusY+t.y*se.y));throw new Error("Cannot alter the position of a cut without an ellipse.")}function To(){if(L instanceof a&&L.ellipse!==null){const e=L.ellipse,t=[new c(e.center.x-e.radiusX,e.center.y),new c(e.center.x,e.center.y-e.radiusY),new c(e.center.x+e.radiusX,e.center.y),new c(e.center.x,e.center.y+e.radiusY)];t[0].distance(v)>=t[2].distance(v)?se.x=1:se.x=-1,t[1].distance(v)>=t[3].distance(v)?se.y=1:se.y=-1}}let nt,Fe,Ee;function Po(){Fe=new k(r.getLastProofStep().tree.sheet),nt=r.selectForProof.sheet,nt.children.length>0&&r.proofHistory.length===0&&Fe.sheet.isEmptySheet()&&(Ee=!0)}function Co(){Ee=!1,p()}function So(){Ee&&(Fe.sheet=nt,r.proofHistory.push(new G(Fe,"Copied from Draw Mode"))),Ee=!1,p()}function Eo(){Ee=!1,p()}let te,$=null,ot=null,ke,R;function ko(e){R=new k(r.getLastProofStep().tree.sheet),te=new c(e.x-l.x,e.y-l.y),$=R.getLowestNode(te),ot=R.getLowestParent(te),ke=$!==R.sheet&&$!==null}function Io(e){if(ke){const t=new c(e.x-te.x,e.y-te.y);p();const n=new c(e.x-l.x,e.y-l.y),o=Vt(t,n)?m():h();if($ instanceof a)N($,o,t);else if($ instanceof f){const i=O($,t);H(i,o,!0)}}}function Lo(e){if(ke){const t=new c(e.x-te.x,e.y-te.y);if(Vt(t,new c(e.x-l.x,e.y-l.y))){if($ instanceof a)De($,t,R);else if($ instanceof f){const n=O($,t);R.insert(n)}r.proofHistory.push(new G(R,"Iteration"))}}p(),ke=!1}function Do(){ke=!1,p()}function Vt(e,t){return ot!==null&&ot.containsPoint(t)&&($ instanceof a&&_(R,$,e)&&Gt(R.sheet,q($,e).ellipse)||$ instanceof f&&R.canInsert(O($,e)))}function Gt(e,t){for(let n=0;n<e.children.length;n++)if(e.children[n]instanceof a){if(e.children[n].ellipse instanceof V&&(t.contains(e.children[n].ellipse)||!Gt(e.children[n],t)))return!1}else if(e.children[n]instanceof f&&t.contains(e.children[n].calcRect()))return!1;return!0}let E=null,Ie,U;function $o(e){const t=new c(e.x-l.x,e.y-l.y);U=new k(r.getLastProofStep().tree.sheet),E=U.getLowestNode(t),Wt()}function Oo(e){const t=new c(e.x-l.x,e.y-l.y);E=U.getLowestNode(t),p(),Wt()}function Bo(e){if(Ie){const t=new c(e.x-l.x,e.y-l.y);if(E!==null&&ut(U.sheet,U.getLevel(E))){const n=U.getLowestParent(t);n instanceof a&&n.remove(t),r.proofHistory.push(new G(U,"Deiteration"))}}Ie=!1,p()}function Wt(){E!==null&&!(E instanceof a&&E.ellipse===null)&&ut(U.sheet,U.getLevel(E))?($e(E,h()),Ie=!0):Ie=!1}function Ho(){Ie=!1,E=null,p()}function ut(e,t){let n=null;for(let o=0;o<e.children.length;o++){if(e.children[o]instanceof a&&E instanceof a&&E.isEqualTo(e.children[o])&&E.ellipse!==e.children[o].ellipse)return!0;if(e.children[o]instanceof f&&E instanceof f&&e.children[o].identifier===E.identifier&&e.children[o].toString()!==E.toString())return!0;e.children[o]instanceof a&&e.children[o].containsNode(E)&&U.getLevel(e.children[o])<t&&(n=e.children[o])}return n!==null?ut(n,t):!1}const z=document.getElementById("canvas");z.width=window.innerWidth;z.height=window.innerHeight;const jt=z.getContext("2d");if(jt===null)throw Error("2d rendering context not supported");const No=jt;No.font="35pt arial";const Ze=document.getElementById("cutTools"),Pt=document.getElementById("atomTools"),Xe=document.getElementById("graphString"),ve=document.getElementById("proofString"),Ct=document.getElementById("toProofTools");window.addEventListener("keydown",vo);z.addEventListener("mousedown",Yo);z.addEventListener("mousemove",Ro);z.addEventListener("mouseup",Uo);z.addEventListener("mouseout",zo);z.addEventListener("mouseenter",qo);let ft=!1,dt=!0;window.atomTool=s.atomTool;window.cutTool=s.cutTool;window.dragTool=s.dragTool;window.saveMode=Jt;window.loadMode=Xo;window.moveSingleTool=s.moveSingleTool;window.moveMultiTool=s.moveMultiTool;window.copySingleTool=s.copySingleTool;window.copyMultiTool=s.copyMultiTool;window.deleteSingleTool=s.deleteSingleTool;window.deleteMultiTool=s.deleteMultiTool;window.copyFromDrawTool=s.copyFromDrawTool;window.pasteInProofTool=s.pasteInProofTool;window.doubleCutInsertionTool=s.doubleCutInsertionTool;window.resizeTool=s.resizeTool;window.doubleCutDeletionTool=s.doubleCutDeletionTool;window.insertionTool=s.insertionTool;window.erasureTool=s.erasureTool;window.iterationTool=s.iterationTool;window.deiterationTool=s.deiterationTool;window.setTool=Fo;window.setHighlight=Ao;window.toggleHandler=po;function Ao(e,t){const n=document.getElementById(t);switch(e){case"mousedown":n==null||n.classList.remove("no-highlight");break;case"mouseleave":n==null||n.classList.add("no-highlight");break}}const St=document.querySelectorAll(".toolButton");St.forEach(e=>{e.addEventListener("click",()=>{e.classList.add("toolButtonPressed"),St.forEach(t=>{t!==e&&t.classList.remove("toolButtonPressed")})})});function Fo(e){switch(r.toolState=e,Ze.style.display="none",Pt.style.display="none",Xe.style.display="none",ve.style.display="none",Ct.style.display="none",e<=11?(r.modeState="Draw",Xe.style.display="block"):(r.modeState="Proof",ve.style.display="block"),r.toolState){case s.atomTool:Pt.style.display="block";break;case s.cutTool:Ze.style.display="block";break;case s.copyFromDrawTool:Ct.style.display="block";break;case s.doubleCutInsertionTool:Ze.style.display="block";break}}async function Jt(){let e,t;if(r.modeState==="Draw"?(e="AEG Tree",t=r.tree):(e=r.proofHistory[0].tree.toString()+"→"+r.getLastProofStep().tree.toString(),t=r.proofHistory),"showSaveFilePicker"in window){const n=await window.showSaveFilePicker({excludeAcceptAllOption:!0,suggestedName:e,startIn:"downloads",types:[{description:"JSON Files",accept:{"text/json":[".json"]}}]});bn(n,t)}else{const n=document.createElement("a");n.href=JSON.stringify(t,null,"	"),n.download=e+".json",n.click()}}async function Xo(){const[e]=await window.showOpenFilePicker({excludeAcceptAllOption:!0,multiple:!1,startIn:"downloads",types:[{description:"JSON Files",accept:{"text/json":[".json"]}}]}),t=await e.getFile(),n=new FileReader;n.addEventListener("load",()=>{const o=n.result;if(typeof o=="string"){const i=tt(r.modeState,o);r.modeState==="Draw"?(r.tree=i,d(r.tree)):r.modeState==="Proof"&&(r.proofHistory=i,p())}else throw Error("Loading failed because reading the file was unsuccessful")}),n.readAsText(t)}function vo(e){if(e.ctrlKey&&e.key==="s")e.preventDefault(),Jt();else switch(r.toolState){case s.atomTool:gn(e);break}}function Yo(e){switch(r.toolState){case s.cutTool:an(e);break;case s.atomTool:pn(e);break;case s.dragTool:on(e);break;case s.moveSingleTool:Tn(e);break;case s.moveMultiTool:En(e);break;case s.copySingleTool:Dn(e);break;case s.copyMultiTool:Hn(e);break;case s.deleteSingleTool:Xn(e);break;case s.deleteMultiTool:Un(e);break;case s.resizeTool:xo(e);break;case s.copyFromDrawTool:Wn(e);break;case s.pasteInProofTool:Po();break;case s.doubleCutInsertionTool:Qn(e);break;case s.doubleCutDeletionTool:no(e);break;case s.insertionTool:co(e);break;case s.erasureTool:ho(e);break;case s.iterationTool:ko(e);break;case s.deiterationTool:$o(e);break}ft=!0}function Ro(e){if(ft&&dt)switch(r.toolState){case s.cutTool:un(e);break;case s.atomTool:xn(e);break;case s.dragTool:rn(e);break;case s.moveSingleTool:Pn(e);break;case s.moveMultiTool:kn(e);break;case s.copySingleTool:$n(e);break;case s.copyMultiTool:Nn(e);break;case s.deleteSingleTool:vn(e);break;case s.deleteMultiTool:zn(e);break;case s.resizeTool:mo(e);break;case s.copyFromDrawTool:jn(e);break;case s.pasteInProofTool:Co();break;case s.doubleCutInsertionTool:_n(e);break;case s.doubleCutDeletionTool:oo(e);break;case s.insertionTool:ao(e);break;case s.erasureTool:wo(e);break;case s.iterationTool:Io(e);break;case s.deiterationTool:Oo(e);break}}function Uo(e){switch(r.toolState){case s.cutTool:fn(e);break;case s.atomTool:mn(e);break;case s.moveSingleTool:Cn(e);break;case s.moveMultiTool:In(e);break;case s.copySingleTool:On(e);break;case s.copyMultiTool:An(e);break;case s.deleteSingleTool:Yn(e);break;case s.deleteMultiTool:qn(e);break;case s.resizeTool:Mo(e);break;case s.copyFromDrawTool:Jn();break;case s.pasteInProofTool:So();break;case s.doubleCutInsertionTool:eo(e);break;case s.doubleCutDeletionTool:ro(e);break;case s.insertionTool:uo(e);break;case s.erasureTool:yo(e);break;case s.iterationTool:Lo(e);break;case s.deiterationTool:Bo(e);break}ft=!1}function zo(){switch(r.toolState){case s.cutTool:dn();break;case s.atomTool:Mn();break;case s.dragTool:sn();break;case s.moveSingleTool:Sn();break;case s.moveMultiTool:Ln();break;case s.copySingleTool:Bn();break;case s.copyMultiTool:Fn();break;case s.deleteSingleTool:Rn();break;case s.deleteMultiTool:Vn();break;case s.resizeTool:bo();break;case s.copyFromDrawTool:Kn();break;case s.pasteInProofTool:Eo();break;case s.doubleCutInsertionTool:to();break;case s.doubleCutDeletionTool:io();break;case s.insertionTool:fo();break;case s.erasureTool:go();break;case s.iterationTool:Do();break;case s.deiterationTool:Ho();break}dt=!1}function qo(){dt=!0}function Vo(){z.width=window.innerWidth,z.height=window.innerHeight}window.onresize=Vo;
