(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const g of u.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function n(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerPolicy&&(u.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?u.credentials="include":i.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(i){if(i.ep)return;i.ep=!0;const u=n(i);fetch(i.href,u)}})();class a{constructor(t,n){if(this.x=t,this.y=n,!Number.isFinite(this.x)||!Number.isFinite(this.y))throw new Error("NaN or Infinity value(s) were passed in constructing a Point.")}set(t,n){if(!Number.isFinite(t)||!Number.isFinite(n))throw new Error("NaN or Infinity value(s) were passed in setting "+this+"'s coords.");this.x=t,this.y=n}distance(t){const n=this.x-t.x,o=this.y-t.y;return Math.sqrt(n*n+o*o)}toString(){return"("+this.x+", "+this.y+")"}}function He(e,t){return In(e,t)||Be(t,e)}function In(e,t){if(e instanceof Pe)return t instanceof Pe?cn(e,t):an(t,e);if(t instanceof Pe)return an(e,t);if(cn(e.boundingBox,t.boundingBox)||Be(t.boundingBox,e.boundingBox)){const n=Pn(e);let o;for(let i=0;i<n.length;i++)if(o=ht(t,n[i]),o<=0)return!0;return!1}return!1}function an(e,t){const n=t.getCorners(),o=nt(e,n[0].x,1),i=nt(e,n[1].x,1),u=nt(e,n[0].x,-1),g=nt(e,n[1].x,-1);if(n[0].y<o&&o<n[2].y||n[0].y<u&&u<n[2].y||n[0].y<i&&i<n[2].y||n[0].y<g&&g<n[2].y)return!0;const f=-1/Math.pow(e.radiusX,2),m=2*e.center.x/Math.pow(e.radiusX,2),d=-Math.pow(e.center.x,2)/Math.pow(e.radiusX,2)+1-Math.pow((n[0].y-e.center.y)/e.radiusY,2),y=-Math.pow(e.center.x,2)/Math.pow(e.radiusX,2)+1-Math.pow((n[2].y-e.center.y)/e.radiusY,2),B=(-m+Math.sqrt(Math.pow(m,2)-4*f*d))/(2*f),E=(-m-Math.sqrt(Math.pow(m,2)-4*f*d))/(2*f),$=(-m+Math.sqrt(Math.pow(m,2)-4*f*y))/(2*f),Qe=(-m-Math.sqrt(Math.pow(m,2)-4*f*y))/(2*f);return!isNaN(B)&&n[0].x<B&&B<n[1].x||!isNaN(E)&&n[0].x<E&&E<n[1].x||!isNaN($)&&n[0].x<$&&$<n[1].x||!isNaN(Qe)&&n[0].x<Qe&&Qe<n[1].x}function Be(e,t){if(e instanceof Pe)if(t instanceof Pe){const n=t.getCorners();for(let o=0;o<4;o++)if(!$t(e,n[o]))return!1;return!0}else{const n=so(t);for(let o=0;o<4;o++)if(!$t(e,n[o]))return!1;return!0}else if(t instanceof Pe){const n=t.getCorners();let o;for(let i=0;i<4;i++)if(o=ht(e,n[i]),!(o<0))return!1;return!0}else{const n=Pn(t);let o;for(let i=0;i<n.length;i++)if(o=ht(e,n[i]),!(o<0))return!1;return!0}}function cn(e,t){const n=e.getCorners(),o=t.getCorners();return(n[0].y<=o[0].y&&n[2].y>=o[0].y||n[0].y<=o[2].y&&n[2].y>=o[2].y||o[0].y<=n[0].y&&o[2].y>=n[0].y||o[0].y<=n[2].y&&o[2].y>=n[2].y)&&(n[0].x<=o[0].x&&n[1].x>=o[0].x||n[0].x<=o[1].x&&n[1].x>=o[1].x||o[0].x<=n[0].x&&o[1].x>=n[0].x||o[0].x<=n[1].x&&o[1].x>=n[1].x)}function $t(e,t){const n=e.getCorners();return n[0].x<t.x&&n[1].x>t.x&&n[0].y<t.y&&n[2].y>t.y}function ht(e,t){return Math.pow(t.x-e.center.x,2)/Math.pow(e.radiusX,2)+Math.pow(t.y-e.center.y,2)/Math.pow(e.radiusY,2)-1}function so(e){return[new a(e.center.x,e.center.y-e.radiusY),new a(e.center.x+e.radiusX,e.center.y),new a(e.center.x,e.center.y+e.radiusY),new a(e.center.x-e.radiusX,e.center.y)]}function Pn(e){const t=[];let n,o,i=1;for(let u=0;u<360;u++)n=e.center.x+e.radiusX*Math.cos(u*(Math.PI/180)),u>180&&(i=-1),o=nt(e,n,i),t[u]=new a(n,o);return t}function nt(e,t,n){return e.radiusX===0||e.radiusY===0?e.center.y:n*e.radiusY*Math.sqrt(1-Math.pow((t-e.center.x)/e.radiusX,2))+e.center.y}class Pe{constructor(t,n,o){if(!Number.isFinite(n)||!Number.isFinite(o))throw new Error("Infinity/NaN passed in for width/height while constructing a Rectangle.");if(n!==void 0&&n<0)throw new Error("Negative value passed for width while constructing a Rectangle.");if(o!==void 0&&o<0)throw new Error("Negative value passed for height while constructing a Rectangle.");this.startVertex=t,this.width=n,this.height=o}getCorners(){const t=[this.startVertex];return t.push(new a(this.startVertex.x+this.width,this.startVertex.y)),t.push(new a(this.startVertex.x+this.width,this.startVertex.y+this.height)),t.push(new a(this.startVertex.x,this.startVertex.y+this.height)),t}containsPoint(t){return $t(this,t)}overlaps(t){return He(this,t)}contains(t){return Be(this,t)}toString(){return"Rectangle with top left vertex at: "+this.startVertex.toString()+", w: "+this.width+", h: "+this.height}}class h{constructor(t,n,o,i){if(t.length!==1)throw new Error("String of length "+t.length+" passed in as identifier in AtomNode constructor, which is not of length 1.");if(!/^[A-Za-z]$/.test(t))throw new Error(t+" not contained in Latin alphabet passed in as identifier in AtomNode constructor.");this.internalIdentifier=t,this.internalOrigin=n,this.internalWidth=o,this.internalHeight=i}copy(){return new h(this.internalIdentifier,new a(this.internalOrigin.x,this.internalOrigin.y),this.internalWidth,this.internalHeight)}get width(){return this.internalWidth}set width(t){this.internalWidth=t}get height(){return this.internalHeight}set height(t){this.internalHeight=t}get identifier(){return this.internalIdentifier}set identifier(t){this.internalIdentifier=t}get origin(){return this.internalOrigin}set origin(t){this.internalOrigin=t}containsPoint(t){return this.calcRect().containsPoint(t)}calcRect(){return new Pe(new a(this.internalOrigin.x,this.internalOrigin.y),this.internalWidth,this.internalHeight)}isEqualTo(t){return this.identifier===t.identifier}toString(){return"An atom representing the proposition: "+this.internalIdentifier+" and Boundary box of: "+this.calcRect().toString()}}class de{constructor(t,n,o){if(this.center=t,this.radiusX=n,this.radiusY=o,!Number.isFinite(this.radiusX)||!Number.isFinite(this.radiusY))throw new Error("A radius passed into an Ellipse construction was NaN or Infinity.");if(this.radiusX!==void 0&&this.radiusX<0)throw new Error("Horizontal radius in an Ellipse construction was negative.");if(this.radiusY!==void 0&&this.radiusY<0)throw new Error("Vertical radius in an Ellipse construction was negative.");const i=new a(this.center.x-this.radiusX,this.center.y-this.radiusY);this.boundingBox=new Pe(i,this.radiusX*2,this.radiusY*2)}containsPoint(t){return ht(this,t)<0}overlaps(t){return He(this,t)}contains(t){return Be(this,t)}toString(){return"An ellipse with Center at: "+this.center.toString()+", Horizontal radius: "+this.radiusX+", Vertical radius: "+this.radiusY+", Bounding box: "+this.boundingBox.toString()}}class c{constructor(t,n){this.internalEllipse=t,this.internalChildren=n??[]}copy(){let t;const n=[];if(this.ellipse!==null?t=new de(new a(this.ellipse.center.x,this.ellipse.center.y),this.ellipse.radiusX,this.ellipse.radiusY):t=null,this.children.length>0)for(let o=0;o<this.children.length;o++){const i=this.children[o];i instanceof h,n.push(i.copy())}return new c(t,n)}get ellipse(){return this.internalEllipse}set ellipse(t){this.internalEllipse=t}get children(){return this.internalChildren}set children(t){this.internalChildren=t}set child(t){this.internalChildren.push(t)}clear(){this.internalChildren=[]}isEmptySheet(){return this.internalEllipse===null&&this.internalChildren.length===0}getCurrentCut(t){for(let n=0;n<this.internalChildren.length;n++){const o=this.internalChildren[n];if(o instanceof c&&o.containsNode(t))return o.getCurrentCut(t)}return this}containsPoint(t){return this.internalEllipse===null?!0:this.internalEllipse.containsPoint(t)}containsNode(t){return this.internalEllipse===null?!0:t instanceof h?Be(this.internalEllipse,t.calcRect()):Be(this.internalEllipse,t.internalEllipse)}getLowestNode(t){if(!this.containsPoint(t))return null;for(let n=0;n<this.internalChildren.length;n++)if(this.internalChildren[n].containsPoint(t))return this.internalChildren[n]instanceof h||this.internalChildren[n]instanceof c&&this.internalChildren[n].children.length===0?this.internalChildren[n]:this.internalChildren[n].getLowestNode(t);return this}getLowestParent(t){if(!this.containsPoint(t))throw new Error("This parent "+this.toString+" does not contain the point.");for(let n=0;n<this.internalChildren.length;n++)if(this.internalChildren[n].containsPoint(t)){if(this.internalChildren[n]instanceof h||this.internalChildren[n]instanceof c&&this.internalChildren[n].children.length===0)return this;{const o=this.internalChildren[n];for(let i=0;i<o.children.length;i++)if(o.children[i].containsPoint(t))return o.getLowestParent(t);return this}}return null}getLevel(t,n){for(let o=0;o<this.internalChildren.length;o++){if(this.internalChildren[o]===t)return n;if(this.internalChildren[o]instanceof c&&this.internalChildren[o].containsNode(t))return this.internalChildren[o].getLevel(t,n+1)}return-1}remove(t){if(!this.containsPoint(t))return!1;for(let n=0;n<this.children.length;n++)if(this.children[n].containsPoint(t)){if(this.children[n]instanceof h||this.children[n]instanceof c&&this.children[n].children.length===0)return this.children.splice(n,1),!0;for(let o=0;o<this.children[n].children.length;o++)if(this.children[n].children[o].containsPoint(t))if(this.children[n].children[o]instanceof h)this.children[n].children.splice(o,1);else return this.children[n].children[o].remove(t);return this.children.splice(n,1),!0}return!1}isEqualTo(t){if(this.children.length===t.children.length){if(this.children.length===0)return!0;const n=this.copy().children,o=t.copy().children;for(let i=0;i<n.length;i++)for(let u=0;u<o.length;u++){if(n[i]instanceof h&&o[u]instanceof h&&n[i].isEqualTo(o[u])||n[i]instanceof c&&o[u]instanceof c&&n[i].isEqualTo(o[u])){n.splice(i,1),o.splice(u,1),i--;break}if(u===o.length-1)return!1}return n.length===0&&o.length===0}return!1}toFormulaString(){let t="";for(const n of this.internalChildren)n instanceof h?t+=n.identifier:n instanceof c&&(t+=n.toFormulaString()),t+=" ";return t=t.slice(0,-1),this.internalEllipse===null?t="["+t+"]":t="("+t+")",t}toString(){let t;return this.internalEllipse===null?t="Sheet of Assertion of the AEG Tree":t="A cut node with boundary box of "+this.internalEllipse.toString(),this.internalChildren.length>0&&(t+=", With nested nodes: "+this.internalChildren.toString()),t}}class I{constructor(t){t!==void 0?(this.internalSheet=t.copy(),this.internalSheet.ellipse=null):this.internalSheet=new c(null)}get sheet(){return this.internalSheet}set sheet(t){this.internalSheet=t}getLowestParent(t){return this.internalSheet.getLowestParent(t)}getLowestNode(t){return this.internalSheet.getLowestNode(t)}getLevel(t){return this.internalSheet.getLevel(t,0)}verify(){return this.verifyAEG(this.internalSheet)}verifyAEG(t){for(let n=0;n<t.children.length;n++){if(!t.containsNode(t.children[n]))return!1;for(let o=n+1;o<t.children.length;o++)if(this.overlaps(t.children[n],t.children[o]))return!1}for(let n=0;n<t.children.length;n++)if(t.children[n]instanceof c&&!this.verifyAEG(t.children[n]))return!1;return!0}canInsert(t){const n=this.internalSheet.getCurrentCut(t);for(let o=0;o<n.children.length;o++)if(this.intersects(t,n.children[o]))return!1;return!0}insert(t){if(!this.canInsert(t))throw new Error("Insertion failed. "+t+" had a collision.");const n=this.internalSheet.getCurrentCut(t),o=[...n.children];if(n.child=t,t instanceof c)for(let i=o.length-1;i>=0;i--)t.containsNode(o[i])&&(t.child=o[i],n.children.splice(i,1));return!0}remove(t){return this.internalSheet.remove(t)}clear(){this.internalSheet.clear()}intersects(t,n){const o=t instanceof h?t.calcRect():t.ellipse,i=n instanceof h?n.calcRect():n.ellipse;return In(o,i)}overlaps(t,n){let o,i;return t instanceof h?n instanceof h?He(t.calcRect(),n.calcRect()):(o=n.ellipse,He(t.calcRect(),o)):n instanceof h?(o=t.ellipse,He(o,n.calcRect())):(o=t.ellipse,i=n.ellipse,He(o,i))}isEqualTo(t){return this.sheet.isEqualTo(t.sheet)}toString(){return this.internalSheet.toFormulaString()}}var k=(e=>(e[e.CLEAR=0]="CLEAR",e[e.DC_INSERT=1]="DC_INSERT",e[e.DC_DELETE=2]="DC_DELETE",e[e.MOVE_SINGLE=3]="MOVE_SINGLE",e[e.MOVE_MULTI=4]="MOVE_MULTI",e[e.ITERATION=5]="ITERATION",e[e.DEITERATION=6]="DEITERATION",e[e.INSERTION=7]="INSERTION",e[e.ERASURE=8]="ERASURE",e[e.RESIZE=9]="RESIZE",e[e.PASTE_GRAPH=10]="PASTE_GRAPH",e))(k||{});class W{constructor(t,n){this.appliedRule=n??0,this.tree=new I(t==null?void 0:t.sheet),this.index=r.proof.length}}const lo={[k.CLEAR]:"",[k.DC_INSERT]:"dot-circle-o",[k.DC_DELETE]:"times-circle",[k.MOVE_SINGLE]:"mouse-pointer",[k.MOVE_MULTI]:"arrows",[k.ITERATION]:"expand",[k.DEITERATION]:"compress",[k.INSERTION]:"plus",[k.ERASURE]:"trash",[k.RESIZE]:"arrows-alt",[k.PASTE_GRAPH]:"files-o"};function kn(e,t){var f;const n=document.createElement("div");n.className="row";const o=t||r.proof.length;n.id="Row: "+o;const i=document.createElement("button");i.type="button",i.id="Step: "+r.proof.length,i.className="proofNodeButton",i.title=e.tree.toString(),i.onclick=function(){Ut(e)};const u=document.createElement("Text"),g=lo[e.appliedRule];u.className="fa fa-"+g,i.appendChild(u),n.appendChild(i),(f=document.getElementById("proofHistoryBar"))==null||f.appendChild(n)}function Ut(e){r.currentProofStep=e,T()}function Ht(e){var t;for(let n=r.proof.length;n>e+1;n--)(t=document.getElementById("Row: "+n))==null||t.remove()}function un(){var e;(e=document.getElementById("Row: "+(r.proof.length+1)))==null||e.remove()}var te=(e=>(e[e.CLEAR=0]="CLEAR",e[e.DRAW_ATOM=1]="DRAW_ATOM",e[e.DRAW_CUT=2]="DRAW_CUT",e[e.MOVE_SINGLE=3]="MOVE_SINGLE",e[e.MOVE_MULTI=4]="MOVE_MULTI",e[e.COPY_SINGLE=5]="COPY_SINGLE",e[e.COPY_MULTI=6]="COPY_MULTI",e[e.DELETE_SINGLE=7]="DELETE_SINGLE",e[e.DELETE_MULTI=8]="DELETE_MULTI",e[e.RESIZE=9]="RESIZE",e[e.COPY_GRAPH=10]="COPY_GRAPH",e))(te||{});class ao{constructor(t,n){this.tree=new I(t==null?void 0:t.sheet)??new I,this.appliedMove=n??0}}var s=(e=>(e[e.none=0]="none",e[e.atomTool=1]="atomTool",e[e.cutTool=2]="cutTool",e[e.dragTool=3]="dragTool",e[e.drawMoveSingleTool=4]="drawMoveSingleTool",e[e.drawMoveMultiTool=5]="drawMoveMultiTool",e[e.copySingleTool=6]="copySingleTool",e[e.copyMultiTool=7]="copyMultiTool",e[e.deleteSingleTool=8]="deleteSingleTool",e[e.deleteMultiTool=9]="deleteMultiTool",e[e.resizeTool=10]="resizeTool",e[e.copyFromDrawTool=11]="copyFromDrawTool",e[e.pasteInProofTool=12]="pasteInProofTool",e[e.doubleCutInsertionTool=13]="doubleCutInsertionTool",e[e.doubleCutDeletionTool=14]="doubleCutDeletionTool",e[e.insertionTool=15]="insertionTool",e[e.erasureTool=16]="erasureTool",e[e.proofMoveSingleTool=17]="proofMoveSingleTool",e[e.proofMoveMultiTool=18]="proofMoveMultiTool",e[e.proofResizeTool=19]="proofResizeTool",e[e.iterationTool=20]="iterationTool",e[e.deiterationTool=21]="deiterationTool",e[e.proofClearTool=22]="proofClearTool",e[e.drawClearTool=23]="drawClearTool",e))(s||{});const q=class q{static pushToDrawStack(t){this.recentlyUndoneOrRedoneDrawMove&&(this.drawHistoryRedoStack=[],this.recentlyUndoneOrRedoneDrawMove=!1),this.drawHistoryUndoStack.push(new ao(this.tree,t))}static undoDrawStep(){const t=this.drawHistoryUndoStack.pop();if(t!==void 0){if(this.drawHistoryUndoStack[this.drawHistoryUndoStack.length-1]===void 0){this.tree=new I,p(this.tree),this.drawHistoryRedoStack.push(t);return}this.drawHistoryRedoStack.push(t),this.tree=new I(this.drawHistoryUndoStack[this.drawHistoryUndoStack.length-1].tree.sheet),p(this.tree),this.recentlyUndoneOrRedoneDrawMove=!0}}static redoDrawStep(){const t=this.drawHistoryRedoStack.pop();if(t!==void 0){if(this.drawHistoryRedoStack[this.drawHistoryRedoStack.length-1]===void 0){this.tree=new I(t.tree.sheet),p(this.tree),this.drawHistoryUndoStack.push(t);return}this.drawHistoryUndoStack.push(t),this.tree=new I(t.tree.sheet),p(this.tree),this.recentlyUndoneOrRedoneDrawMove=!0}}static undoProofStep(){if(this.proof.length<=1)return;const t=this.proof.pop();if(t!==void 0){if(this.proof.length===0){un();return}un(),this.proofHistoryRedoStack.push(t),Ut(this.proof[this.proof.length-1]),T(),this.recentlyUndoneOrRedoneProofMove=!0}}static redoProofStep(){if(this.proofHistoryRedoStack.length===0)return;const t=this.proofHistoryRedoStack.pop();if(t!==void 0){if(this.proofHistoryRedoStack[this.proofHistoryRedoStack.length-1]===void 0){this.pushToProof(t),T();return}this.recentlyUndoneOrRedoneProofMove=!1,this.pushToProof(t),Ut(t),T()}}static getLastProofStep(){return q.proof.length===0?new W(new I):q.proof[q.proof.length-1]}static pushToProof(t){var n;if(this.recentlyUndoneOrRedoneProofMove&&(this.proofHistoryRedoStack=[],this.recentlyUndoneOrRedoneProofMove=!1),t.appliedRule===k.PASTE_GRAPH)this.proof.pop(),(n=document.getElementById("Row: 1"))==null||n.remove(),t.index=0;else if(this.currentProofStep&&this.proof.length>0&&(!this.currentProofStep.tree.isEqualTo(this.proof[this.proof.length-1].tree)||this.currentProofStep.appliedRule!==this.proof[this.proof.length-1].appliedRule)){const o=this.currentProofStep.index;Ht(o),this.proof=this.proof.splice(0,o+1),t.index=this.proof.length}this.currentProofStep=t,this.proof.push(t),kn(t)}static clearProof(){Ht(-1),this.proof=[],this.pushToProof(new W),this.currentProofStep=this.proof[0]}};q.tree=new I,q.drawHistoryUndoStack=[],q.drawHistoryRedoStack=[],q.recentlyUndoneOrRedoneDrawMove=!1,q.proof=[],q.proofHistoryRedoStack=[],q.recentlyUndoneOrRedoneProofMove=!1,q.selectForProof=new I,q.toolState=0,q.modeState="Draw";let r=q;var tt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function co(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Cn={exports:{}};(function(e,t){(function(n,o){o()})(tt,function(){function n(d,y){return typeof y>"u"?y={autoBom:!1}:typeof y!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),y={autoBom:!y}),y.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function o(d,y,B){var E=new XMLHttpRequest;E.open("GET",d),E.responseType="blob",E.onload=function(){m(E.response,y,B)},E.onerror=function(){console.error("could not download file")},E.send()}function i(d){var y=new XMLHttpRequest;y.open("HEAD",d,!1);try{y.send()}catch{}return 200<=y.status&&299>=y.status}function u(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var y=document.createEvent("MouseEvents");y.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(y)}}var g=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof tt=="object"&&tt.global===tt?tt:void 0,f=g.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),m=g.saveAs||(typeof window!="object"||window!==g?function(){}:"download"in HTMLAnchorElement.prototype&&!f?function(d,y,B){var E=g.URL||g.webkitURL,$=document.createElement("a");y=y||d.name||"download",$.download=y,$.rel="noopener",typeof d=="string"?($.href=d,$.origin===location.origin?u($):i($.href)?o(d,y,B):u($,$.target="_blank")):($.href=E.createObjectURL(d),setTimeout(function(){E.revokeObjectURL($.href)},4e4),setTimeout(function(){u($)},0))}:"msSaveOrOpenBlob"in navigator?function(d,y,B){if(y=y||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(n(d,B),y);else if(i(d))o(d,y,B);else{var E=document.createElement("a");E.href=d,E.target="_blank",setTimeout(function(){u(E)})}}:function(d,y,B,E){if(E=E||open("","_blank"),E&&(E.document.title=E.document.body.innerText="downloading..."),typeof d=="string")return o(d,y,B);var $=d.type==="application/octet-stream",Qe=/constructor/i.test(g.HTMLElement)||g.safari,sn=/CriOS\/[\d]+/.test(navigator.userAgent);if((sn||$&&Qe||f)&&typeof FileReader<"u"){var Lt=new FileReader;Lt.onloadend=function(){var et=Lt.result;et=sn?et:et.replace(/^data:[^;]*;/,"data:attachment/file;"),E?E.location.href=et:location=et,E=null},Lt.readAsDataURL(d)}else{var ln=g.URL||g.webkitURL,Rt=ln.createObjectURL(d);E?E.location=Rt:location.href=Rt,E=null,setTimeout(function(){ln.revokeObjectURL(Rt)},4e4)}});g.saveAs=m.saveAs=m,e.exports=m})})(Cn);var uo=Cn.exports;const fo=co(uo);async function ho(e,t){const n=JSON.stringify(t,null,"	"),o=await e.createWritable();await o.write(n),await o.close()}function Bt(e,t){const n=JSON.parse(t);if(e==="Draw"){const o=n.internalSheet.internalChildren;return fn(o)}else{const o=[];let i;for(i of n){const u=i.tree.internalSheet.internalChildren;o.push(new W(fn(u),i.appliedRule))}return o}}function fn(e){const t=new I,n=[];for(const o of e)Object.prototype.hasOwnProperty.call(o,"internalEllipse")?n.push(Ln(o)):n.push(Rn(o));return t.sheet.children=n,t}function Ln(e){const t=new de(new a(e.internalEllipse.center.x,e.internalEllipse.center.y),e.internalEllipse.radiusX,e.internalEllipse.radiusY),n=[];for(const o of e.internalChildren)"internalEllipse"in o?n.push(Ln(o)):n.push(Rn(o));return new c(t,n)}function Rn(e){const t=e.internalIdentifier,n=new a(e.internalOrigin.x,e.internalOrigin.y);return new h(t,n,e.internalWidth,e.internalHeight)}function Et(e){return JSON.stringify(e,null,"	")}async function An(){let e,t;r.modeState==="Draw"?(e=r.tree.toString(),t=r.tree):(r.proof.length===1?e="One-Step Proof":e=r.proof[0].tree.toString()+" PROVES "+r.getLastProofStep().tree.toString(),t=r.proof);try{if("showSaveFilePicker"in window){const n=await window.showSaveFilePicker({excludeAcceptAllOption:!0,suggestedName:e,startIn:"downloads",types:[{accept:{"text/json":[".json"]}}]});ho(n,t)}else{const n=new Blob([Et(t)],{type:"text/json"});fo(n,e+".json")}}catch{}}function dn(e){const t=new FileReader;t.addEventListener("load",()=>{var o;const n=t.result;if(typeof n=="string"){const i=Bt(r.modeState,n);if(r.modeState==="Draw")r.tree=i,p(r.tree);else if(r.modeState==="Proof"){r.clearProof(),r.proof=i,(o=document.getElementById("Row: 1"))==null||o.remove();for(let u=0;u<r.proof.length;u++)kn(r.proof[u],u+1);r.currentProofStep=r.proof[r.proof.length-1],T()}}else console.log("Loading failed because reading the file was unsuccessful.")}),t.readAsText(e)}async function po(){try{if("showOpenFilePicker"in window){const[e]=await window.showOpenFilePicker({excludeAcceptAllOption:!0,multiple:!1,startIn:"downloads",types:[{accept:{"text/json":[".json"]}}]}),t=await e.getFile();dn(t)}else{const e=document.createElement("input");e.type="file",e.accept=".json",e.addEventListener("change",()=>{var n;const t=(n=e.files)==null?void 0:n.item(0);dn(t)}),e.click()}}catch{}}let Ft,l=new a(0,0),zt;function wo(){w("cursor: grab")}function go(e){w("cursor: grabbing"),Ft=new a(e.x-l.x,e.y-l.y),zt=!1}function yo(e){zt||(w("cursor: grabbing"),l=new a(e.x-Ft.x,e.y-Ft.y),Dn())}function mo(){w("cursor: grab")}function bo(){w("cursor: default"),zt=!0,Dn()}function Dn(){r.modeState==="Proof"?T():p(r.tree)}var On={exports:{}};(function(e,t){function n(){var g=document.querySelector("[data-toggle-theme]"),f=g?g.getAttribute("data-key"):null;(function(m=localStorage.getItem(f||"theme")){localStorage.getItem(f||"theme")&&(document.documentElement.setAttribute("data-theme",m),g&&[...document.querySelectorAll("[data-toggle-theme]")].forEach(d=>{d.classList.add(g.getAttribute("data-act-class"))}))})(),g&&[...document.querySelectorAll("[data-toggle-theme]")].forEach(m=>{m.addEventListener("click",function(){var d=m.getAttribute("data-toggle-theme");if(d){var y=d.split(",");document.documentElement.getAttribute("data-theme")==y[0]?y.length==1?(document.documentElement.removeAttribute("data-theme"),localStorage.removeItem(f||"theme")):(document.documentElement.setAttribute("data-theme",y[1]),localStorage.setItem(f||"theme",y[1])):(document.documentElement.setAttribute("data-theme",y[0]),localStorage.setItem(f||"theme",y[0]))}[...document.querySelectorAll("[data-toggle-theme]")].forEach(B=>{B.classList.toggle(this.getAttribute("data-act-class"))})})})}function o(){var g=document.querySelector("[data-set-theme='']"),f=g?g.getAttribute("data-key"):null;(function(m=localStorage.getItem(f||"theme")){if(m!=null&&m!="")if(localStorage.getItem(f||"theme")&&localStorage.getItem(f||"theme")!=""){document.documentElement.setAttribute("data-theme",m);var d=document.querySelector("[data-set-theme='"+m.toString()+"']");d&&([...document.querySelectorAll("[data-set-theme]")].forEach(y=>{y.classList.remove(y.getAttribute("data-act-class"))}),d.getAttribute("data-act-class")&&d.classList.add(d.getAttribute("data-act-class")))}else{var d=document.querySelector("[data-set-theme='']");d.getAttribute("data-act-class")&&d.classList.add(d.getAttribute("data-act-class"))}})(),[...document.querySelectorAll("[data-set-theme]")].forEach(m=>{m.addEventListener("click",function(){document.documentElement.setAttribute("data-theme",this.getAttribute("data-set-theme")),localStorage.setItem(f||"theme",document.documentElement.getAttribute("data-theme")),[...document.querySelectorAll("[data-set-theme]")].forEach(d=>{d.classList.remove(d.getAttribute("data-act-class"))}),m.getAttribute("data-act-class")&&m.classList.add(m.getAttribute("data-act-class"))})})}function i(){var g=document.querySelector("select[data-choose-theme]"),f=g?g.getAttribute("data-key"):null;(function(m=localStorage.getItem(f||"theme")){if(localStorage.getItem(f||"theme")){document.documentElement.setAttribute("data-theme",m);var d=document.querySelector("select[data-choose-theme] [value='"+m.toString()+"']");d&&[...document.querySelectorAll("select[data-choose-theme] [value='"+m.toString()+"']")].forEach(y=>{y.selected=!0})}})(),g&&[...document.querySelectorAll("select[data-choose-theme]")].forEach(m=>{m.addEventListener("change",function(){document.documentElement.setAttribute("data-theme",this.value),localStorage.setItem(f||"theme",document.documentElement.getAttribute("data-theme")),[...document.querySelectorAll("select[data-choose-theme] [value='"+localStorage.getItem(f||"theme")+"']")].forEach(d=>{d.selected=!0})})})}function u(g=!0){g===!0?document.addEventListener("DOMContentLoaded",function(f){n(),i(),o()}):(n(),i(),o())}e.exports={themeChange:u}})(On);var To=On.exports;const So=document.getElementById("theme-select"),Eo="#000000",xo="#009E73",Mo="#D55E00";To.themeChange();let vn=se("--good-placement"),Nn=se("--bad-placement"),$n=se("--canvas-items");function se(e){return getComputedStyle(document.body).getPropertyValue(e)}function Un(){setTimeout(()=>{vn=se("--good-placement"),Nn=se("--bad-placement"),$n=se("--canvas-items"),r.modeState==="Draw"?p(r.tree):T()})}So.addEventListener("input",()=>{Un()});window.addEventListener("DOMContentLoaded",()=>{Un()});function b(){return Nn}function S(){return vn}function _t(){return $n}function Io(){return se("--global-background")===Eo}function hn(){return se("--good-placement")===xo&&se("--bad-placement")===Mo}const Xt=52,Hn=26,pt=.5,Yt=[],Ce=[],wt={},Bn={},Fn={},Xn={},Yn={},Gn={},he=[],gt=document.getElementById("canvas"),qn=gt.getContext("2d");if(qn===null)throw Error("2d rendering context not supported.");const P=qn;P.font="35pt arial";const Po=document.getElementById("graphString"),ko=document.getElementById("proofString"),Co=document.getElementById("atomBox"),zn=document.getElementById("atomBoxes");zn.addEventListener("input",$o);const Lo="./atoms/";async function Ro(){for(let e=0;e<Xt;e++)e<Hn?Yt.push(String.fromCharCode(65+e)):Yt.push(String.fromCharCode(97+(Xt-e-1)))}async function Ao(){he[0]=wt,he[1]=Bn,he[2]=Xn,he[3]=Fn,he[4]=Gn,he[5]=Yn}async function Do(){Ce[0]=".png",Ce[1]="d.png",Ce[2]="nb.png",Ce[3]="ng.png",Ce[4]="cb.png",Ce[5]="cg.png"}async function Oo(){await Ro(),await Ao(),await Do();let e,t;for(let n=0;n<Xt;n++){e=Yt[n],t=Lo+e,n>=Hn&&(t+="_");for(let o=0;o<he.length;o++)he[o][e]=new Image,he[o][e].src=(await fetch(t+Ce[o])).url}}function vo(e){return new a(wt[e].width*pt,wt[e].height*pt)}function Y(e,t){const n=e.ellipse;if(n!==null){P.strokeStyle=t;const o=n.center;P.beginPath(),P.ellipse(o.x+l.x,o.y+l.y,n.radiusX,n.radiusY,0,0,2*Math.PI),P.stroke()}}function G(e,t,n){let o;const i=e.identifier;t===_t()?Io()?o=Bn[i]:o=wt[i]:t===S()?hn()?o=Yn[i]:o=Fn[i]:hn()?o=Gn[i]:o=Xn[i];const u=o.width*pt,g=o.height*pt;P.drawImage(o,e.origin.x+l.x,e.origin.y+l.y,u,g),(zn.checked||Co.checked&&n)&&(P.fillStyle=t,P.strokeStyle=t,P.beginPath(),P.rect(e.origin.x+l.x,e.origin.y+l.y,u,g),P.stroke())}function _n(e,t,n){P.beginPath(),P.strokeStyle=n;const o=e.x-t.x,i=e.y-t.y;P.rect(e.x+l.x,e.y+l.y,-o,-i),P.stroke()}function w(e){gt.style.cssText=e}function No(e,t,n){return e===S()?t:n}function O(e,t,n){w(No(e,t,n))}function $o(){p(r.tree)}function at(){P.clearRect(0,0,gt.width,gt.height)}function p(e,t){Po.innerHTML=e.toString(),at(),Vt(e.sheet),window.treeString=Et(e)}function Vt(e,t){for(let n=0;n<e.children.length;n++)e.children[n]instanceof h?Uo(e.children[n]):Vt(e.children[n]);e.ellipse instanceof de&&(P.strokeStyle=_t(),P.beginPath(),P.ellipse(e.ellipse.center.x+l.x,e.ellipse.center.y+l.y,e.ellipse.radiusX,e.ellipse.radiusY,0,0,2*Math.PI),P.globalCompositeOperation="destination-over",P.fillStyle=r.modeState==="Draw"&&r.tree.getLevel(e)%2===0||r.modeState==="Proof"&&r.currentProofStep.tree.getLevel(e)%2===0?se("--canvas-odd-bg"):se("--canvas-bg"),P.fill(),P.globalCompositeOperation="source-over",P.stroke())}function Uo(e){G(e,_t(),!1)}function T(){let e;r.proof.length===0||r.currentProofStep===void 0?e=new I:e=r.currentProofStep.tree,at(),ko.innerHTML=e.toString(),Vt(e.sheet)}function le(e,t){if(e instanceof h)G(e,t,!1);else if(e instanceof c){Y(e,t);for(let n=0;n<e.children.length;n++)le(e.children[n],t)}}function Vn(e,t){const n=new a(1,1);if(e instanceof c&&e.ellipse!==null){const o=e.ellipse,i=[new a(o.center.x-o.radiusX,o.center.y),new a(o.center.x,o.center.y-o.radiusY),new a(o.center.x+o.radiusX,o.center.y),new a(o.center.x,o.center.y+o.radiusY)];i[0].distance(t)>=i[2].distance(t)?n.x=1:n.x=-1,i[1].distance(t)>=i[3].distance(t)?n.y=1:n.y=-1}return n}let At=!0,Dt=null,Ot=null,pn=s.none,wn=s.none;const gn=document.getElementById("DrawButtons"),yn=document.getElementById("ProofButtons"),mn=document.getElementById("proofHistoryBar");function Ho(){if(At=!At,At){gn.style.display="block",Sn.style.display="block",yn.style.display="none",En.style.display="none",mn.style.display="none",r.modeState="Draw",Ot=JSON.stringify(r.proof),wn=r.toolState;let e=null;if(Dt!==null&&(e=Bt(r.modeState,Dt)),e!==null)r.tree.sheet=e.sheet;else throw Error("Invalidly cached AEG.");r.toolState=pn,p(r.tree)}else{gn.style.display="none",Sn.style.display="none",yn.style.display="block",En.style.display="block",mn.style.display="block",r.modeState="Proof",Dt=JSON.stringify(r.tree),pn=r.toolState,r.proof.length===0&&r.pushToProof(new W);let e=null;Ot!==null&&(e=Bt(r.modeState,Ot)),e!==null&&(r.proof=e),r.toolState=wn,T()}}let jt;function Bo(){jt=!0,at(),le(r.tree.sheet,b())}function Fo(){jt&&(r.tree=new I,p(r.tree),r.pushToDrawStack(te.CLEAR))}function Xo(){jt=!1,p(r.tree)}const Yo=document.getElementById("canvas"),Go=Yo.getContext("2d");if(Go===null)throw Error("2d rendering context not supported.");const jn=document.getElementById("atomDisplay");let xt,Wt,A=Wo();function qo(e){new RegExp(/^[A-Za-z]$/).test(e.key)&&(A=Mt(e.key,new a(A.origin.x,A.origin.y+A.height)),A.origin.x!==0&&A.origin.y!==0&&Wt&&Zt())}function zo(e){A!==void 0&&(xt=!1,Wt=!0,A=Mt(A.identifier,new a(e.clientX-l.x,e.clientY-l.y)),Zt())}function _o(e){A!==void 0&&(A=Mt(A.identifier,new a(e.clientX-l.x,e.clientY-l.y)),Zt())}function Vo(e){A!==void 0&&(w("cursor: default"),A=Mt(A.identifier,new a(e.clientX-l.x,e.clientY-l.y)),r.tree.canInsert(A)&&!xt&&(r.tree.insert(A),r.pushToDrawStack(te.DRAW_ATOM)),p(r.tree),Wt=!1)}function jo(){A!==void 0&&(w("cursor: default"),xt=!0,p(r.tree))}function Mt(e,t){jn.innerHTML=e;const n=vo(e),o=n.x,i=n.y;return new h(e,new a(t.x,t.y-i),o,i)}function Wo(){return jn.innerHTML="A",new h("A",new a(0,0),0,0)}function Zt(){p(r.tree),xt||(r.tree.canInsert(A)?(w("cursor: default"),G(A,S(),!0)):(w("cursor: no-drop"),G(A,b(),!0)))}const Zo=document.getElementById("mode");function ke(e,t,n){if(t.ellipse!==null){const o=ne(t,n);if(!e.canInsert(o))return!1}for(let o=0;o<t.children.length;o++){if(t.children[o]instanceof c&&t.children[o].ellipse!==null&&!ke(e,t.children[o],n))return!1;if(t.children[o]instanceof h){let i=t.children[o];if(i=D(i,n),!e.canInsert(i))return!1}}return!0}function j(e,t,n){if(e instanceof c&&e.ellipse!==null){const o=ne(e,n);if(Y(o,t),e.children.length!==0)for(let i=0;i<e.children.length;i++)j(e.children[i],t,n)}else if(e instanceof h){const o=D(e,n);G(o,t,!0)}}function ct(e,t,n){const o=n||r.tree;if(e instanceof c&&e.ellipse!==null){const i=ne(e,t);if(o.insert(i),e.children.length!==0)for(let u=0;u<e.children.length;u++)ct(e.children[u],t,n)}else if(e instanceof h){const i=D(e,t);o.insert(i)}}function rt(e,t){return e instanceof h?D(e,t):ne(e,t)}function ne(e,t){if(e.ellipse!==null)return new c(new de(new a(e.ellipse.center.x+t.x-l.x,e.ellipse.center.y+t.y-l.y),e.ellipse.radiusX,e.ellipse.radiusY));throw new Error("Cannot alter the position of a CutNode without no Ellipse.")}function Jt(e,t){if(e.ellipse!==null){const n=[];for(let o=0;o<e.children.length;o++)e.children[o]instanceof c?n.push(Jt(e.children[o],t)):e.children[o]instanceof h&&n.push(D(e.children[o],t));return new c(new de(new a(e.ellipse.center.x+t.x-l.x,e.ellipse.center.y+t.y-l.y),e.ellipse.radiusX,e.ellipse.radiusY),n)}else throw new Error("Cannot alter the position of a CutNode without an Ellipse.")}function D(e,t){return new h(e.identifier,new a(e.origin.x+t.x-l.x,e.origin.y+t.y-l.y),e.width,e.height)}function It(e,t,n){if(e.ellipse!==null)return new c(new de(new a(e.ellipse.center.x+t.x,e.ellipse.center.y+t.y),Math.abs(e.ellipse.radiusX+t.x*n.x),Math.abs(e.ellipse.radiusY+t.y*n.y)));throw new Error("Cannot alter the position of a CutNode without an Ellipse.")}function ut(e,t){for(let n=0;n<t.children.length;n++)e.canInsert(t.children[n])&&e.insert(t.children[n])}function Ue(e,t){t instanceof c&&t.ellipse===null?e.sheet=t:e.canInsert(t)&&(e.insert(t),t instanceof c&&t.children.length!==0&&ut(e,t),p(e))}function Pt(e,t){const n=new a((t.x-e.x)/2+e.x,(t.y-e.y)/2+e.y),o=e.x-t.x,i=e.y-t.y,u=Math.abs(o),g=Math.abs(i);let f,m;if(Zo.value==="circumscribed"){const d=Math.floor(n.distance(t));m=Math.floor(d*(g/u)),f=Math.floor(d*(u/g))}else f=u/2,m=g/2;return new de(n,f,m)}function De(e){return e.radiusX>15&&e.radiusY>15}const Jo=document.getElementById("showRect");let yt,kt;function Ko(){w("cursor: crosshair")}function Qo(e){yt=new a(e.clientX-l.x,e.clientY-l.y),kt=!1}function er(e){const t=new c(new de(new a(0,0),0,0)),n=new a(e.clientX-l.x,e.clientY-l.y);if(p(r.tree),t.ellipse=Pt(yt,n),!kt){const i=r.tree.canInsert(t)&&De(t.ellipse)?S():b();O(i,"cursor: crosshair","cursor: no-drop"),Y(t,i),Jo.checked&&_n(yt,n,i)}}function tr(e){w("cursor: crosshair");const t=new a(e.clientX-l.x,e.clientY-l.y),n=new c(Pt(yt,t));r.tree.canInsert(n)&&!kt&&De(n.ellipse)&&(r.tree.insert(n),r.pushToDrawStack(te.DRAW_CUT)),p(r.tree)}function nr(){w("cursor: default"),kt=!0,p(r.tree)}let Se,C=null,Oe;function or(e){if(Se=new a(e.x-l.x,e.y-l.y),C=r.tree.getLowestNode(Se),C!==r.tree.sheet&&C!==null){w("cursor: grabbing");const t=r.tree.getLowestParent(Se);if(t!==null&&t.remove(Se),C instanceof c&&C.children.length!==0){for(let n=0;n<C.children.length;n++)r.tree.insert(C.children[n]);C.children=[]}Oe=!0,p(r.tree),C instanceof h?G(C,S(),!0):Y(C,S())}else Oe=!1}function rr(e){if(Oe){const t=new a(e.x-Se.x,e.y-Se.y);if(C instanceof c){const n=ne(C,t);p(r.tree);const o=r.tree.canInsert(n)?S():b();Y(n,o),O(o,"cursor: grabbing","cursor: no-drop")}else if(C instanceof h){const n=D(C,t);p(r.tree);const o=r.tree.canInsert(n)?S():b();G(n,o,!0),O(o,"cursor: grabbing","cursor: no-drop")}}}function ir(e){if(w("cursor: default"),Oe){const t=new a(e.x-Se.x,e.y-Se.y);if(C instanceof c){const n=ne(C,t);r.tree.canInsert(n)?r.tree.insert(n):r.tree.insert(C)}else if(C instanceof h){const n=D(C,t);r.tree.canInsert(n)?r.tree.insert(n):r.tree.insert(C)}p(r.tree),r.pushToDrawStack(te.MOVE_SINGLE)}Oe=!1}function sr(){w("cursor: default"),Oe&&C!==null&&r.tree.insert(C),Oe=!1,p(r.tree)}let Ee,N=null,ve;function lr(e){if(Ee=new a(e.x-l.x,e.y-l.y),N=r.tree.getLowestNode(Ee),N!==r.tree.sheet&&N!==null){w("cursor: grabbing");const t=r.tree.getLowestParent(Ee);t!==null&&t.remove(Ee),ve=!0,p(r.tree),le(N,S())}else ve=!1}function ar(e){if(ve){const t=new a(e.x-Ee.x,e.y-Ee.y);if(p(r.tree),N instanceof c){const n=ke(r.tree,N,t)?S():b();j(N,n,t),O(n,"cursor: grabbing","cursor: no-drop")}else if(N instanceof h){const n=D(N,t),o=r.tree.canInsert(n)?S():b();G(n,o,!0),O(o,"cursor: grabbing","cursor: no-drop")}}}function cr(e){if(w("cursor: default"),ve){const t=new a(e.x-Ee.x,e.y-Ee.y);if(N instanceof c)ke(r.tree,N,t)?ct(N,t):r.tree.insert(N);else if(N instanceof h){const n=D(N,t);r.tree.canInsert(n)?r.tree.insert(n):r.tree.insert(N)}r.pushToDrawStack(te.MOVE_MULTI)}p(r.tree),ve=!1}function ur(){w("cursor: default"),ve&&N!==null&&r.tree.insert(N),ve=!1,p(r.tree)}let xe,Q=null,Fe;function fr(e){xe=new a(e.x-l.x,e.y-l.y);const t=r.tree.getLowestNode(xe),n=new a(e.x-xe.x,e.y-xe.y);t!==r.tree.sheet&&t!==null?(w("cursor: copy"),t instanceof c?(Q=ne(t,n),Q.children=[]):t instanceof h&&(Q=t),Fe=!0):Fe=!1}function dr(e){if(Fe){const t=new a(e.x-xe.x,e.y-xe.y);if(Q instanceof c){const n=ne(Q,t);p(r.tree);const o=r.tree.canInsert(n)?S():b();Y(n,o),O(o,"cursor: grabbing","cursor: no-drop")}else if(Q instanceof h){const n=D(Q,t);p(r.tree);const o=r.tree.canInsert(n)?S():b();G(n,o,!0),O(o,"cursor: grabbing","cursor: no-drop")}}}function hr(e){if(w("cursor: default"),Fe){const t=new a(e.x-xe.x,e.y-xe.y);if(Q instanceof c&&Q.ellipse!==null){const n=ne(Q,t);r.tree.canInsert(n)&&r.tree.insert(n)}else if(Q instanceof h){const n=D(Q,t);r.tree.canInsert(n)&&r.tree.insert(n)}p(r.tree),r.pushToDrawStack(te.COPY_SINGLE)}Fe=!1}function pr(){w("cursor: default"),Fe=!1,p(r.tree)}let Xe,J=null,Ye;function wr(e){Xe=new a(e.x-l.x,e.y-l.y),J=r.tree.getLowestNode(Xe),J!==r.tree.sheet&&J!==null?(w("cursor: copy"),Ye=!0):Ye=!1}function gr(e){if(Ye){const t=new a(e.x-Xe.x,e.y-Xe.y);if(p(r.tree),J instanceof c){const n=ke(r.tree,J,t)?S():b();j(J,n,t),O(n,"cursor: grabbing","cursor: no-drop")}else if(J instanceof h){const n=D(J,t),o=r.tree.canInsert(n)?S():b();G(n,o,!0),O(o,"cursor: grabbing","cursor: no-drop")}}}function yr(e){if(w("cursor: default"),Ye){const t=new a(e.x-Xe.x,e.y-Xe.y);if(J instanceof c)ke(r.tree,J,t)&&ct(J,t);else if(J instanceof h){const n=D(J,t);r.tree.canInsert(n)&&r.tree.insert(n)}r.pushToDrawStack(te.COPY_MULTI)}p(r.tree),Ye=!1}function mr(){w("cursor: default"),Ye=!1,p(r.tree)}let ft,M=null,ce;function br(e){if(ft=new a(e.x-l.x,e.y-l.y),M=r.tree.getLowestNode(ft),M!==null){const t=r.tree.getLowestParent(ft);t!==null&&t.remove(ft),M instanceof c&&M.children.length!==0&&M!==r.tree.sheet&&ut(r.tree,M),p(r.tree),M instanceof h?G(M,b(),!0):Y(M,b()),ce=!0}else ce=!1}function Tr(e){ce&&M!==null&&M.ellipse!==null&&Ue(r.tree,M);const t=new a(e.x-l.x,e.y-l.y),n=r.tree.getLowestNode(t),o=r.tree.getLowestParent(t);ce&&M!==null&&o!==null&&(ce=!0,p(r.tree),n===null?(M=null,ce=!1):(o.remove(t),M=n,M instanceof c&&M.children.length!==0&&(ut(r.tree,M),M.children=[]),p(r.tree),M instanceof h?G(M,b(),!0):Y(M,b())))}function Sr(e){const t=new a(e.x-l.x,e.y-l.y);if(ce){const n=r.tree.getLowestNode(t);n!==null&&n instanceof c&&n.remove(t),n!==r.tree.sheet&&n instanceof c&&n.children.length!==0&&ut(r.tree,n),p(r.tree),r.pushToDrawStack(te.DELETE_SINGLE)}M=null,ce=!1}function Er(){ce&&M!==null&&Ue(r.tree,M),M=null,ce=!1,p(r.tree)}let dt,F=null,re;function xr(e){if(dt=new a(e.x-l.x,e.y-l.y),F=r.tree.getLowestNode(dt),F!==null){const t=r.tree.getLowestParent(dt);t!==null?t.remove(dt):(F=r.tree.sheet.copy(),r.tree.clear()),re=!0,p(r.tree),le(F,b())}}function Mr(e){re&&F!==null&&Ue(r.tree,F);const t=new a(e.x-l.x,e.y-l.y),n=r.tree.getLowestNode(t),o=r.tree.getLowestParent(t);re&&F!==null&&o!==null?(re=!0,n===null?(F=null,re=!1):(o.remove(t),F=n,re=!0,p(r.tree),le(F,b()))):re&&o===null&&(F=r.tree.sheet.copy(),r.tree.clear(),p(r.tree),le(F,b()))}function Ir(e){const t=new a(e.x-l.x,e.y-l.y);if(re){const n=r.tree.getLowestNode(t);n!==null&&n instanceof c?n.remove(t):r.tree.clear(),p(r.tree),r.pushToDrawStack(te.DELETE_MULTI)}F=null,re=!1}function Pr(){re&&F!==null&&Ue(r.tree,F),F=null,re=!1,p(r.tree)}let pe,_=null,Ge,Kt=new a(1,1);function kr(e){if(pe=new a(e.x-l.x,e.y-l.y),_=r.tree.getLowestNode(pe),_ instanceof c&&_.ellipse!==null){Ge=!0;const t=r.tree.getLowestParent(pe);t!==null&&t.remove(pe);for(let n=0;n<_.children.length;n++)r.tree.insert(_.children[n]);Kt=Vn(_,pe),_.children=[]}}function Cr(e){if(Ge){const t=new a((e.x-l.x-pe.x)/2,(e.y-l.y-pe.y)/2);if(_ instanceof c){const n=It(_,t,Kt);if(n.ellipse!==null){p(r.tree);const i=r.tree.canInsert(n)&&De(n.ellipse)?S():b();O(i,"cursor: crosshair","cursor: no-drop"),Y(n,i)}}}}function Lr(e){if(w("cursor: default"),Ge){const t=new a((e.x-l.x-pe.x)/2,(e.y-l.y-pe.y)/2);if(_ instanceof c){const n=It(_,t,Kt);n.ellipse!==null&&(r.tree.canInsert(n)&&De(n.ellipse)?r.tree.insert(n):r.tree.insert(_))}p(r.tree),Ge=!1,r.pushToDrawStack(te.RESIZE)}}function Rr(){w("cursor: default"),Ge&&_!==null&&r.tree.insert(_),Ge=!1,p(r.tree)}let qe,H=null,ze,ot;const Ar=document.getElementById("selectionString");function Dr(e){ot=new I(r.tree.sheet),r.selectForProof.sheet=new I().sheet,qe=new a(e.x-l.x,e.y-l.y),H=r.tree.getLowestNode(qe),Wn()}function Or(e){ze&&(p(r.tree),qe=new a(e.x-l.x,e.y-l.y),H=r.tree.getLowestNode(qe),Wn())}function vr(){if(w("cursor: default"),ze&&H!==null){if(H instanceof c&&H.ellipse===null)for(let e=0;e<H.children.length;e++)r.selectForProof.insert(H.children[e]);else r.selectForProof.insert(H);p(r.tree),r.pushToDrawStack(te.COPY_GRAPH)}H=null,ze=!1}function Nr(){w("cursor: default"),H=null,ze=!1,p(r.tree)}function Wn(){const e=new I;let t=!1;if(H!==null){if(ze=!0,H instanceof h||!H.isEqualTo(ot.sheet)){e.insert(H);const n=ot.getLowestParent(qe);n!==null&&(n.remove(qe),t=!0),p(ot)}else e.sheet=H,at();le(H,S()),w("cursor: copy"),t&&ot.insert(H)}else ze=!1;Ar.innerHTML=e.toString()}function oe(){const e=new I;return r.currentProofStep&&(e.sheet=r.currentProofStep.tree.sheet.copy()),e}function _e(e,t){return e.canInsert(t)&&Zn(new I(e.sheet),t)}function Zn(e,t){return r.currentProofStep?(e.insert(t.copy()),e.isEqualTo(new I(r.currentProofStep.tree.sheet))):!1}let bn,Qt;function $r(){bn=oe(),Qt=!0,at(),le(bn.sheet,b())}function Ur(){Qt&&(Ht(-1),r.clearProof(),T())}function Hr(){Qt=!1,T()}const Br=document.getElementById("showRect");let mt,Ct,Ve;function Fr(){w("cursor: crosshair")}function Xr(e){mt=new a(e.clientX-l.x,e.clientY-l.y),Ve=oe(),Ct=!1}function Yr(e){const t=new a(e.clientX-l.x,e.clientY-l.y),n=new c(Pt(mt,t)),o=new c(Jn(n.ellipse));if(T(),!Ct){const i=Kn(n,o)?S():b();Y(n,i),Y(o,i),O(i,"cursor: crosshair","cursor: no-drop"),Br.checked&&_n(mt,t,i)}}function Gr(e){w("cursor: crosshair");const t=new a(e.clientX-l.x,e.clientY-l.y);Ve=oe();const n=new c(Pt(mt,t)),o=new c(Jn(n.ellipse)),i=new W(Ve,k.DC_INSERT);!Ct&&Kn(n,o)&&(i.tree.insert(n),i.tree.insert(o),r.pushToProof(i)),T()}function qr(){w("cursor: default"),Ct=!0,T()}function Jn(e){return new de(e.center,Math.floor(e.radiusX*.8),Math.floor(e.radiusY*.8))}function Kn(e,t){return e.ellipse!==null&&t.ellipse!==null&&Ve.canInsert(e)&&De(e.ellipse)&&Ve.canInsert(t)&&De(t.ellipse)&&zr(e,t)}function zr(e,t){const n=new I(Ve.sheet),o=new c(e.ellipse),i=new c(t.ellipse);return n.insert(o),n.insert(i),o.children.length===1}let me,K=null,it,Le,st;function _r(e){me=new a(e.x-l.x,e.y-l.y),Le=oe(),st=new I(Le.sheet),K=Le.getLowestNode(me),Qn()}function Vr(e){me=new a(e.x-l.x,e.y-l.y),st=new I(Le.sheet),K!==null&&(K=Le.getLowestNode(me),T(),Qn())}function jr(e){const t=new W(Le,k.DC_DELETE);if(me=new a(e.x-l.x,e.y-l.y),it&&K instanceof c){const n=t.tree.getLowestParent(me),o=K.children[0];if(n!==null&&o instanceof c){n.remove(me);for(let i=0;i<o.children.length;i++)t.tree.insert(o.children[i]);r.pushToProof(t)}}T()}function Wr(){it&&K!==null&&Ue(st,K),K=null,it=!1,T()}function Zr(e){return e.children.length===1&&e.children[0]instanceof c&&K!==Le.sheet}function Jr(e){Y(e,b()),e.children[0]instanceof c&&Y(e.children[0],b())}function Qn(){if(K instanceof c&&Zr(K)){it=!0;const e=st.getLowestParent(me);if(e!==null){e.remove(me);const t=K.children[0].copy();ut(st,t),t.children=[]}Jr(K)}else it=!1}let Me,L=null,Ne,ae;function Kr(e){if(ae=oe(),Me=new a(e.x-l.x,e.y-l.y),L=ae.getLowestNode(Me),L!==ae.sheet&&L!==null){w("cursor: grabbing");const t=ae.getLowestParent(Me);if(t!==null&&t.remove(Me),L instanceof c&&L.children.length!==0){for(let n=0;n<L.children.length;n++)ae.insert(L.children[n]);L.children=[]}Ne=!0,p(r.currentProofStep.tree),L instanceof h?G(L,S(),!0):Y(L,S())}else Ne=!1}function Qr(e){if(Ne){const t=new a(e.x-Me.x,e.y-Me.y);if(p(r.currentProofStep.tree),L instanceof c){const n=ne(L,t),o=_e(ae,n)?S():b();Y(n,o),O(o,"cursor: grabbing","cursor: no-drop")}else if(L instanceof h){const n=D(L,t),o=_e(ae,n)?S():b();G(n,o,!0),O(o,"cursor: grabbing","cursor: no-drop")}}}function ei(e){if(Ne){w("cursor: default");const t=new W(ae,k.MOVE_SINGLE),n=new a(e.x-Me.x,e.y-Me.y);let o=null;L instanceof c?o=ne(L,n):L instanceof h&&(o=D(L,n)),o!==null&&_e(ae,o)&&(t.tree.insert(o),r.pushToProof(t))}T(),Ne=!1}function ti(){w("cursor: default"),Ne&&L!==null&&ae.insert(L),Ne=!1,T()}let Ie,z=null,vt=null,$e,ge;function ni(e){ge=oe(),Ie=new a(e.x-l.x,e.y-l.y),z=ge.getLowestNode(Ie),z!==ge.sheet&&z!==null?(w("cursor: grabbing"),vt=ge.getLowestParent(Ie),vt!==null&&vt.remove(Ie),$e=!0,p(r.currentProofStep.tree),le(z,S())):$e=!1}function oi(e){if($e){const t=new a(e.x-Ie.x,e.y-Ie.y);if(p(r.currentProofStep.tree),z instanceof c){const n=Jt(z,t),o=_e(ge,n)?S():b();j(z,o,t),O(o,"cursor: grabbing","cursor: no-drop")}else if(z instanceof h){const n=D(z,t),o=_e(ge,n)?S():b();G(n,o,!0),O(o,"cursor: grabbing","cursor: no-drop")}}}function ri(e){if($e){w("cursor: default");const t=new W(ge,k.MOVE_MULTI),n=new a(e.x-Ie.x,e.y-Ie.y);let o=null;z instanceof c?o=Jt(z,n):z instanceof h&&(o=D(z,n)),o!==null&&_e(ge,o)&&(t.tree.insert(o),r.pushToProof(t))}T(),$e=!1}function ii(){w("cursor: default"),$e&&z!==null&&ge.insert(z),$e=!1,T()}let Re,X=null,Gt=null,je,ue;function si(e){ue=oe(),Re=new a(e.x-l.x,e.y-l.y),X=ue.getLowestNode(Re),Gt=ue.getLowestParent(Re),je=X!==ue.sheet&&X!==null,je&&w("cursor: copy")}function li(e){if(je){const t=new a(e.x-Re.x,e.y-Re.y);T();const n=new a(e.x-l.x,e.y-l.y),o=eo(t,n)?S():b();if(X instanceof c)j(X,o,t);else if(X instanceof h){const i=D(X,t);G(i,o,!0)}O(o,"cursor: grabbing","cursor: no-drop")}}function ai(e){if(je){w("cursor: default");const t=new a(e.x-Re.x,e.y-Re.y);if(eo(t,new a(e.x-l.x,e.y-l.y))){if(X instanceof c)ct(X,t,ue);else if(X instanceof h){const n=D(X,t);ue.insert(n)}r.pushToProof(new W(ue,k.ITERATION))}}T(),je=!1}function ci(){w("cursor: default"),je=!1,T()}function eo(e,t){return Gt!==null&&Gt.containsPoint(t)&&(X instanceof c&&ke(ue,X,e)&&to(ue.sheet,ne(X,e).ellipse)||X instanceof h&&ue.canInsert(D(X,e)))}function to(e,t){for(let n=0;n<e.children.length;n++)if(e.children[n]instanceof c){if(e.children[n].ellipse instanceof de&&(t.contains(e.children[n].ellipse)||!to(e.children[n],t)))return!1}else if(e.children[n]instanceof h&&t.contains(e.children[n].calcRect()))return!1;return!0}let be,R=null,We,ie,bt;function ui(e){be=new a(e.x-l.x,e.y-l.y),ie=oe(),bt=new I(ie.sheet),R=ie.getLowestNode(be),no()}function fi(e){be=new a(e.x-l.x,e.y-l.y),R!==null&&(R=ie.getLowestNode(be),T(),no())}function di(e){if(We&&(be=new a(e.x-l.x,e.y-l.y),R!==null&&en(ie.sheet,ie.getLevel(R)))){const t=ie.getLowestParent(be);t instanceof c&&t.remove(be),r.pushToProof(new W(ie,k.DEITERATION))}We=!1,T()}function hi(){We&&R!==null&&Ue(bt,R),We=!1,R=null,T()}function no(){if(R!==null&&!(R instanceof c&&R.ellipse===null)&&en(ie.sheet,ie.getLevel(R))){We=!0;const e=bt.getLowestParent(be);e!==null&&e.remove(be),le(R,b()),bt.insert(R)}else We=!1}function en(e,t){let n=null;for(let o=0;o<e.children.length;o++){if(e.children[o]instanceof c&&R instanceof c&&R.isEqualTo(e.children[o])&&R.ellipse!==e.children[o].ellipse)return!0;if(e.children[o]instanceof h&&R instanceof h&&e.children[o].identifier===R.identifier&&e.children[o].toString()!==R.toString())return!0;e.children[o]instanceof c&&e.children[o].containsNode(R)&&ie.getLevel(e.children[o])<t&&(n=e.children[o])}return n!==null?en(n,t):!1}let x,v,V,U,Ze;function pi(e){V=oe();const t=r.selectForProof.sheet.children,n=new a(e.x-l.x,e.y-l.y);if(r.proof.length>0&&t.length===1){Ze=!0,x=t[0];const o=tn(e,x),i=V.getLowestNode(n),u=V.getLowestParent(n);if(v=i instanceof h?u:i,o){const g=rt(x,o);if(v!==null&&!v.containsNode(g))w("cursor: no-drop"),U=!1,j(x,b(),o);else if(v!==null&&v instanceof c&&v.ellipse!==null&&V.getLevel(v)%2===0){if(g instanceof c){U=!0;for(let f=0;f<v.children.length;f++)if(g.containsNode(v.children[f])){U=!1;break}}else U=!0;if(U){let f="";if(x instanceof c)f=ke(V,x,o)?S():b();else if(x instanceof h){const m=rt(x,o);f=V.canInsert(m)?S():b()}U=f===S(),j(x,f,o),O(f,"cursor: copy","cursor: no-drop")}else w("cursor: no-drop"),j(x,b(),o)}else w("cursor: no-drop"),U=!1,j(x,b(),o)}}else U=!1,Ze=!1,j(x,b(),n)}function wi(e){if(Ze){const t=new a(e.x-l.x,e.y-l.y);T();const n=tn(e,x),o=V.getLowestNode(t),i=V.getLowestParent(t);if(v=o instanceof h?i:o,n){const u=rt(x,n);if(v!==null&&!v.containsNode(u))w("cursor: no-drop"),U=!1,j(x,b(),n);else if(v!==null&&v instanceof c&&v.ellipse!==null&&V.getLevel(v)%2===0){if(u instanceof c){U=!0;for(let g=0;g<v.children.length;g++)if(u.containsNode(v.children[g])){U=!1;break}}else U=!0;if(U){let g="";if(x instanceof c)g=ke(V,x,n)?S():b();else if(x instanceof h){const f=rt(x,n);g=V.canInsert(f)?S():b()}U=g===S(),j(x,g,n),O(g,"cursor: copy","cursor: no-drop")}else w("cursor: no-drop"),j(x,b(),n)}else w("cursor: no-drop"),U=!1,j(x,b(),n)}}else U=!1}function gi(e){if(w("cursor: default"),Ze&&U){const t=tn(e,x);if(t){if(x instanceof c)ct(x,t,V);else if(x instanceof h){const n=rt(x,t);V.insert(n)}r.pushToProof(new W(V,k.INSERTION))}}T(),Ze=!1}function yi(){w("cursor: default"),Ze=!1,T()}function tn(e,t){if(t instanceof c&&t.ellipse!==null)return new a(e.x-t.ellipse.center.x,e.y-t.ellipse.center.y);if(t instanceof h)return new a(e.x-t.origin.x,e.y-t.origin.y)}let Te,ee=null,Je,Ae,Tt;function mi(e){Te=new a(e.x-l.x,e.y-l.y),Ae=oe(),Tt=new I(Ae.sheet),ee=Ae.getLowestNode(Te),oo()}function bi(e){Te=new a(e.x-l.x,e.y-l.y),ee!==null&&(ee=Ae.getLowestNode(Te),T(),oo())}function Ti(e){if(Je){const t=new W(Ae,k.ERASURE);Te=new a(e.x-l.x,e.y-l.y);const n=t.tree.getLowestParent(Te);n!==null&&n.remove(Te),r.pushToProof(t),T()}ee=null,Je=!1}function Si(){Je&&ee!==null&&Ue(Tt,ee),ee=null,Je=!1,T()}function oo(){if(ee!==Ae.sheet&&ee!==null&&Ae.getLevel(ee)%2===0){Je=!0;const e=Tt.getLowestParent(Te);e!==null&&e.remove(Te),le(ee,b()),Tt.insert(ee)}else Je=!1}let we,Z=null,Ke,nn=new a(1,1),ye;function Ei(e){if(ye=oe(),we=new a(e.x-l.x,e.y-l.y),Z=ye.getLowestNode(we),Z instanceof c&&Z.ellipse!==null){Ke=!0;const t=ye.getLowestParent(we);t!==null&&t.remove(we);for(let n=0;n<Z.children.length;n++)ye.insert(Z.children[n]);nn=Vn(Z,we),Z.children=[]}}function xi(e){if(Ke){const t=new a((e.x-l.x-we.x)/2,(e.y-l.y-we.y)/2);if(Z instanceof c){const n=It(Z,t,nn);if(n.ellipse!==null){T();const o=ro(n)?S():b();Y(n,o),O(o,"cursor: crosshair","cursor: no-drop")}}}}function Mi(e){if(Ke){w("cursor: default");const t=new a((e.x-l.x-we.x)/2,(e.y-l.y-we.y)/2);if(Z instanceof c){const n=It(Z,t,nn);n.ellipse!==null&&ro(n)&&(ye.insert(n),r.pushToProof(new W(ye,k.RESIZE)))}T(),Ke=!1}}function Ii(){w("cursor: default"),Ke&&Z!==null&&ye.insert(Z),Ke=!1,T()}function ro(e){return ye.canInsert(e)&&De(e.ellipse)&&Zn(new I(ye.sheet),e)}let qt,St,lt;function Pi(){St=oe(),qt=r.selectForProof.sheet,qt.children.length>0&&r.proof.length===1&&St.sheet.isEmptySheet()&&(lt=!0,w("cursor: copy"))}function ki(){w("cursor: default"),lt=!1,T()}function Ci(){lt&&(w("cursor: default"),St.sheet=qt,r.pushToProof(new W(St,k.PASTE_GRAPH))),lt=!1,T()}function Li(){w("cursor: default"),lt=!1,T()}const fe=document.getElementById("canvas");fe.width=window.innerWidth;fe.height=window.innerHeight;const io=fe.getContext("2d");if(io===null)throw Error("2d rendering context not supported");const Ri=io;Ri.font="35pt arial";const Nt=document.getElementById("cutTools"),Tn=document.getElementById("atomTools"),Sn=document.getElementById("graphString"),En=document.getElementById("proofString"),xn=document.getElementById("toProofTools");window.addEventListener("keydown",Ni);fe.addEventListener("mouseenter",$i);fe.addEventListener("mousedown",Ui);fe.addEventListener("mousemove",Hi);fe.addEventListener("mouseup",Bi);fe.addEventListener("mouseout",Fi);let on=!1,rn=!0;Oo();window.tree=r.tree;window.treeString=Et(window.tree);window.atomTool=s.atomTool;window.cutTool=s.cutTool;window.dragTool=s.dragTool;window.aegJsonString=Et;window.saveMode=An;window.loadMode=po;window.drawMoveSingleTool=s.drawMoveSingleTool;window.drawMoveMultiTool=s.drawMoveMultiTool;window.copySingleTool=s.copySingleTool;window.copyMultiTool=s.copyMultiTool;window.deleteSingleTool=s.deleteSingleTool;window.deleteMultiTool=s.deleteMultiTool;window.copyFromDrawTool=s.copyFromDrawTool;window.pasteInProofTool=s.pasteInProofTool;window.doubleCutInsertionTool=s.doubleCutInsertionTool;window.resizeTool=s.resizeTool;window.doubleCutDeletionTool=s.doubleCutDeletionTool;window.insertionTool=s.insertionTool;window.erasureTool=s.erasureTool;window.proofMoveSingleTool=s.proofMoveSingleTool;window.proofMoveMultiTool=s.proofMoveMultiTool;window.proofResizeTool=s.proofResizeTool;window.iterationTool=s.iterationTool;window.deiterationTool=s.deiterationTool;window.proofClearTool=s.proofClearTool;window.drawClearTool=s.drawClearTool;window.setTool=Di;window.setHighlight=Ai;window.toggleHandler=Ho;function Ai(e,t){const n=document.getElementById(t);switch(e){case"mousedown":n==null||n.classList.remove("no-highlight");break;case"mouseleave":n==null||n.classList.add("no-highlight");break}}const Mn=document.querySelectorAll(".toolButton");Mn.forEach(e=>{e.addEventListener("click",()=>{e.classList.add("toolButtonPressed"),Mn.forEach(t=>{t!==e&&t.classList.remove("toolButtonPressed")})})});function Di(e){switch(r.toolState=e,Nt.style.display="none",Tn.style.display="none",xn.style.display="none",r.toolState){case s.atomTool:Tn.style.display="block";break;case s.cutTool:Nt.style.display="block";break;case s.copyFromDrawTool:xn.style.display="block";break;case s.doubleCutInsertionTool:Nt.style.display="block";break}}async function Oi(){r.modeState==="Draw"?r.undoDrawStep():r.undoProofStep()}async function vi(){r.modeState==="Draw"?r.redoDrawStep():r.redoProofStep()}function Ni(e){if(e.ctrlKey)e.preventDefault(),e.key==="s"?An():e.key==="z"?Oi():e.key==="y"&&vi();else switch(r.toolState){case s.atomTool:qo(e);break}}function $i(){switch(r.toolState){case s.cutTool:Ko();break;case s.dragTool:wo();break;case s.doubleCutInsertionTool:Fr();break}rn=!0}function Ui(e){if(e.button===0){switch(r.toolState){case s.cutTool:Qo(e);break;case s.atomTool:zo(e);break;case s.dragTool:go(e);break;case s.drawMoveSingleTool:or(e);break;case s.drawMoveMultiTool:lr(e);break;case s.copySingleTool:fr(e);break;case s.copyMultiTool:wr(e);break;case s.deleteSingleTool:br(e);break;case s.deleteMultiTool:xr(e);break;case s.resizeTool:kr(e);break;case s.copyFromDrawTool:Dr(e);break;case s.pasteInProofTool:Pi();break;case s.doubleCutInsertionTool:Xr(e);break;case s.doubleCutDeletionTool:_r(e);break;case s.insertionTool:pi(e);break;case s.erasureTool:mi(e);break;case s.proofMoveSingleTool:Kr(e);break;case s.proofMoveMultiTool:ni(e);break;case s.proofResizeTool:Ei(e);break;case s.iterationTool:si(e);break;case s.deiterationTool:ui(e);break;case s.proofClearTool:$r();break;case s.drawClearTool:Bo();break}on=!0}}function Hi(e){if(on&&rn)switch(r.toolState){case s.cutTool:er(e);break;case s.atomTool:_o(e);break;case s.dragTool:yo(e);break;case s.drawMoveSingleTool:rr(e);break;case s.drawMoveMultiTool:ar(e);break;case s.copySingleTool:dr(e);break;case s.copyMultiTool:gr(e);break;case s.deleteSingleTool:Tr(e);break;case s.deleteMultiTool:Mr(e);break;case s.resizeTool:Cr(e);break;case s.copyFromDrawTool:Or(e);break;case s.pasteInProofTool:ki();break;case s.doubleCutInsertionTool:Yr(e);break;case s.doubleCutDeletionTool:Vr(e);break;case s.insertionTool:wi(e);break;case s.erasureTool:bi(e);break;case s.proofMoveSingleTool:Qr(e);break;case s.proofMoveMultiTool:oi(e);break;case s.proofResizeTool:xi(e);break;case s.iterationTool:li(e);break;case s.deiterationTool:fi(e);break}}function Bi(e){if(e.button===0){switch(r.toolState){case s.cutTool:tr(e);break;case s.atomTool:Vo(e);break;case s.dragTool:mo();break;case s.drawMoveSingleTool:ir(e);break;case s.drawMoveMultiTool:cr(e);break;case s.copySingleTool:hr(e);break;case s.copyMultiTool:yr(e);break;case s.deleteSingleTool:Sr(e);break;case s.deleteMultiTool:Ir(e);break;case s.resizeTool:Lr(e);break;case s.copyFromDrawTool:vr();break;case s.pasteInProofTool:Ci();break;case s.doubleCutInsertionTool:Gr(e);break;case s.doubleCutDeletionTool:jr(e);break;case s.insertionTool:gi(e);break;case s.erasureTool:Ti(e);break;case s.proofMoveSingleTool:ei(e);break;case s.proofMoveMultiTool:ri(e);break;case s.proofResizeTool:Mi(e);break;case s.iterationTool:ai(e);break;case s.deiterationTool:di(e);break;case s.proofClearTool:Ur();break;case s.drawClearTool:Fo();break}on=!1}}function Fi(){switch(r.toolState){case s.cutTool:nr();break;case s.atomTool:jo();break;case s.dragTool:bo();break;case s.drawMoveSingleTool:sr();break;case s.drawMoveMultiTool:ur();break;case s.copySingleTool:pr();break;case s.copyMultiTool:mr();break;case s.deleteSingleTool:Er();break;case s.deleteMultiTool:Pr();break;case s.resizeTool:Rr();break;case s.copyFromDrawTool:Nr();break;case s.pasteInProofTool:Li();break;case s.doubleCutInsertionTool:qr();break;case s.doubleCutDeletionTool:Wr();break;case s.insertionTool:yi();break;case s.erasureTool:Si();break;case s.proofMoveSingleTool:ti();break;case s.proofMoveMultiTool:ii();break;case s.proofResizeTool:Ii();break;case s.iterationTool:ci();break;case s.deiterationTool:hi();break;case s.proofClearTool:Hr();break;case s.drawClearTool:Xo();break}rn=!1}function Xi(){fe.width=window.innerWidth,fe.height=window.innerHeight,r.modeState==="Draw"?p(r.tree):T()}window.onresize=Xi;
