(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();class i{constructor(e,t){this.x=e??0,this.y=t??0}set(e,t){this.x=e,this.y=t}distance(e){const t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)}toString(){return"X: "+this.x+", Y: "+this.y}}function F(n,e){if(n instanceof p){if(e instanceof p)return J(n,e);{const t=X(e,64);for(let r=0;r<t.length;r++)if(b(n,t[r]))return!0;return!1}}else if(e instanceof p){const t=X(n,64);for(let r=0;r<t.length;r++)if(b(e,t[r]))return!0;return!1}else{if(F(n.boundingBox,e.boundingBox)||T(e.boundingBox,n.boundingBox)){const t=X(n,64);for(let r=0;r<t.length;r++)if(Y(e,t[r]))return!0}return!1}}function T(n,e){if(n instanceof p)if(e instanceof p){const t=e.getCorners();for(let r=0;r<4;r++)if(!b(n,t[r]))return!1;return!0}else{const t=D(e);for(let r=0;r<4;r++)if(!b(n,t[r]))return!1;return!0}else if(e instanceof p){const t=e.getCorners();for(let r=0;r<4;r++)if(!Y(n,t[r]))return!1;return!0}else{const t=X(e,64);for(let r=0;r<t.length;r++)if(!Y(n,t[r]))return!1;return!0}}function J(n,e){const t=n.getCorners(),r=e.getCorners();return t[0].y<=r[0].y&&t[2].y>=r[0].y||r[0].y<=t[0].y&&r[2].y>=t[0].y||t[0].y<=r[2].y&&t[2].y>=r[2].y||r[0].y<=t[2].y&&r[2].y>=t[2].y?t[0].x<=r[0].x&&t[1].x>=r[0].x||r[0].x<=t[0].x&&r[1].x>=t[0].x||t[0].x<=r[1].x&&t[1].x>=r[1].x?!0:r[0].x<=t[1].x&&r[1].x>=t[1].x:!1}function b(n,e){const t=n.getCorners();return t[0].x<e.x&&t[1].x>e.x&&t[0].y<e.y&&t[2].y>e.y}function Y(n,e){return Math.pow(e.x-n.center.x,2)/Math.pow(n.radiusX,2)+Math.pow(e.y-n.center.y,2)/Math.pow(n.radiusY,2)<1}function D(n){return[new i(n.center.x,n.center.y-n.radiusY),new i(n.center.x+n.radiusX,n.center.y),new i(n.center.x,n.center.y+n.radiusY),new i(n.center.x-n.radiusX,n.center.y)]}function X(n,e){const t=[],r=n.radiusX/(e/4);t[0]=D(n)[3];let s,l;for(let a=1;a<e;a++)a<e/2+1?(s=t[a-1].x+r,l=H(n,s,1)):(s=t[a-1].x-r,l=H(n,s,-1)),t[a]=new i(s,l);return t}function H(n,e,t){return t*n.radiusY*Math.sqrt(1-Math.pow((e-n.center.x)/n.radiusX,2))+n.center.y}class p{constructor(e,t,r){this.startVertex=e??new i,this.width=t??0,this.height=r??0}getCorners(){const e=[this.startVertex];return e.push(new i(this.startVertex.x+this.width,this.startVertex.y)),e.push(new i(this.startVertex.x+this.width,this.startVertex.y+this.height)),e.push(new i(this.startVertex.x,this.startVertex.y+this.height)),e}containsPoint(e){return b(this,e)}overlaps(e){return F(this,e)}contains(e){return T(this,e)}toString(){return`A rectangle with
Top Left Vertex at: `+this.startVertex.toString()+", Width: "+this.width+", Height: "+this.height}}class d{constructor(e,t,r){this.rect=r??new p,this.identifier=e,this.origin=t??new i}get Rectangle(){return this.rect}set Rectangle(e){this.rect=e}get Identifier(){return this.identifier}set Identifier(e){this.identifier=e}get Origin(){return this.origin}set Origin(e){this.origin=e}containsPoint(e){return this.rect.containsPoint(e)}containsNode(e){return e instanceof d?this.rect.contains(e.Rectangle):this.rect.contains(e.Ellipse)}toString(){return"An atom representing the proposition: "+this.identifier+" and Boundary box of: "+this.rect.toString()}}class w{constructor(e,t){this.ellipse=e,this.children=t??[]}get Ellipse(){return this.ellipse}set Ellipse(e){this.ellipse=e}get Children(){return this.children}set Children(e){this.children=e}set Child(e){this.children.push(e)}getCurrentCut(e){for(let t=0;t<this.children.length;t++){const r=this.children[t];if(r instanceof w&&r.containsNode(e))return r.getCurrentCut(e)}return this}containsPoint(e){return this.ellipse===null?!0:this.ellipse.containsPoint(e)}containsNode(e){return this.ellipse===null?!0:e instanceof d?this.ellipse.contains(e.Rectangle):this.ellipse.contains(e.Ellipse)}remove(e){if(this.containsPoint(e)){let t=!0;for(let r=0;r<this.children.length;r++)if(this.children[r].containsPoint(e))return t=!1,this.children[r]instanceof w?this.children[r].remove(e):(this.children=this.children.splice(r,1),!0);if(t)return!0}return!1}toString(){let e;return this.ellipse===null?e="Sheet of Assertion of the AEG Tree":e=`A cut node with boundary box of 
`+this.ellipse.toString(),this.children.length>0&&(e+=`, 
With nested nodes: `+this.children.toString()),e}toFormulaString(){let e="";for(const t of this.children)t instanceof d?e+=t.Identifier:t instanceof w&&(e+=t.toFormulaString()),e+=" ";return e=e.slice(0,-1),this.ellipse===null?e="["+e+"]":e="("+e+")",e}}class Q{constructor(e){this.sheet=e??new w(null)}verify(){return this.verifyAEG(this.sheet)}verifyAEG(e){for(let t=0;t<e.Children.length;t++){if(!e.containsNode(e.Children[t]))return!1;for(let r=t+1;r<e.Children.length;r++)if(this.overlaps(e.Children[t],e.Children[r]))return!1}for(let t=0;t<e.Children.length;t++)if(e.Children[t]instanceof w&&!this.verifyAEG(e.Children[t]))return!1;return!0}canInsert(e){const t=this.sheet.getCurrentCut(e);for(let r=0;r<t.Children.length;r++)if(this.overlaps(e,t.Children[r]))return!1;return!0}insert(e){if(!this.canInsert(e))throw new Error("Insertion failed. "+e+" had a collision.");const t=this.sheet.getCurrentCut(e),r=[...t.Children];if(t.Child=e,e instanceof w)for(let s=0;s<r.length;s++)e.containsNode(r[s])&&(e.Child=r[s],t.Children.splice(s,1))}remove(e){this.sheet.remove(e)}overlaps(e,t){let r,s;return e instanceof d?t instanceof d?e.Rectangle.overlaps(t.Rectangle):(r=t.Ellipse,e.Rectangle.overlaps(r)):t instanceof d?(r=e.Ellipse,r.overlaps(t.Rectangle)):(r=e.Ellipse,s=t.Ellipse,r.overlaps(s))}toString(){return this.sheet.toFormulaString()}}class V{constructor(e,t,r){this.center=e??new i,this.radiusX=t??0,this.radiusY=r??0;const s=new i(this.center.x-this.radiusX,this.center.y-this.radiusY);this.boundingBox=new p(s,this.radiusX*2,this.radiusY*2)}toString(){return"An ellipse with Center at: "+this.center.toString()+`, 
Horizontal Radius of: `+this.radiusX+`, 
Vertical Radius of: `+this.radiusY+`, 
Bounding box: `+this.boundingBox.toString()}containsPoint(e){return Y(this,e)}overlaps(e){return F(this,e)}contains(e){return T(this,e)}}const C=document.getElementById("canvas"),G=C.getContext("2d"),U=document.getElementById("showRect"),_=document.getElementById("mode");if(G===null)throw Error("2d rendering context not supported");const y=G;let I=!1,v=new V,R=new i;function m(n){let e=new w(new V);const t=new i;n.type==="mousedown"?(I=!0,R.x=n.clientX,R.y=n.clientY):n.type==="mousemove"&&I?(t.x=n.clientX,t.y=n.clientY,y.clearRect(0,0,C.width,C.height),E(u.sheet),v=N(R,t),e.Ellipse=v,u.canInsert(e)&&v.radiusX>15&&v.radiusY>15?S(e,"#00FF00"):S(e,"#FF0000")):n.type==="mouseup"&&I?(e=new w(v),u.canInsert(e)&&v.radiusX>15&&v.radiusY>15&&u.insert(e),I=!1,R=new i,y.clearRect(0,0,C.width,C.height),E(u.sheet),console.log(u.toString())):n.type==="mouseout"&&I&&(I=!1,R=new i,y.clearRect(0,0,C.width,C.height),E(u.sheet))}function N(n,e){const t=new i((e.x-n.x)/2+n.x,(e.y-n.y)/2+n.y),r=n.x-e.x,s=n.y-e.y,l=Math.abs(r),a=Math.abs(s);let A,O;if(_.value==="circumscribed"){const k=Math.floor(t.distance(e));O=Math.floor(k*(a/l)),A=Math.floor(k*(l/a))}else A=l/2,O=a/2;return U.checked&&(y.beginPath(),y.rect(n.x,n.y,-r,-s),y.stroke()),new V(t,A,O)}function S(n,e){y.strokeStyle=e;const t=n.Ellipse,r=t.center;y.beginPath(),y.ellipse(r.x,r.y,t.radiusX,t.radiusY,0,0,2*Math.PI),y.stroke()}const g=document.getElementById("canvas"),W=g.getContext("2d");if(W===null)throw Error("2d rendering context not supported");const h=W,q=document.getElementById("atomDisplay");let M,L=!1,$=!1,o=new d("a");q.innerHTML=o.Identifier;function x(n){if(n.type==="keypress"){const e=n;new RegExp(/^[A-Za-z]$/).test(e.key)&&(o.Identifier=e.key,q.innerHTML=o.Identifier,$=!0)}else if(n.type==="mousedown"&&$){const e=n;M=h.measureText(o.Identifier);const t=new i(e.clientX,e.clientY-M.actualBoundingBoxAscent);o.Rectangle=new p(t,M.width,M.fontBoundingBoxDescent+M.actualBoundingBoxAscent),o.Origin=new i(e.clientX,e.clientY),h.clearRect(0,0,g.width,g.height),E(u.sheet),u.canInsert(o)?P(o,"#00FF00"):P(o,"#6600ff"),L=!0}else if(n.type==="mousemove"&&L){const e=n;o.Origin=new i(e.clientX,e.clientY),o.Rectangle.startVertex=new i(e.clientX,e.clientY-M.actualBoundingBoxAscent),h.clearRect(0,0,g.width,g.height),E(u.sheet),u.canInsert(o)?P(o,"#00FF00"):P(o,"#FF0000")}else n.type==="mouseup"&&L?(u.canInsert(o)&&u.insert(o),o=new d(o.Identifier),h.clearRect(0,0,g.width,g.height),E(u.sheet),L=!1,console.log(u.toString())):n.type==="mouseout"&&L&&(L=!1,o=new d(o.Identifier),h.clearRect(0,0,g.width,g.height),E(u.sheet))}function P(n,e){h.fillStyle=e,h.strokeStyle=e;const t=n.Rectangle;h.beginPath(),h.fillText(n.Identifier,n.Origin.x,n.Origin.y),h.rect(t.startVertex.x,t.startVertex.y,t.width,t.height),h.stroke()}const c=document.getElementById("canvas");c.width=window.innerWidth;c.height=window.innerHeight;const z=c.getContext("2d");if(z===null)throw Error("2d rendering context not supported");const f=z;f.font="35pt arial";const ee=document.getElementById("graphString"),j=document.getElementById("cutTools"),K=document.getElementById("atomTools");let B;const u=new Q;window.atomMode=re;window.ellipseMode=te;function te(){B!=="ellipseMode"&&(Z(),B="ellipseMode",K.style.display="none"),j.style.display="block",c.addEventListener("mousedown",m),c.addEventListener("mousemove",m),c.addEventListener("mouseup",m),c.addEventListener("mouseout",m)}function re(){B!=="atomMode"&&(Z(),B="atomMode",j.style.display="none"),K.style.display="block",window.addEventListener("keypress",x),c.addEventListener("mousedown",x),c.addEventListener("mousemove",x),c.addEventListener("mouseup",x),c.addEventListener("mouseout",x)}function Z(){B==="ellipseMode"?(c.removeEventListener("mousedown",m),c.removeEventListener("mousemove",m),c.removeEventListener("mouseup",m),c.removeEventListener("mouseout",m)):B==="atomMode"&&(window.removeEventListener("keypress",x),c.removeEventListener("mousedown",x),c.removeEventListener("mousemove",x),c.removeEventListener("mouseup",x),c.removeEventListener("mouseout",x))}function E(n){ee.innerHTML=u.toString();for(let e=0;n.Children.length>e;e++)n.Children[e]instanceof d?ne(n.Children[e]):E(n.Children[e]);n.Ellipse instanceof V&&(f.strokeStyle="#000000",f.beginPath(),f.ellipse(n.Ellipse.center.x,n.Ellipse.center.y,n.Ellipse.radiusX,n.Ellipse.radiusY,0,0,2*Math.PI),f.stroke())}function ne(n){const e=n.Rectangle;f.strokeStyle="#000000",f.fillStyle="#000000",f.beginPath(),f.rect(e.startVertex.x,e.startVertex.y,e.width,e.height),f.fillText(n.Identifier,n.Origin.x,n.Origin.y),f.stroke()}
