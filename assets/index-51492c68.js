(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();class u{constructor(t,e){this.x=t??0,this.y=e??0}toString(){return"X: "+this.x+", Y: "+this.y}}class m{constructor(t,e,i){this.startVertex=t??new u,this.width=e??0,this.height=i??0}toString(){return`A rectangle with
Top Left Vertex at: `+this.startVertex.toString+`, 
Width of: `+this.width+`, 
Height of: `+this.height}getCorners(){const t=[this.startVertex];return t.push(new u(this.startVertex.x+this.width,this.startVertex.y)),t.push(new u(this.startVertex.x+this.width,this.startVertex.y+this.height)),t.push(new u(this.startVertex.x,this.startVertex.y+this.height)),t}containsPoint(t){const e=this.getCorners();return e[0].x<=t.x&&e[1].x>=t.x&&e[1].y<=t.y&&e[2].y>=t.y}overlaps(t){if(t instanceof m){const e=this.getCorners(),i=t.getCorners();for(let s=0;s<4;s++)if(this.containsPoint(i[s])||t.containsPoint(e[s]))return!0;return!1}else{const e=t.boundingBox;return this.overlaps(e)}}containsShape(t){if(t instanceof m){const e=t.getCorners();return this.containsPoint(e[0])&&this.containsPoint(e[2])}else{const e=t.boundingBox;return this.containsShape(e)}}}class w{constructor(t,e,i){this.rect=i??new m,this.identifier=t,this.origin=e}toString(){return"An atom representing the proposition: "+this.identifier+` and 
Boundary box of: 
`+this.rect.toString}containsPoint(t){return this.rect.containsPoint(t)}containsNode(t){return t instanceof w?this.rect.containsShape(t.rect):this.rect.containsShape(t.ellipse)}}class C{constructor(t,e,i){this.center=t??new u,this.radiusX=e??0,this.radiusY=i??0;const s=new u(this.center.x-this.radiusX,this.center.y-this.radiusY);this.boundingBox=new m(s,this.radiusX*2,this.radiusY*2)}toString(){return`An ellipse with
Center at: `+this.center.toString+`, 
Horizontal Radius of: `+this.radiusX+`, 
Vertical Radius of: `+this.radiusY}containsPoint(t){return this.boundingBox.containsPoint(t)}overlaps(t){return this.boundingBox.overlaps(t)}containsShape(t){return this.boundingBox.containsShape(t)}}class a{constructor(t,e){this.ellipse=t??new C,this.children=e??[]}toString(){let t;return this.ellipse===null?t="Sheet of Assertion of the AEG Tree":t=`A cut node with boundary box of 
`+this.ellipse.toString(),this.children.length>0&&(t+=`, 
With nested nodes: `+this.children.toString()),t}containsPoint(t){return this.ellipse===null?!0:this.ellipse.containsPoint(t)}containsNode(t){return this.ellipse===null?!0:t instanceof w?this.ellipse.containsShape(t.rect):this.ellipse.containsShape(t.ellipse)}verifyCut(){let t=!0;for(let e=0;e<this.children.length;e++){if(!t)return!1;this.ellipse===null&&this.children[e]instanceof a&&(t=this.children[e].verifyCut()),t=this.containsNode(this.children[e]),t&&this.children[e]instanceof a&&(t=this.children[e].verifyCut())}return t}canInsert(t,e){return!0}insert(t,e){this.children.push(t)}remove(t){if(this.containsPoint(t)){let e=!0;for(let i=0;i<this.children.length;i++)if(this.children[i].containsPoint(t))return e=!1,this.children[i]instanceof a?this.children[i].remove(t):(this.children=this.children.splice(i,1),!0);if(e)return!0}return!1}}class R{constructor(t){this.sheet=t??new a,this.sheet.ellipse=null}verifyAEG(){return this.sheet.verifyCut()}canInsertAEG(t,e){return this.sheet.canInsert(t,e)}insertAEG(t,e){this.canInsertAEG(t,e)&&this.sheet.insert(t,e)}remove(t){this.sheet.remove(t)}}const o=document.getElementById("canvas"),S=o.getContext("2d"),k=document.getElementById("showRect"),H=document.getElementById("mode");if(S===null)throw Error("2d rendering context not supported");const h=S;let I,d;function W(n,t){const e=n.x-t.x,i=n.y-t.y;return Math.sqrt(e*e+i*i)}function q(n,t){const e={x:(t.x-n.x)/2+n.x,y:(t.y-n.y)/2+n.y},i=n.x-t.x,s=n.y-t.y,r=Math.abs(i),l=Math.abs(s);let v,g;if(H.value==="circumscribed"){const M=Math.floor(W(e,t));v=Math.floor(M*(l/r)),g=Math.floor(M*(r/l))}else g=r/2,v=l/2;return k.checked&&(h.beginPath(),h.rect(n.x,n.y,-i,-s),h.stroke()),h.beginPath(),h.ellipse(e.x,e.y,v,g,Math.PI/2,0,2*Math.PI),h.stroke(),d=new C(e,v,g),d}function U(){o.addEventListener("mousedown",V)}function V(n){I={x:n.clientX,y:n.clientY},o.addEventListener("mousemove",B),o.addEventListener("mouseup",X)}function B(n){h.clearRect(0,0,o.width,o.height);const t={x:n.clientX,y:n.clientY};b(y.sheet),d=q(I,t)}function X(){o.removeEventListener("mousemove",B),o.removeEventListener("mouseup",X);const n=new a(d);y.canInsertAEG(n,d.center)&&y.insertAEG(n,d.center)}function z(){o.removeEventListener("mousedown",V)}const c=document.getElementById("canvas"),Y=c.getContext("2d");if(Y===null)throw Error("2d rendering context not supported");const x=Y;let f,E;function D(){window.addEventListener("keydown",F)}function F(n){E=n.key,c.addEventListener("mousedown",G)}function G(n){const t={x:n.clientX,y:n.clientY};f=t,x.fillText(E,t.x,t.y),x.stroke(),c.addEventListener("mousemove",O),c.addEventListener("mouseup",T)}function O(n){x.clearRect(0,0,c.width,c.height),b(y.sheet),f={x:n.clientX,y:n.clientY},x.fillText(E,f.x,f.y),x.stroke()}function T(){c.removeEventListener("mousemove",O);const n=new w(E,f);y.insertAEG(n,f),c.removeEventListener("mouseup",T)}function K(){c.removeEventListener("mousedown",G)}const L=document.getElementById("canvas");L.width=window.innerWidth;L.height=window.innerHeight;const $=L.getContext("2d");if($===null)throw Error("2d rendering context not supported");const p=$;p.font="35pt arial";let P=!1,A=!1;const y=new R;window.atomMode=J;window.ellipseMode=j;function j(){P=!0,U(),A&&(K(),A=!1)}function J(){A=!0,D(),P&&(z(),P=!1)}function b(n){for(let t=0;n.children.length>t;t++)n.children[t]instanceof w?Q(n.children[t]):b(n.children[t]);n.ellipse instanceof C&&(p.beginPath(),p.ellipse(n.ellipse.center.x,n.ellipse.center.y,n.ellipse.radiusX,n.ellipse.radiusY,Math.PI/2,0,2*Math.PI),p.stroke())}function Q(n){p.fillText(n.identifier,n.origin.x,n.origin.y),p.stroke()}
