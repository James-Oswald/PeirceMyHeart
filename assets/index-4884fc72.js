(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(i){if(i.ep)return;i.ep=!0;const l=n(i);fetch(i.href,l)}})();class s{constructor(t,n){if(this.x=t??0,this.y=n??0,!Number.isFinite(this.x)||!Number.isFinite(this.y))throw new Error("NaN or Infinity value(s) were passed in constructing a Point.")}set(t,n){if(!Number.isFinite(t)||!Number.isFinite(n))throw new Error("NaN or Infinity value(s) were passed in setting "+this+"'s coords.");this.x=t,this.y=n}distance(t){const n=this.x-t.x,r=this.y-t.y;return Math.sqrt(n*n+r*r)}toString(){return"("+this.x+", "+this.y+")"}}function m(e,t){if(e instanceof w)return t instanceof w?D(e,t)||D(t,e):T(t,e);if(t instanceof w)return T(e,t);if(m(e.boundingBox,t.boundingBox)||L(t.boundingBox,e.boundingBox)){const n=O(e);for(let r=0;r<n.length;r++)if(B(t,n[r]))return!0}return!1}function T(e,t){const n=O(e);for(let r=0;r<n.length;r++)if(I(t,n[r]))return!0;return!1}function L(e,t){if(e instanceof w)if(t instanceof w){const n=t.getCorners();for(let r=0;r<4;r++)if(!I(e,n[r]))return!1;return!0}else{const n=S(t);for(let r=0;r<4;r++)if(!I(e,n[r]))return!1;return!0}else if(t instanceof w){const n=t.getCorners();for(let r=0;r<4;r++)if(!B(e,n[r]))return!1;return!0}else{const n=O(t);for(let r=0;r<n.length;r++)if(!B(e,n[r]))return!1;return!0}}function D(e,t){const n=e.getCorners(),r=t.getCorners();return(n[0].y<=r[0].y&&n[2].y>=r[0].y||n[0].y<=r[2].y&&n[2].y>=r[2].y)&&(n[0].x<=r[0].x&&n[1].x>=r[0].x||n[0].x<=r[1].x&&n[1].x>=r[1].x)}function I(e,t){const n=e.getCorners();return n[0].x<t.x&&n[1].x>t.x&&n[0].y<t.y&&n[2].y>t.y}function B(e,t){return Math.pow(t.x-e.center.x,2)/Math.pow(e.radiusX,2)+Math.pow(t.y-e.center.y,2)/Math.pow(e.radiusY,2)<=1}function S(e){return[new s(e.center.x,e.center.y-e.radiusY),new s(e.center.x+e.radiusX,e.center.y),new s(e.center.x,e.center.y+e.radiusY),new s(e.center.x-e.radiusX,e.center.y)]}function O(e){const n=[],r=e.radiusX/100;n[0]=S(e)[3];let i,l;for(let c=1;c<400;c++)c<=400/2?(i=n[c-1].x+r,l=$(e,i,1)):(i=n[c-1].x-r,l=$(e,i,-1)),n[c]=new s(i,l);return n}function $(e,t,n){return n*e.radiusY*Math.sqrt(1-Math.pow((t-e.center.x)/e.radiusX,2))+e.center.y}class w{constructor(t,n,r){if(!Number.isFinite(n)||!Number.isFinite(r))throw new Error("Infinity/NaN passed in for width/height while constructing a Rectangle.");if(n!==void 0&&n<0)throw new Error("Negative value passed for width while constructing a Rectangle.");if(r!==void 0&&r<0)throw new Error("Negative value passed for height while constructing a Rectangle.");this.startVertex=t??new s(0,0),this.width=n??0,this.height=r??0}getCorners(){const t=[this.startVertex];return t.push(new s(this.startVertex.x+this.width,this.startVertex.y)),t.push(new s(this.startVertex.x+this.width,this.startVertex.y+this.height)),t.push(new s(this.startVertex.x,this.startVertex.y+this.height)),t}containsPoint(t){return I(this,t)}overlaps(t){return m(this,t)}contains(t){return L(this,t)}toString(){return"Rectangle with top left vertex at: "+this.startVertex.toString()+", w: "+this.width+", h: "+this.height}}class d{constructor(t,n,r){this.internalRectangle=r??new w,this.internalIdentifier=t,this.internalOrigin=n??new s}get rectangle(){return this.internalRectangle}set rectangle(t){this.internalRectangle=t}get identifier(){return this.internalIdentifier}set identifier(t){this.internalIdentifier=t}get origin(){return this.internalOrigin}set origin(t){this.internalOrigin=t}containsPoint(t){return this.internalRectangle.containsPoint(t)}containsNode(t){return t instanceof d?this.internalRectangle.contains(t.rectangle):this.internalRectangle.contains(t.ellipse)}toString(){return"An atom representing the proposition: "+this.internalIdentifier+" and Boundary box of: "+this.internalRectangle.toString()}}class g{constructor(t,n){this.internalEllipse=t,this.internalChildren=n??[]}get ellipse(){return this.internalEllipse}set ellipse(t){this.internalEllipse=t}get children(){return this.internalChildren}set children(t){this.internalChildren=t}set child(t){this.internalChildren.push(t)}getCurrentCut(t){for(let n=0;n<this.internalChildren.length;n++){const r=this.internalChildren[n];if(r instanceof g&&r.containsNode(t))return r.getCurrentCut(t)}return this}containsPoint(t){return this.internalEllipse===null?!0:this.internalEllipse.containsPoint(t)}containsNode(t){return this.internalEllipse===null?!0:t instanceof d?this.internalEllipse.contains(t.rectangle):this.internalEllipse.contains(t.ellipse)}remove(t){if(this.containsPoint(t)){let n=!0;for(let r=0;r<this.internalChildren.length;r++)if(this.internalChildren[r].containsPoint(t))return n=!1,this.internalChildren[r]instanceof g?this.internalChildren[r].remove(t):(this.internalChildren=this.internalChildren.splice(r,1),!0);if(n)return!0}return!1}toString(){let t;return this.internalEllipse===null?t="Sheet of Assertion of the AEG Tree":t=`A cut node with boundary box of 
`+this.internalEllipse.toString(),this.internalChildren.length>0&&(t+=`, 
With nested nodes: `+this.internalChildren.toString()),t}toFormulaString(){let t="";for(const n of this.internalChildren)n instanceof d?t+=n.identifier:n instanceof g&&(t+=n.toFormulaString()),t+=" ";return t=t.slice(0,-1),this.internalEllipse===null?t="["+t+"]":t="("+t+")",t}}class Q{constructor(t){this.sheet=t??new g(null)}verify(){return this.verifyAEG(this.sheet)}verifyAEG(t){for(let n=0;n<t.children.length;n++){if(!t.containsNode(t.children[n]))return!1;for(let r=n+1;r<t.children.length;r++)if(this.overlaps(t.children[n],t.children[r]))return!1}for(let n=0;n<t.children.length;n++)if(t.children[n]instanceof g&&!this.verifyAEG(t.children[n]))return!1;return!0}canInsert(t){const n=this.sheet.getCurrentCut(t);for(let r=0;r<n.children.length;r++)if(this.overlaps(t,n.children[r]))return!1;return!0}insert(t){if(!this.canInsert(t))throw new Error("Insertion failed. "+t+" had a collision.");const n=this.sheet.getCurrentCut(t),r=[...n.children];if(n.child=t,t instanceof g)for(let i=r.length-1;i>=0;i--)t.containsNode(r[i])&&(t.child=r[i],n.children.splice(i,1))}remove(t){this.sheet.remove(t)}overlaps(t,n){let r,i;return t instanceof d?n instanceof d?m(t.rectangle,n.rectangle):(r=n.ellipse,m(t.rectangle,r)):n instanceof d?(r=t.ellipse,m(r,n.rectangle)):(r=t.ellipse,i=n.ellipse,m(r,i))}toString(){return this.sheet.toFormulaString()}}class R{constructor(t,n,r){if(this.center=t??new s,this.radiusX=n??0,this.radiusY=r??0,!Number.isFinite(this.radiusX)||!Number.isFinite(this.radiusY))throw new Error("A radius passed into an Ellipse construction was NaN or Infinity.");if(this.radiusX!==void 0&&this.radiusX<0)throw new Error("Horizontal radius in an Ellipse construction was negative.");if(this.radiusY!==void 0&&this.radiusY<0)throw new Error("Vertical radius in an Ellipse construction was negative.");const i=new s(this.center.x-this.radiusX,this.center.y-this.radiusY);this.boundingBox=new w(i,this.radiusX*2,this.radiusY*2)}containsPoint(t){return B(this,t)}overlaps(t){return m(this,t)}contains(t){return L(this,t)}toString(){return"An ellipse with Center at: "+this.center.toString()+", Horizontal radius: "+this.radiusX+", Vertical radius: "+this.radiusY+", Bounding box: "+this.boundingBox.toString()}}const M=document.getElementById("canvas"),W=M.getContext("2d"),_=document.getElementById("showRect"),N=document.getElementById("mode");if(W===null)throw Error("2d rendering context not supported");const f=W;let E=new R,v=new s,X;function tt(e){v.x=e.clientX,v.y=e.clientY,X=!1}function et(e){const t=new g(new R),n=new s;n.x=e.clientX,n.y=e.clientY,f.clearRect(0,0,M.width,M.height),p(a.sheet),E=q(v,n),t.ellipse=E,X||(a.canInsert(t)&&z(E)?G(t,"#00FF00"):G(t,"#FF0000"))}function nt(e){let t=new g(E);const n=new s;n.x=e.clientX,n.y=e.clientY,E=q(v,n),t=new g(E),a.canInsert(t)&&!X&&z(E)&&a.insert(t),v=new s,f.clearRect(0,0,M.width,M.height),p(a.sheet)}function rt(){X=!0,v=new s,f.clearRect(0,0,M.width,M.height),p(a.sheet)}function q(e,t){const n=new s((t.x-e.x)/2+e.x,(t.y-e.y)/2+e.y),r=e.x-t.x,i=e.y-t.y,l=Math.abs(r),c=Math.abs(i);let Y,V;if(N.value==="circumscribed"){const H=Math.floor(n.distance(t));V=Math.floor(H*(c/l)),Y=Math.floor(H*(l/c))}else Y=l/2,V=c/2;return _.checked&&(f.beginPath(),f.rect(e.x,e.y,-r,-i),f.stroke()),new R(n,Y,V)}function G(e,t){f.strokeStyle=t;const n=e.ellipse,r=n.center;f.beginPath(),f.ellipse(r.x,r.y,n.radiusX,n.radiusY,0,0,2*Math.PI),f.stroke()}function z(e){return e.radiusX>15&&e.radiusY>15}const y=document.getElementById("canvas"),U=y.getContext("2d");if(U===null)throw Error("2d rendering context not supported");const u=U,K=document.getElementById("atomDisplay");let C,k,o=new d("A");K.innerHTML=o.identifier;function it(e){new RegExp(/^[A-Za-z]$/).test(e.key)&&(o.identifier=e.key,K.innerHTML=o.identifier)}function st(e){C=u.measureText(o.identifier),k=!1;const t=new s(e.clientX,e.clientY-C.actualBoundingBoxAscent);o.rectangle=new w(t,C.width,C.fontBoundingBoxDescent+C.actualBoundingBoxAscent),o.origin=new s(e.clientX,e.clientY),u.clearRect(0,0,y.width,y.height),p(a.sheet),a.canInsert(o)?P(o,"#00FF00"):P(o,"#FF0000")}function ot(e){o.origin=new s(e.clientX,e.clientY),o.rectangle.startVertex=new s(e.clientX,e.clientY-C.actualBoundingBoxAscent),u.clearRect(0,0,y.width,y.height),p(a.sheet),k||(a.canInsert(o)?P(o,"#00FF00"):P(o,"#FF0000"))}function lt(){a.canInsert(o)&&!k&&a.insert(o),o=new d(o.identifier),u.clearRect(0,0,y.width,y.height),p(a.sheet),console.log(a.toString())}function at(){o=new d(o.identifier),k=!0,u.clearRect(0,0,y.width,y.height),p(a.sheet)}function P(e,t){u.fillStyle=t,u.strokeStyle=t;const n=e.rectangle;u.beginPath(),u.fillText(e.identifier,e.origin.x,e.origin.y),u.rect(n.startVertex.x,n.startVertex.y,n.width,n.height),u.stroke()}const x=document.getElementById("canvas");x.width=window.innerWidth;x.height=window.innerHeight;const j=x.getContext("2d");if(j===null)throw Error("2d rendering context not supported");const h=j;h.font="35pt arial";const ct=document.getElementById("graphString"),Z=document.getElementById("cutTools"),J=document.getElementById("atomTools");window.addEventListener("keypress",dt);x.addEventListener("mousedown",ft);x.addEventListener("mousemove",gt);x.addEventListener("mouseup",wt);x.addEventListener("mouseout",yt);x.addEventListener("mouseenter",xt);let b="",F=!1,A=!0;const a=new Q;window.atomMode=ht;window.ellipseMode=ut;function ut(){b="cutMode",Z.style.display="block",J.style.display="none"}function ht(){b="atomMode",J.style.display="block",Z.style.display="none"}function dt(e){switch(b){case"atomMode":it(e);break}}function ft(e){switch(b){case"cutMode":tt(e);break;case"atomMode":st(e);break}F=!0}function gt(e){switch(b){case"cutMode":F&&A&&et(e);break;case"atomMode":F&&A&&ot(e);break}}function wt(e){switch(b){case"cutMode":nt(e);break;case"atomMode":lt();break}F=!1}function yt(){switch(b){case"cutMode":rt();break;case"atomMode":at();break}}function xt(){A=!0}function p(e){ct.innerHTML=a.toString();for(let t=0;e.children.length>t;t++)e.children[t]instanceof d?pt(e.children[t]):p(e.children[t]);e.ellipse instanceof R&&(h.strokeStyle="#000000",h.beginPath(),h.ellipse(e.ellipse.center.x,e.ellipse.center.y,e.ellipse.radiusX,e.ellipse.radiusY,0,0,2*Math.PI),h.stroke())}function pt(e){const t=e.rectangle;h.strokeStyle="#000000",h.fillStyle="#000000",h.beginPath(),h.rect(t.startVertex.x,t.startVertex.y,t.width,t.height),h.fillText(e.identifier,e.origin.x,e.origin.y),h.stroke()}
