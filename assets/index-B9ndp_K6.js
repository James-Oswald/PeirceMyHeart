(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const f of i)if(f.type==="childList")for(const g of f.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function n(i){const f={};return i.integrity&&(f.integrity=i.integrity),i.referrerPolicy&&(f.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?f.credentials="include":i.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function o(i){if(i.ep)return;i.ep=!0;const f=n(i);fetch(i.href,f)}})();class a{constructor(t,n){if(this.x=t,this.y=n,!Number.isFinite(this.x)||!Number.isFinite(this.y))throw new Error("NaN or Infinity value(s) were passed in constructing a Point.")}set(t,n){if(!Number.isFinite(t)||!Number.isFinite(n))throw new Error("NaN or Infinity value(s) were passed in setting "+this+"'s coords.");this.x=t,this.y=n}distance(t){const n=this.x-t.x,o=this.y-t.y;return Math.sqrt(n*n+o*o)}toString(){return"("+this.x+", "+this.y+")"}}function $e(e,t){return yn(e,t)||Ue(t,e)}function yn(e,t){if(e instanceof Me)return t instanceof Me?tn(e,t):en(t,e);if(t instanceof Me)return en(e,t);if(tn(e.boundingBox,t.boundingBox)||Ue(t.boundingBox,e.boundingBox)){const n=mn(e);let o;for(let i=0;i<n.length;i++)if(o=dt(t,n[i]),o<=0)return!0;return!1}return!1}function en(e,t){const n=t.getCorners(),o=et(e,n[0].x,1),i=et(e,n[1].x,1),f=et(e,n[0].x,-1),g=et(e,n[1].x,-1);if(n[0].y<o&&o<n[2].y||n[0].y<f&&f<n[2].y||n[0].y<i&&i<n[2].y||n[0].y<g&&g<n[2].y)return!0;const u=-1/Math.pow(e.radiusX,2),m=2*e.center.x/Math.pow(e.radiusX,2),d=-Math.pow(e.center.x,2)/Math.pow(e.radiusX,2)+1-Math.pow((n[0].y-e.center.y)/e.radiusY,2),y=-Math.pow(e.center.x,2)/Math.pow(e.radiusX,2)+1-Math.pow((n[2].y-e.center.y)/e.radiusY,2),H=(-m+Math.sqrt(Math.pow(m,2)-4*u*d))/(2*u),b=(-m-Math.sqrt(Math.pow(m,2)-4*u*d))/(2*u),N=(-m+Math.sqrt(Math.pow(m,2)-4*u*y))/(2*u),Je=(-m-Math.sqrt(Math.pow(m,2)-4*u*y))/(2*u);return!isNaN(H)&&n[0].x<H&&H<n[1].x||!isNaN(b)&&n[0].x<b&&b<n[1].x||!isNaN(N)&&n[0].x<N&&N<n[1].x||!isNaN(Je)&&n[0].x<Je&&Je<n[1].x}function Ue(e,t){if(e instanceof Me)if(t instanceof Me){const n=t.getCorners();for(let o=0;o<4;o++)if(!Dt(e,n[o]))return!1;return!0}else{const n=Vn(t);for(let o=0;o<4;o++)if(!Dt(e,n[o]))return!1;return!0}else if(t instanceof Me){const n=t.getCorners();let o;for(let i=0;i<4;i++)if(o=dt(e,n[i]),!(o<0))return!1;return!0}else{const n=mn(t);let o;for(let i=0;i<n.length;i++)if(o=dt(e,n[i]),!(o<0))return!1;return!0}}function tn(e,t){const n=e.getCorners(),o=t.getCorners();return(n[0].y<=o[0].y&&n[2].y>=o[0].y||n[0].y<=o[2].y&&n[2].y>=o[2].y||o[0].y<=n[0].y&&o[2].y>=n[0].y||o[0].y<=n[2].y&&o[2].y>=n[2].y)&&(n[0].x<=o[0].x&&n[1].x>=o[0].x||n[0].x<=o[1].x&&n[1].x>=o[1].x||o[0].x<=n[0].x&&o[1].x>=n[0].x||o[0].x<=n[1].x&&o[1].x>=n[1].x)}function Dt(e,t){const n=e.getCorners();return n[0].x<t.x&&n[1].x>t.x&&n[0].y<t.y&&n[2].y>t.y}function dt(e,t){return Math.pow(t.x-e.center.x,2)/Math.pow(e.radiusX,2)+Math.pow(t.y-e.center.y,2)/Math.pow(e.radiusY,2)-1}function Vn(e){return[new a(e.center.x,e.center.y-e.radiusY),new a(e.center.x+e.radiusX,e.center.y),new a(e.center.x,e.center.y+e.radiusY),new a(e.center.x-e.radiusX,e.center.y)]}function mn(e){const t=[];let n,o,i=1;for(let f=0;f<360;f++)n=e.center.x+e.radiusX*Math.cos(f*(Math.PI/180)),f>180&&(i=-1),o=et(e,n,i),t[f]=new a(n,o);return t}function et(e,t,n){return e.radiusX===0||e.radiusY===0?e.center.y:n*e.radiusY*Math.sqrt(1-Math.pow((t-e.center.x)/e.radiusX,2))+e.center.y}class Me{constructor(t,n,o){if(!Number.isFinite(n)||!Number.isFinite(o))throw new Error("Infinity/NaN passed in for width/height while constructing a Rectangle.");if(n!==void 0&&n<0)throw new Error("Negative value passed for width while constructing a Rectangle.");if(o!==void 0&&o<0)throw new Error("Negative value passed for height while constructing a Rectangle.");this.startVertex=t,this.width=n,this.height=o}getCorners(){const t=[this.startVertex];return t.push(new a(this.startVertex.x+this.width,this.startVertex.y)),t.push(new a(this.startVertex.x+this.width,this.startVertex.y+this.height)),t.push(new a(this.startVertex.x,this.startVertex.y+this.height)),t}containsPoint(t){return Dt(this,t)}overlaps(t){return $e(this,t)}contains(t){return Ue(this,t)}toString(){return"Rectangle with top left vertex at: "+this.startVertex.toString()+", w: "+this.width+", h: "+this.height}}class h{constructor(t,n,o,i){if(t.length!==1)throw new Error("String of length "+t.length+" passed in as identifier in AtomNode constructor, which is not of length 1.");if(!/^[A-Za-z]$/.test(t))throw new Error(t+" not contained in Latin alphabet passed in as identifier in AtomNode constructor.");this.internalIdentifier=t,this.internalOrigin=n,this.internalWidth=o,this.internalHeight=i}copy(){return new h(this.internalIdentifier,new a(this.internalOrigin.x,this.internalOrigin.y),this.internalWidth,this.internalHeight)}get width(){return this.internalWidth}set width(t){this.internalWidth=t}get height(){return this.internalHeight}set height(t){this.internalHeight=t}get identifier(){return this.internalIdentifier}set identifier(t){this.internalIdentifier=t}get origin(){return this.internalOrigin}set origin(t){this.internalOrigin=t}containsPoint(t){return this.calcRect().containsPoint(t)}calcRect(){return new Me(new a(this.internalOrigin.x,this.internalOrigin.y-this.internalHeight),this.internalWidth,this.internalHeight)}isEqualTo(t){return this.identifier===t.identifier}toString(){return"An atom representing the proposition: "+this.internalIdentifier+" and Boundary box of: "+this.calcRect().toString()}}class fe{constructor(t,n,o){if(this.center=t,this.radiusX=n,this.radiusY=o,!Number.isFinite(this.radiusX)||!Number.isFinite(this.radiusY))throw new Error("A radius passed into an Ellipse construction was NaN or Infinity.");if(this.radiusX!==void 0&&this.radiusX<0)throw new Error("Horizontal radius in an Ellipse construction was negative.");if(this.radiusY!==void 0&&this.radiusY<0)throw new Error("Vertical radius in an Ellipse construction was negative.");const i=new a(this.center.x-this.radiusX,this.center.y-this.radiusY);this.boundingBox=new Me(i,this.radiusX*2,this.radiusY*2)}containsPoint(t){return dt(this,t)<0}overlaps(t){return $e(this,t)}contains(t){return Ue(this,t)}toString(){return"An ellipse with Center at: "+this.center.toString()+", Horizontal radius: "+this.radiusX+", Vertical radius: "+this.radiusY+", Bounding box: "+this.boundingBox.toString()}}class c{constructor(t,n){this.internalEllipse=t,this.internalChildren=n??[]}copy(){let t;const n=[];if(this.ellipse!==null?t=new fe(new a(this.ellipse.center.x,this.ellipse.center.y),this.ellipse.radiusX,this.ellipse.radiusY):t=null,this.children.length>0)for(let o=0;o<this.children.length;o++){const i=this.children[o];i instanceof h,n.push(i.copy())}return new c(t,n)}get ellipse(){return this.internalEllipse}set ellipse(t){this.internalEllipse=t}get children(){return this.internalChildren}set children(t){this.internalChildren=t}set child(t){this.internalChildren.push(t)}clear(){this.internalChildren=[]}isEmptySheet(){return this.internalEllipse===null&&this.internalChildren.length===0}getCurrentCut(t){for(let n=0;n<this.internalChildren.length;n++){const o=this.internalChildren[n];if(o instanceof c&&o.containsNode(t))return o.getCurrentCut(t)}return this}containsPoint(t){return this.internalEllipse===null?!0:this.internalEllipse.containsPoint(t)}containsNode(t){return this.internalEllipse===null?!0:t instanceof h?Ue(this.internalEllipse,t.calcRect()):Ue(this.internalEllipse,t.internalEllipse)}getLowestNode(t){if(!this.containsPoint(t))return null;for(let n=0;n<this.internalChildren.length;n++)if(this.internalChildren[n].containsPoint(t))return this.internalChildren[n]instanceof h||this.internalChildren[n]instanceof c&&this.internalChildren[n].children.length===0?this.internalChildren[n]:this.internalChildren[n].getLowestNode(t);return this}getLowestParent(t){if(!this.containsPoint(t))throw new Error("This parent "+this.toString+" does not contain the point.");for(let n=0;n<this.internalChildren.length;n++)if(this.internalChildren[n].containsPoint(t)){if(this.internalChildren[n]instanceof h||this.internalChildren[n]instanceof c&&this.internalChildren[n].children.length===0)return this;{const o=this.internalChildren[n];for(let i=0;i<o.children.length;i++)if(o.children[i].containsPoint(t))return o.getLowestParent(t);return this}}return null}getLevel(t,n){for(let o=0;o<this.internalChildren.length;o++){if(this.internalChildren[o]===t)return n;if(this.internalChildren[o]instanceof c&&this.internalChildren[o].containsNode(t))return this.internalChildren[o].getLevel(t,n+1)}return-1}remove(t){if(!this.containsPoint(t))return!1;for(let n=0;n<this.children.length;n++)if(this.children[n].containsPoint(t)){if(this.children[n]instanceof h||this.children[n]instanceof c&&this.children[n].children.length===0)return this.children.splice(n,1),!0;for(let o=0;o<this.children[n].children.length;o++)if(this.children[n].children[o].containsPoint(t))if(this.children[n].children[o]instanceof h)this.children[n].children.splice(o,1);else return this.children[n].children[o].remove(t);return this.children.splice(n,1),!0}return!1}isEqualTo(t){if(this.children.length===t.children.length){if(this.children.length===0)return!0;const n=this.copy().children,o=t.copy().children;for(let i=0;i<n.length;i++)for(let f=0;f<o.length;f++){if(n[i]instanceof h&&o[f]instanceof h&&n[i].isEqualTo(o[f])||n[i]instanceof c&&o[f]instanceof c&&n[i].isEqualTo(o[f])){n.splice(i,1),o.splice(f,1),i--;break}if(f===o.length-1)return!1}return n.length===0&&o.length===0}return!1}toFormulaString(){let t="";for(const n of this.internalChildren)n instanceof h?t+=n.identifier:n instanceof c&&(t+=n.toFormulaString()),t+=" ";return t=t.slice(0,-1),this.internalEllipse===null?t="["+t+"]":t="("+t+")",t}toString(){let t;return this.internalEllipse===null?t="Sheet of Assertion of the AEG Tree":t="A cut node with boundary box of "+this.internalEllipse.toString(),this.internalChildren.length>0&&(t+=", With nested nodes: "+this.internalChildren.toString()),t}}class P{constructor(t){t!==void 0?(this.internalSheet=t.copy(),this.internalSheet.ellipse=null):this.internalSheet=new c(null)}get sheet(){return this.internalSheet}set sheet(t){this.internalSheet=t}getLowestParent(t){return this.internalSheet.getLowestParent(t)}getLowestNode(t){return this.internalSheet.getLowestNode(t)}getLevel(t){return this.internalSheet.getLevel(t,0)}verify(){return this.verifyAEG(this.internalSheet)}verifyAEG(t){for(let n=0;n<t.children.length;n++){if(!t.containsNode(t.children[n]))return!1;for(let o=n+1;o<t.children.length;o++)if(this.overlaps(t.children[n],t.children[o]))return!1}for(let n=0;n<t.children.length;n++)if(t.children[n]instanceof c&&!this.verifyAEG(t.children[n]))return!1;return!0}canInsert(t){const n=this.internalSheet.getCurrentCut(t);for(let o=0;o<n.children.length;o++)if(this.intersects(t,n.children[o]))return!1;return!0}insert(t){if(!this.canInsert(t))throw new Error("Insertion failed. "+t+" had a collision.");const n=this.internalSheet.getCurrentCut(t),o=[...n.children];if(n.child=t,t instanceof c)for(let i=o.length-1;i>=0;i--)t.containsNode(o[i])&&(t.child=o[i],n.children.splice(i,1));return!0}remove(t){return this.internalSheet.remove(t)}clear(){this.internalSheet.clear()}intersects(t,n){const o=t instanceof h?t.calcRect():t.ellipse,i=n instanceof h?n.calcRect():n.ellipse;return yn(o,i)}overlaps(t,n){let o,i;return t instanceof h?n instanceof h?$e(t.calcRect(),n.calcRect()):(o=n.ellipse,$e(t.calcRect(),o)):n instanceof h?(o=t.ellipse,$e(o,n.calcRect())):(o=t.ellipse,i=n.ellipse,$e(o,i))}isEqualTo(t){return this.sheet.isEqualTo(t.sheet)}toString(){return this.internalSheet.toFormulaString()}}var k=(e=>(e[e.CLEAR=0]="CLEAR",e[e.DC_INSERT=1]="DC_INSERT",e[e.DC_DELETE=2]="DC_DELETE",e[e.MOVE_SINGLE=3]="MOVE_SINGLE",e[e.MOVE_MULTI=4]="MOVE_MULTI",e[e.ITERATION=5]="ITERATION",e[e.DEITERATION=6]="DEITERATION",e[e.INSERTION=7]="INSERTION",e[e.ERASURE=8]="ERASURE",e[e.RESIZE=9]="RESIZE",e[e.PASTE_GRAPH=10]="PASTE_GRAPH",e))(k||{});class W{constructor(t,n){this.appliedRule=n??0,this.tree=new P(t==null?void 0:t.sheet),this.index=r.proof.length}}let Ot,l=new a(0,0),Bt;function jn(){p("cursor: grab")}function Wn(e){p("cursor: grabbing"),Ot=new a(e.x-l.x,e.y-l.y),Bt=!1}function Zn(e){Bt||(p("cursor: grabbing"),l=new a(e.x-Ot.x,e.y-Ot.y),Sn())}function Jn(){p("cursor: grab")}function Kn(){p("cursor: default"),Bt=!0,Sn()}function Sn(){r.modeState==="Proof"?T():w(r.tree)}var Qe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Tn={exports:{}};(function(e,t){function n(){var g=document.querySelector("[data-toggle-theme]"),u=g?g.getAttribute("data-key"):null;(function(m=localStorage.getItem(u||"theme")){localStorage.getItem(u||"theme")&&(document.documentElement.setAttribute("data-theme",m),g&&[...document.querySelectorAll("[data-toggle-theme]")].forEach(d=>{d.classList.add(g.getAttribute("data-act-class"))}))})(),g&&[...document.querySelectorAll("[data-toggle-theme]")].forEach(m=>{m.addEventListener("click",function(){var d=m.getAttribute("data-toggle-theme");if(d){var y=d.split(",");document.documentElement.getAttribute("data-theme")==y[0]?y.length==1?(document.documentElement.removeAttribute("data-theme"),localStorage.removeItem(u||"theme")):(document.documentElement.setAttribute("data-theme",y[1]),localStorage.setItem(u||"theme",y[1])):(document.documentElement.setAttribute("data-theme",y[0]),localStorage.setItem(u||"theme",y[0]))}[...document.querySelectorAll("[data-toggle-theme]")].forEach(H=>{H.classList.toggle(this.getAttribute("data-act-class"))})})})}function o(){var g=document.querySelector("[data-set-theme='']"),u=g?g.getAttribute("data-key"):null;(function(m=localStorage.getItem(u||"theme")){if(m!=null&&m!="")if(localStorage.getItem(u||"theme")&&localStorage.getItem(u||"theme")!=""){document.documentElement.setAttribute("data-theme",m);var d=document.querySelector("[data-set-theme='"+m.toString()+"']");d&&([...document.querySelectorAll("[data-set-theme]")].forEach(y=>{y.classList.remove(y.getAttribute("data-act-class"))}),d.getAttribute("data-act-class")&&d.classList.add(d.getAttribute("data-act-class")))}else{var d=document.querySelector("[data-set-theme='']");d.getAttribute("data-act-class")&&d.classList.add(d.getAttribute("data-act-class"))}})(),[...document.querySelectorAll("[data-set-theme]")].forEach(m=>{m.addEventListener("click",function(){document.documentElement.setAttribute("data-theme",this.getAttribute("data-set-theme")),localStorage.setItem(u||"theme",document.documentElement.getAttribute("data-theme")),[...document.querySelectorAll("[data-set-theme]")].forEach(d=>{d.classList.remove(d.getAttribute("data-act-class"))}),m.getAttribute("data-act-class")&&m.classList.add(m.getAttribute("data-act-class"))})})}function i(){var g=document.querySelector("select[data-choose-theme]"),u=g?g.getAttribute("data-key"):null;(function(m=localStorage.getItem(u||"theme")){if(localStorage.getItem(u||"theme")){document.documentElement.setAttribute("data-theme",m);var d=document.querySelector("select[data-choose-theme] [value='"+m.toString()+"']");d&&[...document.querySelectorAll("select[data-choose-theme] [value='"+m.toString()+"']")].forEach(y=>{y.selected=!0})}})(),g&&[...document.querySelectorAll("select[data-choose-theme]")].forEach(m=>{m.addEventListener("change",function(){document.documentElement.setAttribute("data-theme",this.value),localStorage.setItem(u||"theme",document.documentElement.getAttribute("data-theme")),[...document.querySelectorAll("select[data-choose-theme] [value='"+localStorage.getItem(u||"theme")+"']")].forEach(d=>{d.selected=!0})})})}function f(g=!0){g===!0?document.addEventListener("DOMContentLoaded",function(u){n(),i(),o()}):(n(),i(),o())}e.exports={themeChange:f}})(Tn);var eo=Tn.exports;const to=document.getElementById("theme-select");eo.themeChange();let En=Ie("--good-placement"),bn=Ie("--bad-placement"),xn=Ie("--canvas-items");function Ie(e){return getComputedStyle(document.body).getPropertyValue(e)}function Mn(){setTimeout(()=>{En=Ie("--good-placement"),bn=Ie("--bad-placement"),xn=Ie("--canvas-items"),r.modeState==="Draw"?w(r.tree):T()})}to.addEventListener("input",()=>{Mn()});window.addEventListener("DOMContentLoaded",()=>{Mn()});function S(){return bn}function E(){return En}function In(){return xn}const ht=document.getElementById("canvas"),Pn=ht.getContext("2d");if(Pn===null)throw Error("2d rendering context not supported.");const I=Pn;I.font="35pt arial";const no=document.getElementById("graphString"),oo=document.getElementById("proofString"),ro=document.getElementById("atomBox"),kn=document.getElementById("atomBoxes");kn.addEventListener("input",so);function Y(e,t){const n=e.ellipse;if(n!==null){I.strokeStyle=t;const o=n.center;I.beginPath(),I.ellipse(o.x+l.x,o.y+l.y,n.radiusX,n.radiusY,0,0,2*Math.PI),I.stroke()}}function q(e,t,n){I.textBaseline="bottom";const o=I.measureText(e.identifier);I.fillStyle=t,I.strokeStyle=t,I.beginPath(),I.fillText(e.identifier,e.origin.x+l.x,e.origin.y+l.y),(kn.checked||ro.checked&&n)&&I.rect(e.origin.x+l.x,e.origin.y+l.y-o.actualBoundingBoxAscent,e.width,e.height),I.stroke()}function Cn(e,t,n){I.beginPath(),I.strokeStyle=n;const o=e.x-t.x,i=e.y-t.y;I.rect(e.x+l.x,e.y+l.y,-o,-i),I.stroke()}function p(e){ht.style.cssText=e}function io(e,t,n){return e===E()?t:n}function D(e,t,n){p(io(e,t,n))}function so(){w(r.tree)}function st(){I.clearRect(0,0,ht.width,ht.height)}function w(e,t){no.innerHTML=e.toString(),st(),Ft(e.sheet),window.treeString=St(e)}function Ft(e,t){for(let n=0;n<e.children.length;n++)e.children[n]instanceof h?lo(e.children[n]):Ft(e.children[n]);e.ellipse instanceof fe&&(I.strokeStyle=In(),I.beginPath(),I.ellipse(e.ellipse.center.x+l.x,e.ellipse.center.y+l.y,e.ellipse.radiusX,e.ellipse.radiusY,0,0,2*Math.PI),I.globalCompositeOperation="destination-over",I.fillStyle=r.modeState==="Draw"&&r.tree.getLevel(e)%2===0||r.modeState==="Proof"&&r.currentProofStep.tree.getLevel(e)%2===0?Ie("--canvas-odd-bg"):Ie("--canvas-bg"),I.fill(),I.globalCompositeOperation="source-over",I.stroke())}function lo(e){q(e,In(),!1)}function T(){let e;r.proof.length===0||r.currentProofStep===void 0?e=new P:e=r.currentProofStep.tree,st(),oo.innerHTML=e.toString(),Ft(e.sheet)}function se(e,t){if(e instanceof h)q(e,t,!1);else if(e instanceof c){Y(e,t);for(let n=0;n<e.children.length;n++)se(e.children[n],t)}}function Ln(e,t){const n=new a(1,1);if(e instanceof c&&e.ellipse!==null){const o=e.ellipse,i=[new a(o.center.x-o.radiusX,o.center.y),new a(o.center.x,o.center.y-o.radiusY),new a(o.center.x+o.radiusX,o.center.y),new a(o.center.x,o.center.y+o.radiusY)];i[0].distance(t)>=i[2].distance(t)?n.x=1:n.x=-1,i[1].distance(t)>=i[3].distance(t)?n.y=1:n.y=-1}return n}const ao={[k.CLEAR]:"",[k.DC_INSERT]:"dot-circle-o",[k.DC_DELETE]:"times-circle",[k.MOVE_SINGLE]:"mouse-pointer",[k.MOVE_MULTI]:"arrows",[k.ITERATION]:"expand",[k.DEITERATION]:"compress",[k.INSERTION]:"plus",[k.ERASURE]:"trash",[k.RESIZE]:"arrows-alt",[k.PASTE_GRAPH]:"files-o"};function Rn(e,t){var u;const n=document.createElement("div");n.className="row";const o=t||r.proof.length;n.id="Row: "+o;const i=document.createElement("button");i.type="button",i.id="Step: "+r.proof.length,i.className="proofNodeButton",i.title=e.tree.toString(),i.onclick=function(){vt(e)};const f=document.createElement("Text"),g=ao[e.appliedRule];f.className="fa fa-"+g,i.appendChild(f),n.appendChild(i),(u=document.getElementById("proofHistoryBar"))==null||u.appendChild(n)}function vt(e){r.currentProofStep=e,T()}function Nt(e){var t;for(let n=r.proof.length;n>e+1;n--)(t=document.getElementById("Row: "+n))==null||t.remove()}function nn(){var e;(e=document.getElementById("Row: "+(r.proof.length+1)))==null||e.remove()}var te=(e=>(e[e.CLEAR=0]="CLEAR",e[e.DRAW_ATOM=1]="DRAW_ATOM",e[e.DRAW_CUT=2]="DRAW_CUT",e[e.MOVE_SINGLE=3]="MOVE_SINGLE",e[e.MOVE_MULTI=4]="MOVE_MULTI",e[e.COPY_SINGLE=5]="COPY_SINGLE",e[e.COPY_MULTI=6]="COPY_MULTI",e[e.DELETE_SINGLE=7]="DELETE_SINGLE",e[e.DELETE_MULTI=8]="DELETE_MULTI",e[e.RESIZE=9]="RESIZE",e[e.COPY_GRAPH=10]="COPY_GRAPH",e))(te||{});class co{constructor(t,n){this.tree=new P(t==null?void 0:t.sheet)??new P,this.appliedMove=n??0}}var s=(e=>(e[e.none=0]="none",e[e.atomTool=1]="atomTool",e[e.cutTool=2]="cutTool",e[e.dragTool=3]="dragTool",e[e.drawMoveSingleTool=4]="drawMoveSingleTool",e[e.drawMoveMultiTool=5]="drawMoveMultiTool",e[e.copySingleTool=6]="copySingleTool",e[e.copyMultiTool=7]="copyMultiTool",e[e.deleteSingleTool=8]="deleteSingleTool",e[e.deleteMultiTool=9]="deleteMultiTool",e[e.resizeTool=10]="resizeTool",e[e.copyFromDrawTool=11]="copyFromDrawTool",e[e.pasteInProofTool=12]="pasteInProofTool",e[e.doubleCutInsertionTool=13]="doubleCutInsertionTool",e[e.doubleCutDeletionTool=14]="doubleCutDeletionTool",e[e.insertionTool=15]="insertionTool",e[e.erasureTool=16]="erasureTool",e[e.proofMoveSingleTool=17]="proofMoveSingleTool",e[e.proofMoveMultiTool=18]="proofMoveMultiTool",e[e.proofResizeTool=19]="proofResizeTool",e[e.iterationTool=20]="iterationTool",e[e.deiterationTool=21]="deiterationTool",e[e.proofClearTool=22]="proofClearTool",e[e.drawClearTool=23]="drawClearTool",e))(s||{});const G=class G{static pushToDrawStack(t){this.recentlyUndoneOrRedoneDrawMove&&(this.drawHistoryRedoStack=[],this.recentlyUndoneOrRedoneDrawMove=!1),this.drawHistoryUndoStack.push(new co(this.tree,t))}static undoDrawStep(){const t=this.drawHistoryUndoStack.pop();if(t!==void 0){if(this.drawHistoryUndoStack[this.drawHistoryUndoStack.length-1]===void 0){this.tree=new P,w(this.tree),this.drawHistoryRedoStack.push(t);return}this.drawHistoryRedoStack.push(t),this.tree=new P(this.drawHistoryUndoStack[this.drawHistoryUndoStack.length-1].tree.sheet),w(this.tree),this.recentlyUndoneOrRedoneDrawMove=!0}}static redoDrawStep(){const t=this.drawHistoryRedoStack.pop();if(t!==void 0){if(this.drawHistoryRedoStack[this.drawHistoryRedoStack.length-1]===void 0){this.tree=new P(t.tree.sheet),w(this.tree),this.drawHistoryUndoStack.push(t);return}this.drawHistoryUndoStack.push(t),this.tree=new P(t.tree.sheet),w(this.tree),this.recentlyUndoneOrRedoneDrawMove=!0}}static undoProofStep(){if(this.proof.length<=1)return;const t=this.proof.pop();if(t!==void 0){if(this.proof.length===0){nn();return}nn(),this.proofHistoryRedoStack.push(t),vt(this.proof[this.proof.length-1]),T(),this.recentlyUndoneOrRedoneProofMove=!0}}static redoProofStep(){if(this.proofHistoryRedoStack.length===0)return;const t=this.proofHistoryRedoStack.pop();if(t!==void 0){if(this.proofHistoryRedoStack[this.proofHistoryRedoStack.length-1]===void 0){this.pushToProof(t),T();return}this.recentlyUndoneOrRedoneProofMove=!1,this.pushToProof(t),vt(t),T()}}static getLastProofStep(){return G.proof.length===0?new W(new P):G.proof[G.proof.length-1]}static pushToProof(t){var n;if(this.recentlyUndoneOrRedoneProofMove&&(this.proofHistoryRedoStack=[],this.recentlyUndoneOrRedoneProofMove=!1),t.appliedRule===k.PASTE_GRAPH)this.proof.pop(),(n=document.getElementById("Row: 1"))==null||n.remove(),t.index=0;else if(this.currentProofStep&&this.proof.length>0&&(!this.currentProofStep.tree.isEqualTo(this.proof[this.proof.length-1].tree)||this.currentProofStep.appliedRule!==this.proof[this.proof.length-1].appliedRule)){const o=this.currentProofStep.index;Nt(o),this.proof=this.proof.splice(0,o+1),t.index=this.proof.length}this.currentProofStep=t,this.proof.push(t),Rn(t)}static clearProof(){Nt(-1),this.proof=[],this.pushToProof(new W),this.currentProofStep=this.proof[0]}};G.tree=new P,G.drawHistoryUndoStack=[],G.drawHistoryRedoStack=[],G.recentlyUndoneOrRedoneDrawMove=!1,G.proof=[],G.proofHistoryRedoStack=[],G.recentlyUndoneOrRedoneProofMove=!1,G.selectForProof=new P,G.toolState=0,G.modeState="Draw";let r=G;var An={exports:{}};(function(e,t){(function(n,o){o()})(Qe,function(){function n(d,y){return typeof y>"u"?y={autoBom:!1}:typeof y!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),y={autoBom:!y}),y.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function o(d,y,H){var b=new XMLHttpRequest;b.open("GET",d),b.responseType="blob",b.onload=function(){m(b.response,y,H)},b.onerror=function(){console.error("could not download file")},b.send()}function i(d){var y=new XMLHttpRequest;y.open("HEAD",d,!1);try{y.send()}catch{}return 200<=y.status&&299>=y.status}function f(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var y=document.createEvent("MouseEvents");y.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(y)}}var g=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Qe=="object"&&Qe.global===Qe?Qe:void 0,u=g.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),m=g.saveAs||(typeof window!="object"||window!==g?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(d,y,H){var b=g.URL||g.webkitURL,N=document.createElement("a");y=y||d.name||"download",N.download=y,N.rel="noopener",typeof d=="string"?(N.href=d,N.origin===location.origin?f(N):i(N.href)?o(d,y,H):f(N,N.target="_blank")):(N.href=b.createObjectURL(d),setTimeout(function(){b.revokeObjectURL(N.href)},4e4),setTimeout(function(){f(N)},0))}:"msSaveOrOpenBlob"in navigator?function(d,y,H){if(y=y||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(n(d,H),y);else if(i(d))o(d,y,H);else{var b=document.createElement("a");b.href=d,b.target="_blank",setTimeout(function(){f(b)})}}:function(d,y,H,b){if(b=b||open("","_blank"),b&&(b.document.title=b.document.body.innerText="downloading..."),typeof d=="string")return o(d,y,H);var N=d.type==="application/octet-stream",Je=/constructor/i.test(g.HTMLElement)||g.safari,Kt=/CriOS\/[\d]+/.test(navigator.userAgent);if((Kt||N&&Je||u)&&typeof FileReader<"u"){var It=new FileReader;It.onloadend=function(){var Ke=It.result;Ke=Kt?Ke:Ke.replace(/^data:[^;]*;/,"data:attachment/file;"),b?b.location.href=Ke:location=Ke,b=null},It.readAsDataURL(d)}else{var Qt=g.URL||g.webkitURL,Pt=Qt.createObjectURL(d);b?b.location=Pt:location.href=Pt,b=null,setTimeout(function(){Qt.revokeObjectURL(Pt)},4e4)}});g.saveAs=m.saveAs=m,e.exports=m})})(An);var uo=An.exports;const fo=Qn(uo);async function ho(e,t){const n=JSON.stringify(t,null,"	"),o=await e.createWritable();await o.write(n),await o.close()}function $t(e,t){const n=JSON.parse(t);if(e==="Draw"){const o=n.internalSheet.internalChildren;return on(o)}else{const o=[];let i;for(i of n){const f=i.tree.internalSheet.internalChildren;o.push(new W(on(f),i.appliedRule))}return o}}function on(e){const t=new P,n=[];for(const o of e)Object.prototype.hasOwnProperty.call(o,"internalEllipse")?n.push(Dn(o)):n.push(On(o));return t.sheet.children=n,t}function Dn(e){const t=new fe(new a(e.internalEllipse.center.x,e.internalEllipse.center.y),e.internalEllipse.radiusX,e.internalEllipse.radiusY),n=[];for(const o of e.internalChildren)"internalEllipse"in o?n.push(Dn(o)):n.push(On(o));return new c(t,n)}function On(e){const t=e.internalIdentifier,n=new a(e.internalOrigin.x,e.internalOrigin.y);return new h(t,n,e.internalWidth,e.internalHeight)}function St(e){return JSON.stringify(e,null,"	")}async function vn(){let e,t;r.modeState==="Draw"?(e=r.tree.toString(),t=r.tree):(r.proof.length===1?e="One-Step Proof":e=r.proof[0].tree.toString()+" PROVES "+r.getLastProofStep().tree.toString(),t=r.proof);try{if("showSaveFilePicker"in window){const n=await window.showSaveFilePicker({excludeAcceptAllOption:!0,suggestedName:e,startIn:"downloads",types:[{accept:{"text/json":[".json"]}}]});ho(n,t)}else{const n=new Blob([St(t)],{type:"text/json"});fo(n,e+".json")}}catch{}}function rn(e){const t=new FileReader;t.addEventListener("load",()=>{var o;const n=t.result;if(typeof n=="string"){const i=$t(r.modeState,n);if(r.modeState==="Draw")r.tree=i,w(r.tree);else if(r.modeState==="Proof"){r.clearProof(),r.proof=i,(o=document.getElementById("Row: 1"))==null||o.remove();for(let f=0;f<r.proof.length;f++)Rn(r.proof[f],f+1);r.currentProofStep=r.proof[r.proof.length-1],T()}}else console.log("Loading failed because reading the file was unsuccessful.")}),t.readAsText(e)}async function po(){try{if("showOpenFilePicker"in window){const[e]=await window.showOpenFilePicker({excludeAcceptAllOption:!0,multiple:!1,startIn:"downloads",types:[{accept:{"text/json":[".json"]}}]}),t=await e.getFile();rn(t)}else{const e=document.createElement("input");e.type="file",e.accept=".json",e.addEventListener("change",()=>{var n;const t=(n=e.files)==null?void 0:n.item(0);rn(t)}),e.click()}}catch{}}let kt=!0,Ct=null,Lt=null,sn=s.none,ln=s.none;const an=document.getElementById("DrawButtons"),cn=document.getElementById("ProofButtons"),un=document.getElementById("proofHistoryBar");function wo(){if(kt=!kt,kt){an.style.display="block",hn.style.display="block",cn.style.display="none",pn.style.display="none",un.style.display="none",r.modeState="Draw",Lt=JSON.stringify(r.proof),ln=r.toolState;let e=null;if(Ct!==null&&(e=$t(r.modeState,Ct)),e!==null)r.tree.sheet=e.sheet;else throw Error("Invalidly cached AEG.");r.toolState=sn,w(r.tree)}else{an.style.display="none",hn.style.display="none",cn.style.display="block",pn.style.display="block",un.style.display="block",r.modeState="Proof",Ct=JSON.stringify(r.tree),sn=r.toolState,r.proof.length===0&&r.pushToProof(new W);let e=null;Lt!==null&&(e=$t(r.modeState,Lt)),e!==null&&(r.proof=e),r.toolState=ln,T()}}let Xt;function go(){Xt=!0,st(),se(r.tree.sheet,S())}function yo(){Xt&&(r.tree=new P,w(r.tree),r.pushToDrawStack(te.CLEAR))}function mo(){Xt=!1,w(r.tree)}const So=document.getElementById("canvas"),Nn=So.getContext("2d");if(Nn===null)throw Error("2d rendering context not supported.");const To=Nn,Eo=document.getElementById("atomDisplay");let Tt,Yt,F=lt("A",new a(0,0));function bo(e){new RegExp(/^[A-Za-z]$/).test(e.key)&&(F=lt(e.key,new a(F.origin.x,F.origin.y)),F.origin.x!==0&&F.origin.y!==0&&Yt&&qt())}function xo(e){Tt=!1,Yt=!0,F=lt(F.identifier,new a(e.clientX-l.x,e.clientY-l.y)),qt()}function Mo(e){F=lt(F.identifier,new a(e.clientX-l.x,e.clientY-l.y)),qt()}function Io(e){p("cursor: default"),F=lt(F.identifier,new a(e.clientX-l.x,e.clientY-l.y)),r.tree.canInsert(F)&&!Tt&&(r.tree.insert(F),r.pushToDrawStack(te.DRAW_ATOM)),w(r.tree),Yt=!1}function Po(){p("cursor: default"),Tt=!0,w(r.tree)}function lt(e,t){Eo.innerHTML=e;const n=To.measureText(e);return new h(e,new a(t.x,t.y),n.width,n.fontBoundingBoxDescent+n.actualBoundingBoxAscent)}function qt(){w(r.tree),Tt||(r.tree.canInsert(F)?(p("cursor: default"),q(F,E(),!0)):(p("cursor: no-drop"),q(F,S(),!0)))}const ko=document.getElementById("mode");function Pe(e,t,n){if(t.ellipse!==null){const o=ne(t,n);if(!e.canInsert(o))return!1}for(let o=0;o<t.children.length;o++){if(t.children[o]instanceof c&&t.children[o].ellipse!==null&&!Pe(e,t.children[o],n))return!1;if(t.children[o]instanceof h){let i=t.children[o];if(i=A(i,n),!e.canInsert(i))return!1}}return!0}function j(e,t,n){if(e instanceof c&&e.ellipse!==null){const o=ne(e,n);if(Y(o,t),e.children.length!==0)for(let i=0;i<e.children.length;i++)j(e.children[i],t,n)}else if(e instanceof h){const o=A(e,n);q(o,t,!0)}}function at(e,t,n){const o=n||r.tree;if(e instanceof c&&e.ellipse!==null){const i=ne(e,t);if(o.insert(i),e.children.length!==0)for(let f=0;f<e.children.length;f++)at(e.children[f],t,n)}else if(e instanceof h){const i=A(e,t);o.insert(i)}}function nt(e,t){return e instanceof h?A(e,t):ne(e,t)}function ne(e,t){if(e.ellipse!==null)return new c(new fe(new a(e.ellipse.center.x+t.x-l.x,e.ellipse.center.y+t.y-l.y),e.ellipse.radiusX,e.ellipse.radiusY));throw new Error("Cannot alter the position of a CutNode without no Ellipse.")}function Gt(e,t){if(e.ellipse!==null){const n=[];for(let o=0;o<e.children.length;o++)e.children[o]instanceof c?n.push(Gt(e.children[o],t)):e.children[o]instanceof h&&n.push(A(e.children[o],t));return new c(new fe(new a(e.ellipse.center.x+t.x-l.x,e.ellipse.center.y+t.y-l.y),e.ellipse.radiusX,e.ellipse.radiusY),n)}else throw new Error("Cannot alter the position of a CutNode without an Ellipse.")}function A(e,t){return new h(e.identifier,new a(e.origin.x+t.x-l.x,e.origin.y+t.y-l.y),e.width,e.height)}function Et(e,t,n){if(e.ellipse!==null)return new c(new fe(new a(e.ellipse.center.x+t.x,e.ellipse.center.y+t.y),Math.abs(e.ellipse.radiusX+t.x*n.x),Math.abs(e.ellipse.radiusY+t.y*n.y)));throw new Error("Cannot alter the position of a CutNode without an Ellipse.")}function ct(e,t){for(let n=0;n<t.children.length;n++)e.canInsert(t.children[n])&&e.insert(t.children[n])}function Ne(e,t){t instanceof c&&t.ellipse===null?e.sheet=t:e.canInsert(t)&&(e.insert(t),t instanceof c&&t.children.length!==0&&ct(e,t),w(e))}function bt(e,t){const n=new a((t.x-e.x)/2+e.x,(t.y-e.y)/2+e.y),o=e.x-t.x,i=e.y-t.y,f=Math.abs(o),g=Math.abs(i);let u,m;if(ko.value==="circumscribed"){const d=Math.floor(n.distance(t));m=Math.floor(d*(g/f)),u=Math.floor(d*(f/g))}else u=f/2,m=g/2;return new fe(n,u,m)}function Re(e){return e.radiusX>15&&e.radiusY>15}const Co=document.getElementById("showRect");let pt,xt;function Lo(){p("cursor: crosshair")}function Ro(e){pt=new a(e.clientX-l.x,e.clientY-l.y),xt=!1}function Ao(e){const t=new c(new fe(new a(0,0),0,0)),n=new a(e.clientX-l.x,e.clientY-l.y);if(w(r.tree),t.ellipse=bt(pt,n),!xt){const i=r.tree.canInsert(t)&&Re(t.ellipse)?E():S();D(i,"cursor: crosshair","cursor: no-drop"),Y(t,i),Co.checked&&Cn(pt,n,i)}}function Do(e){p("cursor: crosshair");const t=new a(e.clientX-l.x,e.clientY-l.y),n=new c(bt(pt,t));r.tree.canInsert(n)&&!xt&&Re(n.ellipse)&&(r.tree.insert(n),r.pushToDrawStack(te.DRAW_CUT)),w(r.tree)}function Oo(){p("cursor: default"),xt=!0,w(r.tree)}let Se,C=null,Ae;function vo(e){if(Se=new a(e.x-l.x,e.y-l.y),C=r.tree.getLowestNode(Se),C!==r.tree.sheet&&C!==null){p("cursor: grabbing");const t=r.tree.getLowestParent(Se);if(t!==null&&t.remove(Se),C instanceof c&&C.children.length!==0){for(let n=0;n<C.children.length;n++)r.tree.insert(C.children[n]);C.children=[]}Ae=!0,w(r.tree),C instanceof h?q(C,E(),!0):Y(C,E())}else Ae=!1}function No(e){if(Ae){const t=new a(e.x-Se.x,e.y-Se.y);if(C instanceof c){const n=ne(C,t);w(r.tree);const o=r.tree.canInsert(n)?E():S();Y(n,o),D(o,"cursor: grabbing","cursor: no-drop")}else if(C instanceof h){const n=A(C,t);w(r.tree);const o=r.tree.canInsert(n)?E():S();q(n,o,!0),D(o,"cursor: grabbing","cursor: no-drop")}}}function $o(e){if(p("cursor: default"),Ae){const t=new a(e.x-Se.x,e.y-Se.y);if(C instanceof c){const n=ne(C,t);r.tree.canInsert(n)?r.tree.insert(n):r.tree.insert(C)}else if(C instanceof h){const n=A(C,t);r.tree.canInsert(n)?r.tree.insert(n):r.tree.insert(C)}w(r.tree),r.pushToDrawStack(te.MOVE_SINGLE)}Ae=!1}function Uo(){p("cursor: default"),Ae&&C!==null&&r.tree.insert(C),Ae=!1,w(r.tree)}let Te,v=null,De;function Ho(e){if(Te=new a(e.x-l.x,e.y-l.y),v=r.tree.getLowestNode(Te),v!==r.tree.sheet&&v!==null){p("cursor: grabbing");const t=r.tree.getLowestParent(Te);t!==null&&t.remove(Te),De=!0,w(r.tree),se(v,E())}else De=!1}function Bo(e){if(De){const t=new a(e.x-Te.x,e.y-Te.y);if(w(r.tree),v instanceof c){const n=Pe(r.tree,v,t)?E():S();j(v,n,t),D(n,"cursor: grabbing","cursor: no-drop")}else if(v instanceof h){const n=A(v,t),o=r.tree.canInsert(n)?E():S();q(n,o,!0),D(o,"cursor: grabbing","cursor: no-drop")}}}function Fo(e){if(p("cursor: default"),De){const t=new a(e.x-Te.x,e.y-Te.y);if(v instanceof c)Pe(r.tree,v,t)?at(v,t):r.tree.insert(v);else if(v instanceof h){const n=A(v,t);r.tree.canInsert(n)?r.tree.insert(n):r.tree.insert(v)}r.pushToDrawStack(te.MOVE_MULTI)}w(r.tree),De=!1}function Xo(){p("cursor: default"),De&&v!==null&&r.tree.insert(v),De=!1,w(r.tree)}let Ee,Q=null,He;function Yo(e){Ee=new a(e.x-l.x,e.y-l.y);const t=r.tree.getLowestNode(Ee),n=new a(e.x-Ee.x,e.y-Ee.y);t!==r.tree.sheet&&t!==null?(p("cursor: copy"),t instanceof c?(Q=ne(t,n),Q.children=[]):t instanceof h&&(Q=t),He=!0):He=!1}function qo(e){if(He){const t=new a(e.x-Ee.x,e.y-Ee.y);if(Q instanceof c){const n=ne(Q,t);w(r.tree);const o=r.tree.canInsert(n)?E():S();Y(n,o),D(o,"cursor: grabbing","cursor: no-drop")}else if(Q instanceof h){const n=A(Q,t);w(r.tree);const o=r.tree.canInsert(n)?E():S();q(n,o,!0),D(o,"cursor: grabbing","cursor: no-drop")}}}function Go(e){if(p("cursor: default"),He){const t=new a(e.x-Ee.x,e.y-Ee.y);if(Q instanceof c&&Q.ellipse!==null){const n=ne(Q,t);r.tree.canInsert(n)&&r.tree.insert(n)}else if(Q instanceof h){const n=A(Q,t);r.tree.canInsert(n)&&r.tree.insert(n)}w(r.tree),r.pushToDrawStack(te.COPY_SINGLE)}He=!1}function zo(){p("cursor: default"),He=!1,w(r.tree)}let Be,J=null,Fe;function _o(e){Be=new a(e.x-l.x,e.y-l.y),J=r.tree.getLowestNode(Be),J!==r.tree.sheet&&J!==null?(p("cursor: copy"),Fe=!0):Fe=!1}function Vo(e){if(Fe){const t=new a(e.x-Be.x,e.y-Be.y);if(w(r.tree),J instanceof c){const n=Pe(r.tree,J,t)?E():S();j(J,n,t),D(n,"cursor: grabbing","cursor: no-drop")}else if(J instanceof h){const n=A(J,t),o=r.tree.canInsert(n)?E():S();q(n,o,!0),D(o,"cursor: grabbing","cursor: no-drop")}}}function jo(e){if(p("cursor: default"),Fe){const t=new a(e.x-Be.x,e.y-Be.y);if(J instanceof c)Pe(r.tree,J,t)&&at(J,t);else if(J instanceof h){const n=A(J,t);r.tree.canInsert(n)&&r.tree.insert(n)}r.pushToDrawStack(te.COPY_MULTI)}w(r.tree),Fe=!1}function Wo(){p("cursor: default"),Fe=!1,w(r.tree)}let ut,M=null,ae;function Zo(e){if(ut=new a(e.x-l.x,e.y-l.y),M=r.tree.getLowestNode(ut),M!==null){const t=r.tree.getLowestParent(ut);t!==null&&t.remove(ut),M instanceof c&&M.children.length!==0&&M!==r.tree.sheet&&ct(r.tree,M),w(r.tree),M instanceof h?q(M,S(),!0):Y(M,S()),ae=!0}else ae=!1}function Jo(e){ae&&M!==null&&M.ellipse!==null&&Ne(r.tree,M);const t=new a(e.x-l.x,e.y-l.y),n=r.tree.getLowestNode(t),o=r.tree.getLowestParent(t);ae&&M!==null&&o!==null&&(ae=!0,w(r.tree),n===null?(M=null,ae=!1):(o.remove(t),M=n,M instanceof c&&M.children.length!==0&&(ct(r.tree,M),M.children=[]),w(r.tree),M instanceof h?q(M,S(),!0):Y(M,S())))}function Ko(e){const t=new a(e.x-l.x,e.y-l.y);if(ae){const n=r.tree.getLowestNode(t);n!==null&&n instanceof c&&n.remove(t),n!==r.tree.sheet&&n instanceof c&&n.children.length!==0&&ct(r.tree,n),w(r.tree),r.pushToDrawStack(te.DELETE_SINGLE)}M=null,ae=!1}function Qo(){ae&&M!==null&&Ne(r.tree,M),M=null,ae=!1,w(r.tree)}let ft,B=null,re;function er(e){if(ft=new a(e.x-l.x,e.y-l.y),B=r.tree.getLowestNode(ft),B!==null){const t=r.tree.getLowestParent(ft);t!==null?t.remove(ft):(B=r.tree.sheet.copy(),r.tree.clear()),re=!0,w(r.tree),se(B,S())}}function tr(e){re&&B!==null&&Ne(r.tree,B);const t=new a(e.x-l.x,e.y-l.y),n=r.tree.getLowestNode(t),o=r.tree.getLowestParent(t);re&&B!==null&&o!==null?(re=!0,n===null?(B=null,re=!1):(o.remove(t),B=n,re=!0,w(r.tree),se(B,S()))):re&&o===null&&(B=r.tree.sheet.copy(),r.tree.clear(),w(r.tree),se(B,S()))}function nr(e){const t=new a(e.x-l.x,e.y-l.y);if(re){const n=r.tree.getLowestNode(t);n!==null&&n instanceof c?n.remove(t):r.tree.clear(),w(r.tree),r.pushToDrawStack(te.DELETE_MULTI)}B=null,re=!1}function or(){re&&B!==null&&Ne(r.tree,B),B=null,re=!1,w(r.tree)}let de,_=null,Xe,zt=new a(1,1);function rr(e){if(de=new a(e.x-l.x,e.y-l.y),_=r.tree.getLowestNode(de),_ instanceof c&&_.ellipse!==null){Xe=!0;const t=r.tree.getLowestParent(de);t!==null&&t.remove(de);for(let n=0;n<_.children.length;n++)r.tree.insert(_.children[n]);zt=Ln(_,de),_.children=[]}}function ir(e){if(Xe){const t=new a((e.x-l.x-de.x)/2,(e.y-l.y-de.y)/2);if(_ instanceof c){const n=Et(_,t,zt);if(n.ellipse!==null){w(r.tree);const i=r.tree.canInsert(n)&&Re(n.ellipse)?E():S();D(i,"cursor: crosshair","cursor: no-drop"),Y(n,i)}}}}function sr(e){if(p("cursor: default"),Xe){const t=new a((e.x-l.x-de.x)/2,(e.y-l.y-de.y)/2);if(_ instanceof c){const n=Et(_,t,zt);n.ellipse!==null&&(r.tree.canInsert(n)&&Re(n.ellipse)?r.tree.insert(n):r.tree.insert(_))}w(r.tree),Xe=!1,r.pushToDrawStack(te.RESIZE)}}function lr(){p("cursor: default"),Xe&&_!==null&&r.tree.insert(_),Xe=!1,w(r.tree)}let Ye,U=null,qe,tt;const ar=document.getElementById("selectionString");function cr(e){tt=new P(r.tree.sheet),r.selectForProof.sheet=new P().sheet,Ye=new a(e.x-l.x,e.y-l.y),U=r.tree.getLowestNode(Ye),$n()}function ur(e){qe&&(w(r.tree),Ye=new a(e.x-l.x,e.y-l.y),U=r.tree.getLowestNode(Ye),$n())}function fr(){if(p("cursor: default"),qe&&U!==null){if(U instanceof c&&U.ellipse===null)for(let e=0;e<U.children.length;e++)r.selectForProof.insert(U.children[e]);else r.selectForProof.insert(U);w(r.tree),r.pushToDrawStack(te.COPY_GRAPH)}U=null,qe=!1}function dr(){p("cursor: default"),U=null,qe=!1,w(r.tree)}function $n(){const e=new P;let t=!1;if(U!==null){if(qe=!0,U instanceof h||!U.isEqualTo(tt.sheet)){e.insert(U);const n=tt.getLowestParent(Ye);n!==null&&(n.remove(Ye),t=!0),w(tt)}else e.sheet=U,st();se(U,E()),p("cursor: copy"),t&&tt.insert(U)}else qe=!1;ar.innerHTML=e.toString()}function oe(){const e=new P;return r.currentProofStep&&(e.sheet=r.currentProofStep.tree.sheet.copy()),e}function Ge(e,t){return e.canInsert(t)&&Un(new P(e.sheet),t)}function Un(e,t){return r.currentProofStep?(e.insert(t.copy()),e.isEqualTo(new P(r.currentProofStep.tree.sheet))):!1}let fn,_t;function hr(){fn=oe(),_t=!0,st(),se(fn.sheet,S())}function pr(){_t&&(Nt(-1),r.clearProof(),T())}function wr(){_t=!1,T()}const gr=document.getElementById("showRect");let wt,Mt,ze;function yr(){p("cursor: crosshair")}function mr(e){wt=new a(e.clientX-l.x,e.clientY-l.y),ze=oe(),Mt=!1}function Sr(e){const t=new a(e.clientX-l.x,e.clientY-l.y),n=new c(bt(wt,t)),o=new c(Hn(n.ellipse));if(T(),!Mt){const i=Bn(n,o)?E():S();Y(n,i),Y(o,i),D(i,"cursor: crosshair","cursor: no-drop"),gr.checked&&Cn(wt,t,i)}}function Tr(e){p("cursor: crosshair");const t=new a(e.clientX-l.x,e.clientY-l.y);ze=oe();const n=new c(bt(wt,t)),o=new c(Hn(n.ellipse)),i=new W(ze,k.DC_INSERT);!Mt&&Bn(n,o)&&(i.tree.insert(n),i.tree.insert(o),r.pushToProof(i)),T()}function Er(){p("cursor: default"),Mt=!0,T()}function Hn(e){return new fe(e.center,Math.floor(e.radiusX*.8),Math.floor(e.radiusY*.8))}function Bn(e,t){return e.ellipse!==null&&t.ellipse!==null&&ze.canInsert(e)&&Re(e.ellipse)&&ze.canInsert(t)&&Re(t.ellipse)&&br(e,t)}function br(e,t){const n=new P(ze.sheet),o=new c(e.ellipse),i=new c(t.ellipse);return n.insert(o),n.insert(i),o.children.length===1}let ge,K=null,ot,ke,rt;function xr(e){ge=new a(e.x-l.x,e.y-l.y),ke=oe(),rt=new P(ke.sheet),K=ke.getLowestNode(ge),Fn()}function Mr(e){ge=new a(e.x-l.x,e.y-l.y),rt=new P(ke.sheet),K!==null&&(K=ke.getLowestNode(ge),T(),Fn())}function Ir(e){const t=new W(ke,k.DC_DELETE);if(ge=new a(e.x-l.x,e.y-l.y),ot&&K instanceof c){const n=t.tree.getLowestParent(ge),o=K.children[0];if(n!==null&&o instanceof c){n.remove(ge);for(let i=0;i<o.children.length;i++)t.tree.insert(o.children[i]);r.pushToProof(t)}}T()}function Pr(){ot&&K!==null&&Ne(rt,K),K=null,ot=!1,T()}function kr(e){return e.children.length===1&&e.children[0]instanceof c&&K!==ke.sheet}function Cr(e){Y(e,S()),e.children[0]instanceof c&&Y(e.children[0],S())}function Fn(){if(K instanceof c&&kr(K)){ot=!0;const e=rt.getLowestParent(ge);if(e!==null){e.remove(ge);const t=K.children[0].copy();ct(rt,t),t.children=[]}Cr(K)}else ot=!1}let be,L=null,Oe,le;function Lr(e){if(le=oe(),be=new a(e.x-l.x,e.y-l.y),L=le.getLowestNode(be),L!==le.sheet&&L!==null){p("cursor: grabbing");const t=le.getLowestParent(be);if(t!==null&&t.remove(be),L instanceof c&&L.children.length!==0){for(let n=0;n<L.children.length;n++)le.insert(L.children[n]);L.children=[]}Oe=!0,w(r.currentProofStep.tree),L instanceof h?q(L,E(),!0):Y(L,E())}else Oe=!1}function Rr(e){if(Oe){const t=new a(e.x-be.x,e.y-be.y);if(w(r.currentProofStep.tree),L instanceof c){const n=ne(L,t),o=Ge(le,n)?E():S();Y(n,o),D(o,"cursor: grabbing","cursor: no-drop")}else if(L instanceof h){const n=A(L,t),o=Ge(le,n)?E():S();q(n,o,!0),D(o,"cursor: grabbing","cursor: no-drop")}}}function Ar(e){if(Oe){p("cursor: default");const t=new W(le,k.MOVE_SINGLE),n=new a(e.x-be.x,e.y-be.y);let o=null;L instanceof c?o=ne(L,n):L instanceof h&&(o=A(L,n)),o!==null&&Ge(le,o)&&(t.tree.insert(o),r.pushToProof(t))}T(),Oe=!1}function Dr(){p("cursor: default"),Oe&&L!==null&&le.insert(L),Oe=!1,T()}let xe,z=null,Rt=null,ve,pe;function Or(e){pe=oe(),xe=new a(e.x-l.x,e.y-l.y),z=pe.getLowestNode(xe),z!==pe.sheet&&z!==null?(p("cursor: grabbing"),Rt=pe.getLowestParent(xe),Rt!==null&&Rt.remove(xe),ve=!0,w(r.currentProofStep.tree),se(z,E())):ve=!1}function vr(e){if(ve){const t=new a(e.x-xe.x,e.y-xe.y);if(w(r.currentProofStep.tree),z instanceof c){const n=Gt(z,t),o=Ge(pe,n)?E():S();j(z,o,t),D(o,"cursor: grabbing","cursor: no-drop")}else if(z instanceof h){const n=A(z,t),o=Ge(pe,n)?E():S();q(n,o,!0),D(o,"cursor: grabbing","cursor: no-drop")}}}function Nr(e){if(ve){p("cursor: default");const t=new W(pe,k.MOVE_MULTI),n=new a(e.x-xe.x,e.y-xe.y);let o=null;z instanceof c?o=Gt(z,n):z instanceof h&&(o=A(z,n)),o!==null&&Ge(pe,o)&&(t.tree.insert(o),r.pushToProof(t))}T(),ve=!1}function $r(){p("cursor: default"),ve&&z!==null&&pe.insert(z),ve=!1,T()}let Ce,X=null,Ut=null,_e,ce;function Ur(e){ce=oe(),Ce=new a(e.x-l.x,e.y-l.y),X=ce.getLowestNode(Ce),Ut=ce.getLowestParent(Ce),_e=X!==ce.sheet&&X!==null,_e&&p("cursor: copy")}function Hr(e){if(_e){const t=new a(e.x-Ce.x,e.y-Ce.y);T();const n=new a(e.x-l.x,e.y-l.y),o=Xn(t,n)?E():S();if(X instanceof c)j(X,o,t);else if(X instanceof h){const i=A(X,t);q(i,o,!0)}D(o,"cursor: grabbing","cursor: no-drop")}}function Br(e){if(_e){p("cursor: default");const t=new a(e.x-Ce.x,e.y-Ce.y);if(Xn(t,new a(e.x-l.x,e.y-l.y))){if(X instanceof c)at(X,t,ce);else if(X instanceof h){const n=A(X,t);ce.insert(n)}r.pushToProof(new W(ce,k.ITERATION))}}T(),_e=!1}function Fr(){p("cursor: default"),_e=!1,T()}function Xn(e,t){return Ut!==null&&Ut.containsPoint(t)&&(X instanceof c&&Pe(ce,X,e)&&Yn(ce.sheet,ne(X,e).ellipse)||X instanceof h&&ce.canInsert(A(X,e)))}function Yn(e,t){for(let n=0;n<e.children.length;n++)if(e.children[n]instanceof c){if(e.children[n].ellipse instanceof fe&&(t.contains(e.children[n].ellipse)||!Yn(e.children[n],t)))return!1}else if(e.children[n]instanceof h&&t.contains(e.children[n].calcRect()))return!1;return!0}let ye,R=null,Ve,ie,gt;function Xr(e){ye=new a(e.x-l.x,e.y-l.y),ie=oe(),gt=new P(ie.sheet),R=ie.getLowestNode(ye),qn()}function Yr(e){ye=new a(e.x-l.x,e.y-l.y),R!==null&&(R=ie.getLowestNode(ye),T(),qn())}function qr(e){if(Ve&&(ye=new a(e.x-l.x,e.y-l.y),R!==null&&Vt(ie.sheet,ie.getLevel(R)))){const t=ie.getLowestParent(ye);t instanceof c&&t.remove(ye),r.pushToProof(new W(ie,k.DEITERATION))}Ve=!1,T()}function Gr(){Ve&&R!==null&&Ne(gt,R),Ve=!1,R=null,T()}function qn(){if(R!==null&&!(R instanceof c&&R.ellipse===null)&&Vt(ie.sheet,ie.getLevel(R))){Ve=!0;const e=gt.getLowestParent(ye);e!==null&&e.remove(ye),se(R,S()),gt.insert(R)}else Ve=!1}function Vt(e,t){let n=null;for(let o=0;o<e.children.length;o++){if(e.children[o]instanceof c&&R instanceof c&&R.isEqualTo(e.children[o])&&R.ellipse!==e.children[o].ellipse)return!0;if(e.children[o]instanceof h&&R instanceof h&&e.children[o].identifier===R.identifier&&e.children[o].toString()!==R.toString())return!0;e.children[o]instanceof c&&e.children[o].containsNode(R)&&ie.getLevel(e.children[o])<t&&(n=e.children[o])}return n!==null?Vt(n,t):!1}let x,O,V,$,je;function zr(e){V=oe();const t=r.selectForProof.sheet.children,n=new a(e.x-l.x,e.y-l.y);if(r.proof.length>0&&t.length===1){je=!0,x=t[0];const o=jt(e,x),i=V.getLowestNode(n),f=V.getLowestParent(n);if(O=i instanceof h?f:i,o){const g=nt(x,o);if(O!==null&&!O.containsNode(g))p("cursor: no-drop"),$=!1,j(x,S(),o);else if(O!==null&&O instanceof c&&O.ellipse!==null&&V.getLevel(O)%2===0){if(g instanceof c){$=!0;for(let u=0;u<O.children.length;u++)if(g.containsNode(O.children[u])){$=!1;break}}else $=!0;if($){let u="";if(x instanceof c)u=Pe(V,x,o)?E():S();else if(x instanceof h){const m=nt(x,o);u=V.canInsert(m)?E():S()}$=u===E(),j(x,u,o),D(u,"cursor: copy","cursor: no-drop")}else p("cursor: no-drop"),j(x,S(),o)}else p("cursor: no-drop"),$=!1,j(x,S(),o)}}else $=!1,je=!1,j(x,S(),n)}function _r(e){if(je){const t=new a(e.x-l.x,e.y-l.y);T();const n=jt(e,x),o=V.getLowestNode(t),i=V.getLowestParent(t);if(O=o instanceof h?i:o,n){const f=nt(x,n);if(O!==null&&!O.containsNode(f))p("cursor: no-drop"),$=!1,j(x,S(),n);else if(O!==null&&O instanceof c&&O.ellipse!==null&&V.getLevel(O)%2===0){if(f instanceof c){$=!0;for(let g=0;g<O.children.length;g++)if(f.containsNode(O.children[g])){$=!1;break}}else $=!0;if($){let g="";if(x instanceof c)g=Pe(V,x,n)?E():S();else if(x instanceof h){const u=nt(x,n);g=V.canInsert(u)?E():S()}$=g===E(),j(x,g,n),D(g,"cursor: copy","cursor: no-drop")}else p("cursor: no-drop"),j(x,S(),n)}else p("cursor: no-drop"),$=!1,j(x,S(),n)}}else $=!1}function Vr(e){if(p("cursor: default"),je&&$){const t=jt(e,x);if(t){if(x instanceof c)at(x,t,V);else if(x instanceof h){const n=nt(x,t);V.insert(n)}r.pushToProof(new W(V,k.INSERTION))}}T(),je=!1}function jr(){p("cursor: default"),je=!1,T()}function jt(e,t){if(t instanceof c&&t.ellipse!==null)return new a(e.x-t.ellipse.center.x,e.y-t.ellipse.center.y);if(t instanceof h)return new a(e.x-t.origin.x,e.y-t.origin.y)}let me,ee=null,We,Le,yt;function Wr(e){me=new a(e.x-l.x,e.y-l.y),Le=oe(),yt=new P(Le.sheet),ee=Le.getLowestNode(me),Gn()}function Zr(e){me=new a(e.x-l.x,e.y-l.y),ee!==null&&(ee=Le.getLowestNode(me),T(),Gn())}function Jr(e){if(We){const t=new W(Le,k.ERASURE);me=new a(e.x-l.x,e.y-l.y);const n=t.tree.getLowestParent(me);n!==null&&n.remove(me),r.pushToProof(t),T()}ee=null,We=!1}function Kr(){We&&ee!==null&&Ne(yt,ee),ee=null,We=!1,T()}function Gn(){if(ee!==Le.sheet&&ee!==null&&Le.getLevel(ee)%2===0){We=!0;const e=yt.getLowestParent(me);e!==null&&e.remove(me),se(ee,S()),yt.insert(ee)}else We=!1}let he,Z=null,Ze,Wt=new a(1,1),we;function Qr(e){if(we=oe(),he=new a(e.x-l.x,e.y-l.y),Z=we.getLowestNode(he),Z instanceof c&&Z.ellipse!==null){Ze=!0;const t=we.getLowestParent(he);t!==null&&t.remove(he);for(let n=0;n<Z.children.length;n++)we.insert(Z.children[n]);Wt=Ln(Z,he),Z.children=[]}}function ei(e){if(Ze){const t=new a((e.x-l.x-he.x)/2,(e.y-l.y-he.y)/2);if(Z instanceof c){const n=Et(Z,t,Wt);if(n.ellipse!==null){T();const o=zn(n)?E():S();Y(n,o),D(o,"cursor: crosshair","cursor: no-drop")}}}}function ti(e){if(Ze){p("cursor: default");const t=new a((e.x-l.x-he.x)/2,(e.y-l.y-he.y)/2);if(Z instanceof c){const n=Et(Z,t,Wt);n.ellipse!==null&&zn(n)&&(we.insert(n),r.pushToProof(new W(we,k.RESIZE)))}T(),Ze=!1}}function ni(){p("cursor: default"),Ze&&Z!==null&&we.insert(Z),Ze=!1,T()}function zn(e){return we.canInsert(e)&&Re(e.ellipse)&&Un(new P(we.sheet),e)}let Ht,mt,it;function oi(){mt=oe(),Ht=r.selectForProof.sheet,Ht.children.length>0&&r.proof.length===1&&mt.sheet.isEmptySheet()&&(it=!0,p("cursor: copy"))}function ri(){p("cursor: default"),it=!1,T()}function ii(){it&&(p("cursor: default"),mt.sheet=Ht,r.pushToProof(new W(mt,k.PASTE_GRAPH))),it=!1,T()}function si(){p("cursor: default"),it=!1,T()}const ue=document.getElementById("canvas");ue.width=window.innerWidth;ue.height=window.innerHeight;const _n=ue.getContext("2d");if(_n===null)throw Error("2d rendering context not supported");const li=_n;li.font="35pt arial";const At=document.getElementById("cutTools"),dn=document.getElementById("atomTools"),hn=document.getElementById("graphString"),pn=document.getElementById("proofString"),wn=document.getElementById("toProofTools");window.addEventListener("keydown",di);ue.addEventListener("mouseenter",hi);ue.addEventListener("mousedown",pi);ue.addEventListener("mousemove",wi);ue.addEventListener("mouseup",gi);ue.addEventListener("mouseout",yi);let Zt=!1,Jt=!0;window.tree=r.tree;window.treeString=St(window.tree);window.atomTool=s.atomTool;window.cutTool=s.cutTool;window.dragTool=s.dragTool;window.aegJsonString=St;window.saveMode=vn;window.loadMode=po;window.drawMoveSingleTool=s.drawMoveSingleTool;window.drawMoveMultiTool=s.drawMoveMultiTool;window.copySingleTool=s.copySingleTool;window.copyMultiTool=s.copyMultiTool;window.deleteSingleTool=s.deleteSingleTool;window.deleteMultiTool=s.deleteMultiTool;window.copyFromDrawTool=s.copyFromDrawTool;window.pasteInProofTool=s.pasteInProofTool;window.doubleCutInsertionTool=s.doubleCutInsertionTool;window.resizeTool=s.resizeTool;window.doubleCutDeletionTool=s.doubleCutDeletionTool;window.insertionTool=s.insertionTool;window.erasureTool=s.erasureTool;window.proofMoveSingleTool=s.proofMoveSingleTool;window.proofMoveMultiTool=s.proofMoveMultiTool;window.proofResizeTool=s.proofResizeTool;window.iterationTool=s.iterationTool;window.deiterationTool=s.deiterationTool;window.proofClearTool=s.proofClearTool;window.drawClearTool=s.drawClearTool;window.setTool=ci;window.setHighlight=ai;window.toggleHandler=wo;function ai(e,t){const n=document.getElementById(t);switch(e){case"mousedown":n==null||n.classList.remove("no-highlight");break;case"mouseleave":n==null||n.classList.add("no-highlight");break}}const gn=document.querySelectorAll(".toolButton");gn.forEach(e=>{e.addEventListener("click",()=>{e.classList.add("toolButtonPressed"),gn.forEach(t=>{t!==e&&t.classList.remove("toolButtonPressed")})})});function ci(e){switch(r.toolState=e,At.style.display="none",dn.style.display="none",wn.style.display="none",r.toolState){case s.atomTool:dn.style.display="block";break;case s.cutTool:At.style.display="block";break;case s.copyFromDrawTool:wn.style.display="block";break;case s.doubleCutInsertionTool:At.style.display="block";break}}async function ui(){r.modeState==="Draw"?r.undoDrawStep():r.undoProofStep()}async function fi(){r.modeState==="Draw"?r.redoDrawStep():r.redoProofStep()}function di(e){if(e.ctrlKey)e.preventDefault(),e.key==="s"?vn():e.key==="z"?ui():e.key==="y"&&fi();else switch(r.toolState){case s.atomTool:bo(e);break}}function hi(){switch(r.toolState){case s.cutTool:Lo();break;case s.dragTool:jn();break;case s.doubleCutInsertionTool:yr();break}Jt=!0}function pi(e){if(e.button===0){switch(r.toolState){case s.cutTool:Ro(e);break;case s.atomTool:xo(e);break;case s.dragTool:Wn(e);break;case s.drawMoveSingleTool:vo(e);break;case s.drawMoveMultiTool:Ho(e);break;case s.copySingleTool:Yo(e);break;case s.copyMultiTool:_o(e);break;case s.deleteSingleTool:Zo(e);break;case s.deleteMultiTool:er(e);break;case s.resizeTool:rr(e);break;case s.copyFromDrawTool:cr(e);break;case s.pasteInProofTool:oi();break;case s.doubleCutInsertionTool:mr(e);break;case s.doubleCutDeletionTool:xr(e);break;case s.insertionTool:zr(e);break;case s.erasureTool:Wr(e);break;case s.proofMoveSingleTool:Lr(e);break;case s.proofMoveMultiTool:Or(e);break;case s.proofResizeTool:Qr(e);break;case s.iterationTool:Ur(e);break;case s.deiterationTool:Xr(e);break;case s.proofClearTool:hr();break;case s.drawClearTool:go();break}Zt=!0}}function wi(e){if(Zt&&Jt)switch(r.toolState){case s.cutTool:Ao(e);break;case s.atomTool:Mo(e);break;case s.dragTool:Zn(e);break;case s.drawMoveSingleTool:No(e);break;case s.drawMoveMultiTool:Bo(e);break;case s.copySingleTool:qo(e);break;case s.copyMultiTool:Vo(e);break;case s.deleteSingleTool:Jo(e);break;case s.deleteMultiTool:tr(e);break;case s.resizeTool:ir(e);break;case s.copyFromDrawTool:ur(e);break;case s.pasteInProofTool:ri();break;case s.doubleCutInsertionTool:Sr(e);break;case s.doubleCutDeletionTool:Mr(e);break;case s.insertionTool:_r(e);break;case s.erasureTool:Zr(e);break;case s.proofMoveSingleTool:Rr(e);break;case s.proofMoveMultiTool:vr(e);break;case s.proofResizeTool:ei(e);break;case s.iterationTool:Hr(e);break;case s.deiterationTool:Yr(e);break}}function gi(e){if(e.button===0){switch(r.toolState){case s.cutTool:Do(e);break;case s.atomTool:Io(e);break;case s.dragTool:Jn();break;case s.drawMoveSingleTool:$o(e);break;case s.drawMoveMultiTool:Fo(e);break;case s.copySingleTool:Go(e);break;case s.copyMultiTool:jo(e);break;case s.deleteSingleTool:Ko(e);break;case s.deleteMultiTool:nr(e);break;case s.resizeTool:sr(e);break;case s.copyFromDrawTool:fr();break;case s.pasteInProofTool:ii();break;case s.doubleCutInsertionTool:Tr(e);break;case s.doubleCutDeletionTool:Ir(e);break;case s.insertionTool:Vr(e);break;case s.erasureTool:Jr(e);break;case s.proofMoveSingleTool:Ar(e);break;case s.proofMoveMultiTool:Nr(e);break;case s.proofResizeTool:ti(e);break;case s.iterationTool:Br(e);break;case s.deiterationTool:qr(e);break;case s.proofClearTool:pr();break;case s.drawClearTool:yo();break}Zt=!1}}function yi(){switch(r.toolState){case s.cutTool:Oo();break;case s.atomTool:Po();break;case s.dragTool:Kn();break;case s.drawMoveSingleTool:Uo();break;case s.drawMoveMultiTool:Xo();break;case s.copySingleTool:zo();break;case s.copyMultiTool:Wo();break;case s.deleteSingleTool:Qo();break;case s.deleteMultiTool:or();break;case s.resizeTool:lr();break;case s.copyFromDrawTool:dr();break;case s.pasteInProofTool:si();break;case s.doubleCutInsertionTool:Er();break;case s.doubleCutDeletionTool:Pr();break;case s.insertionTool:jr();break;case s.erasureTool:Kr();break;case s.proofMoveSingleTool:Dr();break;case s.proofMoveMultiTool:$r();break;case s.proofResizeTool:ni();break;case s.iterationTool:Fr();break;case s.deiterationTool:Gr();break;case s.proofClearTool:wr();break;case s.drawClearTool:mo();break}Jt=!1}function mi(){ue.width=window.innerWidth,ue.height=window.innerHeight}window.onresize=mi;
