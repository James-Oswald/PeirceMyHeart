(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(i){if(i.ep)return;i.ep=!0;const l=t(i);fetch(i.href,l)}})();class s{constructor(e,t){this.x=e??0,this.y=t??0}set(e,t){this.x=e,this.y=t}distance(e){const t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)}toString(){return"X: "+this.x+", Y: "+this.y}}function M(n,e){if(n instanceof w)return e instanceof w?$(n,e)||$(e,n):H(e,n);if(e instanceof w)return H(n,e);if(M(n.boundingBox,e.boundingBox)||T(e.boundingBox,n.boundingBox)){const t=k(n);for(let r=0;r<t.length;r++)if(Y(e,t[r]))return!0}return!1}function H(n,e){const t=k(n);for(let r=0;r<t.length;r++)if(X(e,t[r]))return!0;return!1}function T(n,e){if(n instanceof w)if(e instanceof w){const t=e.getCorners();for(let r=0;r<4;r++)if(!X(n,t[r]))return!1;return!0}else{const t=W(e);for(let r=0;r<4;r++)if(!X(n,t[r]))return!1;return!0}else if(e instanceof w){const t=e.getCorners();for(let r=0;r<4;r++)if(!Y(n,t[r]))return!1;return!0}else{const t=k(e);for(let r=0;r<t.length;r++)if(!Y(n,t[r]))return!1;return!0}}function $(n,e){const t=n.getCorners(),r=e.getCorners();return(t[0].y<=r[0].y&&t[2].y>=r[0].y||t[0].y<=r[2].y&&t[2].y>=r[2].y)&&(t[0].x<=r[0].x&&t[1].x>=r[0].x||t[0].x<=r[1].x&&t[1].x>=r[1].x)}function X(n,e){const t=n.getCorners();return t[0].x<e.x&&t[1].x>e.x&&t[0].y<e.y&&t[2].y>e.y}function Y(n,e){return Math.pow(e.x-n.center.x,2)/Math.pow(n.radiusX,2)+Math.pow(e.y-n.center.y,2)/Math.pow(n.radiusY,2)<=1}function W(n){return[new s(n.center.x,n.center.y-n.radiusY),new s(n.center.x+n.radiusX,n.center.y),new s(n.center.x,n.center.y+n.radiusY),new s(n.center.x-n.radiusX,n.center.y)]}function k(n){const t=[],r=n.radiusX/100;t[0]=W(n)[3];let i,l;for(let u=1;u<400;u++)u<=400/2?(i=t[u-1].x+r,l=D(n,i,1)):(i=t[u-1].x-r,l=D(n,i,-1)),t[u]=new s(i,l);return t}function D(n,e,t){return t*n.radiusY*Math.sqrt(1-Math.pow((e-n.center.x)/n.radiusX,2))+n.center.y}class w{constructor(e,t,r){this.startVertex=e??new s,this.width=t??0,this.height=r??0}getCorners(){const e=[this.startVertex];return e.push(new s(this.startVertex.x+this.width,this.startVertex.y)),e.push(new s(this.startVertex.x+this.width,this.startVertex.y+this.height)),e.push(new s(this.startVertex.x,this.startVertex.y+this.height)),e}containsPoint(e){return X(this,e)}overlaps(e){return M(this,e)}contains(e){return T(this,e)}toString(){return`A rectangle with
Top Left Vertex at: `+this.startVertex.toString()+", Width: "+this.width+", Height: "+this.height}}class f{constructor(e,t,r){this.internalRectangle=r??new w,this.internalIdentifier=e,this.internalOrigin=t??new s}get rectangle(){return this.internalRectangle}set rectangle(e){this.internalRectangle=e}get identifier(){return this.internalIdentifier}set identifier(e){this.internalIdentifier=e}get origin(){return this.internalOrigin}set origin(e){this.internalOrigin=e}containsPoint(e){return this.internalRectangle.containsPoint(e)}containsNode(e){return e instanceof f?this.internalRectangle.contains(e.rectangle):this.internalRectangle.contains(e.ellipse)}toString(){return"An atom representing the proposition: "+this.internalIdentifier+" and Boundary box of: "+this.internalRectangle.toString()}}class m{constructor(e,t){this.internalEllipse=e,this.internalChildren=t??[]}get ellipse(){return this.internalEllipse}set ellipse(e){this.internalEllipse=e}get children(){return this.internalChildren}set children(e){this.internalChildren=e}set child(e){this.internalChildren.push(e)}getCurrentCut(e){for(let t=0;t<this.internalChildren.length;t++){const r=this.internalChildren[t];if(r instanceof m&&r.containsNode(e))return r.getCurrentCut(e)}return this}containsPoint(e){return this.internalEllipse===null?!0:this.internalEllipse.containsPoint(e)}containsNode(e){return this.internalEllipse===null?!0:e instanceof f?this.internalEllipse.contains(e.rectangle):this.internalEllipse.contains(e.ellipse)}remove(e){if(this.containsPoint(e)){let t=!0;for(let r=0;r<this.internalChildren.length;r++)if(this.internalChildren[r].containsPoint(e))return t=!1,this.internalChildren[r]instanceof m?this.internalChildren[r].remove(e):(this.internalChildren=this.internalChildren.splice(r,1),!0);if(t)return!0}return!1}toString(){let e;return this.internalEllipse===null?e="Sheet of Assertion of the AEG Tree":e=`A cut node with boundary box of 
`+this.internalEllipse.toString(),this.internalChildren.length>0&&(e+=`, 
With nested nodes: `+this.internalChildren.toString()),e}toFormulaString(){let e="";for(const t of this.internalChildren)t instanceof f?e+=t.identifier:t instanceof m&&(e+=t.toFormulaString()),e+=" ";return e=e.slice(0,-1),this.internalEllipse===null?e="["+e+"]":e="("+e+")",e}}class U{constructor(e){this.sheet=e??new m(null)}verify(){return this.verifyAEG(this.sheet)}verifyAEG(e){for(let t=0;t<e.children.length;t++){if(!e.containsNode(e.children[t]))return!1;for(let r=t+1;r<e.children.length;r++)if(this.overlaps(e.children[t],e.children[r]))return!1}for(let t=0;t<e.children.length;t++)if(e.children[t]instanceof m&&!this.verifyAEG(e.children[t]))return!1;return!0}canInsert(e){const t=this.sheet.getCurrentCut(e);for(let r=0;r<t.children.length;r++)if(this.overlaps(e,t.children[r]))return!1;return!0}insert(e){if(!this.canInsert(e))throw new Error("Insertion failed. "+e+" had a collision.");const t=this.sheet.getCurrentCut(e),r=[...t.children];if(t.child=e,e instanceof m)for(let i=r.length-1;i>=0;i--)e.containsNode(r[i])&&(e.child=r[i],t.children.splice(i,1))}remove(e){this.sheet.remove(e)}overlaps(e,t){let r,i;return e instanceof f?t instanceof f?M(e.rectangle,t.rectangle):(r=t.ellipse,M(e.rectangle,r)):t instanceof f?(r=e.ellipse,M(r,t.rectangle)):(r=e.ellipse,i=t.ellipse,M(r,i))}toString(){return this.sheet.toFormulaString()}}class V{constructor(e,t,r){this.center=e??new s,this.radiusX=t??0,this.radiusY=r??0;const i=new s(this.center.x-this.radiusX,this.center.y-this.radiusY);this.boundingBox=new w(i,this.radiusX*2,this.radiusY*2)}toString(){return"An ellipse with Center at: "+this.center.toString()+`, 
Horizontal Radius of: `+this.radiusX+`, 
Vertical Radius of: `+this.radiusY+`, 
Bounding box: `+this.boundingBox.toString()}containsPoint(e){return Y(this,e)}overlaps(e){return M(this,e)}contains(e){return T(this,e)}}const C=document.getElementById("canvas"),q=C.getContext("2d"),_=document.getElementById("showRect"),N=document.getElementById("mode");if(q===null)throw Error("2d rendering context not supported");const y=q;let L=!1,v=new V,R=new s;function p(n){let e=new m(new V);const t=new s;n.type==="mousedown"?(L=!0,R.x=n.clientX,R.y=n.clientY):n.type==="mousemove"&&L?(t.x=n.clientX,t.y=n.clientY,y.clearRect(0,0,C.width,C.height),E(a.sheet),v=ee(R,t),e.ellipse=v,a.canInsert(e)&&v.radiusX>15&&v.radiusY>15?S(e,"#00FF00"):S(e,"#FF0000")):n.type==="mouseup"&&L?(e=new m(v),a.canInsert(e)&&v.radiusX>15&&v.radiusY>15&&a.insert(e),L=!1,R=new s,y.clearRect(0,0,C.width,C.height),E(a.sheet),console.log(a.toString())):n.type==="mouseout"&&L&&(L=!1,R=new s,y.clearRect(0,0,C.width,C.height),E(a.sheet))}function ee(n,e){const t=new s((e.x-n.x)/2+n.x,(e.y-n.y)/2+n.y),r=n.x-e.x,i=n.y-e.y,l=Math.abs(r),u=Math.abs(i);let A,F;if(N.value==="circumscribed"){const O=Math.floor(t.distance(e));F=Math.floor(O*(u/l)),A=Math.floor(O*(l/u))}else A=l/2,F=u/2;return _.checked&&(y.beginPath(),y.rect(n.x,n.y,-r,-i),y.stroke()),new V(t,A,F)}function S(n,e){y.strokeStyle=e;const t=n.ellipse,r=t.center;y.beginPath(),y.ellipse(r.x,r.y,t.radiusX,t.radiusY,0,0,2*Math.PI),y.stroke()}const x=document.getElementById("canvas"),z=x.getContext("2d");if(z===null)throw Error("2d rendering context not supported");const h=z,j=document.getElementById("atomDisplay");let B,I=!1,G=!1,o=new f("a");j.innerHTML=o.identifier;function g(n){if(n.type==="keypress"){const e=n;new RegExp(/^[A-Za-z]$/).test(e.key)&&(o.identifier=e.key,j.innerHTML=o.identifier,G=!0)}else if(n.type==="mousedown"&&G){const e=n;B=h.measureText(o.identifier);const t=new s(e.clientX,e.clientY-B.actualBoundingBoxAscent);o.rectangle=new w(t,B.width,B.fontBoundingBoxDescent+B.actualBoundingBoxAscent),o.origin=new s(e.clientX,e.clientY),h.clearRect(0,0,x.width,x.height),E(a.sheet),a.canInsert(o)?P(o,"#00FF00"):P(o,"#6600ff"),I=!0}else if(n.type==="mousemove"&&I){const e=n;o.origin=new s(e.clientX,e.clientY),o.rectangle.startVertex=new s(e.clientX,e.clientY-B.actualBoundingBoxAscent),h.clearRect(0,0,x.width,x.height),E(a.sheet),a.canInsert(o)?P(o,"#00FF00"):P(o,"#FF0000")}else n.type==="mouseup"&&I?(a.canInsert(o)&&a.insert(o),o=new f(o.identifier),h.clearRect(0,0,x.width,x.height),E(a.sheet),I=!1,console.log(a.toString())):n.type==="mouseout"&&I&&(I=!1,o=new f(o.identifier),h.clearRect(0,0,x.width,x.height),E(a.sheet))}function P(n,e){h.fillStyle=e,h.strokeStyle=e;const t=n.rectangle;h.beginPath(),h.fillText(n.identifier,n.origin.x,n.origin.y),h.rect(t.startVertex.x,t.startVertex.y,t.width,t.height),h.stroke()}const c=document.getElementById("canvas");c.width=window.innerWidth;c.height=window.innerHeight;const K=c.getContext("2d");if(K===null)throw Error("2d rendering context not supported");const d=K;d.font="35pt arial";const te=document.getElementById("graphString"),Z=document.getElementById("cutTools"),J=document.getElementById("atomTools");let b;const a=new U;window.atomMode=re;window.ellipseMode=ne;function ne(){b!=="ellipseMode"&&(Q(),b="ellipseMode",J.style.display="none"),Z.style.display="block",c.addEventListener("mousedown",p),c.addEventListener("mousemove",p),c.addEventListener("mouseup",p),c.addEventListener("mouseout",p)}function re(){b!=="atomMode"&&(Q(),b="atomMode",Z.style.display="none"),J.style.display="block",window.addEventListener("keypress",g),c.addEventListener("mousedown",g),c.addEventListener("mousemove",g),c.addEventListener("mouseup",g),c.addEventListener("mouseout",g)}function Q(){b==="ellipseMode"?(c.removeEventListener("mousedown",p),c.removeEventListener("mousemove",p),c.removeEventListener("mouseup",p),c.removeEventListener("mouseout",p)):b==="atomMode"&&(window.removeEventListener("keypress",g),c.removeEventListener("mousedown",g),c.removeEventListener("mousemove",g),c.removeEventListener("mouseup",g),c.removeEventListener("mouseout",g))}function E(n){te.innerHTML=a.toString();for(let e=0;n.children.length>e;e++)n.children[e]instanceof f?ie(n.children[e]):E(n.children[e]);n.ellipse instanceof V&&(d.strokeStyle="#000000",d.beginPath(),d.ellipse(n.ellipse.center.x,n.ellipse.center.y,n.ellipse.radiusX,n.ellipse.radiusY,0,0,2*Math.PI),d.stroke())}function ie(n){const e=n.rectangle;d.strokeStyle="#000000",d.fillStyle="#000000",d.beginPath(),d.rect(e.startVertex.x,e.startVertex.y,e.width,e.height),d.fillText(n.identifier,n.origin.x,n.origin.y),d.stroke()}
