(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();class d{constructor(t,e){this.x=t??0,this.y=e??0}toString(){return"X: "+this.x+", Y: "+this.y}}class x{constructor(t,e,s){this.startVertex=t??new d,this.width=e??0,this.height=s??0}toString(){return`A rectangle with
Top Left Vertex at: `+this.startVertex.toString+`, 
Width of: `+this.width+`, 
Height of: `+this.height}getCorners(){const t=[this.startVertex];return t.push(new d(this.startVertex.x+this.width,this.startVertex.y)),t.push(new d(this.startVertex.x+this.width,this.startVertex.y+this.height)),t.push(new d(this.startVertex.x,this.startVertex.y+this.height)),t}containsPoint(t){const e=this.getCorners();return e[0].x<=t.x&&e[1].x>=t.x&&e[1].y<=t.y&&e[2].y>=t.y}overlaps(t){if(t instanceof x){const e=this.getCorners(),s=t.getCorners();for(let i=0;i<4;i++)if(this.containsPoint(s[i])||t.containsPoint(e[i]))return!0;return!1}else{const e=t.boundingBox;return this.overlaps(e)}}containsShape(t){if(t instanceof x){const e=t.getCorners();return this.containsPoint(e[0])&&this.containsPoint(e[2])}else{const e=t.boundingBox;return this.containsShape(e)}}}class h{constructor(t,e,s){this.rect=s??new x,this.identifier=t,this.origin=e}toString(){return"An atom representing the proposition: "+this.identifier+` and 
Boundary box of: 
`+this.rect.toString}containsPoint(t){return this.rect.containsPoint(t)}containsNode(t){return t instanceof h?this.rect.containsShape(t.rect):this.rect.containsShape(t.ellipse)}}class L{constructor(t,e,s){this.center=t??new d,this.radiusX=e??0,this.radiusY=s??0;const i=new d(this.center.x-this.radiusX,this.center.y-this.radiusY);this.boundingBox=new x(i,this.radiusX*2,this.radiusY*2)}toString(){return`An ellipse with
Center at: `+this.center.toString+`, 
Horizontal Radius of: `+this.radiusX+`, 
Vertical Radius of: `+this.radiusY}containsPoint(t){return this.boundingBox.containsPoint(t)}overlaps(t){return this.boundingBox.overlaps(t)}containsShape(t){return this.boundingBox.containsShape(t)}}class c{constructor(t,e){this.ellipse=t??new L,this.children=e??[]}toString(){let t;return this.ellipse===null?t="Sheet of Assertion of the AEG Tree":t=`A cut node with boundary box of 
`+this.ellipse.toString(),this.children.length>0&&(t+=`, 
With nested nodes: `+this.children.toString()),t}containsPoint(t){return this.ellipse===null?!0:this.ellipse.containsPoint(t)}containsNode(t){return this.ellipse===null?!0:t instanceof h?this.ellipse.containsShape(t.rect):this.ellipse.containsShape(t.ellipse)}verifyCut(){let t=!0;for(let e=0;e<this.children.length;e++){if(!t)return!1;this.ellipse===null&&this.children[e]instanceof c&&(t=this.children[e].verifyCut()),t=this.containsNode(this.children[e]),t&&this.children[e]instanceof c&&(t=this.children[e].verifyCut())}return t}getCurrentCut(t){for(let e=0;e<this.children.length;e++)if(this.children[e]instanceof c&&this.children[e].containsNode(t))return this.getCurrentCut(this.children[e]);return this}remove(t){if(this.containsPoint(t)){let e=!0;for(let s=0;s<this.children.length;s++)if(this.children[s].containsPoint(t))return e=!1,this.children[s]instanceof c?this.children[s].remove(t):(this.children=this.children.splice(s,1),!0);if(e)return!0}return!1}}class k{constructor(t){this.sheet=t??new c,this.sheet.ellipse=null}verifyAEG(){return this.sheet.verifyCut()}canInsert(t){const e=this.sheet.getCurrentCut(t);for(let s=0;s<e.children.length;s++)if(this.overlaps(t,e.children[s]))return!1;return!0}insert(t){if(!this.canInsert(t))throw new Error("Insertion failed. "+t+" had a collision.");const e=this.sheet.getCurrentCut(t),s=e.children;if(e.children.push(t),t instanceof c)for(let i=0;i<s.length;i++)t.containsNode(s[i])&&(t.children.push(s[i]),e.children=e.children.splice(i,1))}remove(t){this.sheet.remove(t)}overlaps(t,e){let s,i;return t instanceof h?e instanceof h?t.rect.overlaps(e.rect):(s=e.ellipse,t.rect.overlaps(s)):e instanceof h?(s=t.ellipse,s.overlaps(e.rect)):(s=t.ellipse,i=e.ellipse,s.overlaps(i))}}const o=document.getElementById("canvas"),A=o.getContext("2d"),G=document.getElementById("showRect"),H=document.getElementById("mode");if(A===null)throw Error("2d rendering context not supported");const a=A;let B,g;function W(n,t){const e=n.x-t.x,s=n.y-t.y;return Math.sqrt(e*e+s*s)}function q(n,t){const e={x:(t.x-n.x)/2+n.x,y:(t.y-n.y)/2+n.y},s=n.x-t.x,i=n.y-t.y,r=Math.abs(s),u=Math.abs(i);let v,w;if(H.value==="circumscribed"){const S=Math.floor(W(e,t));v=Math.floor(S*(u/r)),w=Math.floor(S*(r/u))}else w=r/2,v=u/2;return G.checked&&(a.beginPath(),a.rect(n.x,n.y,-s,-i),a.stroke()),a.beginPath(),a.ellipse(e.x,e.y,v,w,Math.PI/2,0,2*Math.PI),a.stroke(),g=new L(e,v,w),g}function U(){o.addEventListener("mousedown",I)}function I(n){B={x:n.clientX,y:n.clientY},o.addEventListener("mousemove",V),o.addEventListener("mouseup",X)}function V(n){a.clearRect(0,0,o.width,o.height);const t={x:n.clientX,y:n.clientY};M(y.sheet),g=q(B,t)}function X(){o.removeEventListener("mousemove",V),o.removeEventListener("mouseup",X);const n=new c(g);y.canInsert(n)&&y.insert(n)}function z(){o.removeEventListener("mousedown",I)}const l=document.getElementById("canvas"),Y=l.getContext("2d");if(Y===null)throw Error("2d rendering context not supported");const p=Y;let m,E;function D(){window.addEventListener("keydown",F)}function F(n){E=n.key,l.addEventListener("mousedown",O)}function O(n){const t={x:n.clientX,y:n.clientY};p.fillText(E,t.x,t.y),p.stroke(),l.addEventListener("mousemove",T),l.addEventListener("mouseup",$)}function T(n){p.clearRect(0,0,l.width,l.height),M(y.sheet),m={x:n.clientX,y:n.clientY},p.fillText(E,m.x,m.y),p.stroke()}function $(){l.removeEventListener("mousemove",T);const n=new h(E,m);y.insert(n),l.removeEventListener("mouseup",$)}function K(){l.removeEventListener("mousedown",O)}const b=document.getElementById("canvas");b.width=window.innerWidth;b.height=window.innerHeight;const R=b.getContext("2d");if(R===null)throw Error("2d rendering context not supported");const f=R;f.font="35pt arial";let C=!1,P=!1;const y=new k;window.atomMode=J;window.ellipseMode=j;function j(){C=!0,U(),P&&(K(),P=!1)}function J(){P=!0,D(),C&&(z(),C=!1)}function M(n){for(let t=0;n.children.length>t;t++)n.children[t]instanceof h?Q(n.children[t]):M(n.children[t]);n.ellipse instanceof L&&(f.beginPath(),f.ellipse(n.ellipse.center.x,n.ellipse.center.y,n.ellipse.radiusX,n.ellipse.radiusY,Math.PI/2,0,2*Math.PI),f.stroke())}function Q(n){f.fillText(n.identifier,n.origin.x,n.origin.y),f.stroke()}
