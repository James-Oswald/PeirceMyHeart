(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const v of n.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&s(v)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}})();class o{constructor(e,t){this.x=e??0,this.y=t??0}set(e,t){this.x=e,this.y=t}distance(e){const t=this.x-e.x,s=this.y-e.y;return Math.sqrt(t*t+s*s)}toString(){return"X: "+this.x+", Y: "+this.y}}class m{constructor(e,t,s){this.startVertex=e??new o,this.width=t??0,this.height=s??0}getCorners(){const e=[this.startVertex];return e.push(new o(this.startVertex.x+this.width,this.startVertex.y)),e.push(new o(this.startVertex.x+this.width,this.startVertex.y+this.height)),e.push(new o(this.startVertex.x,this.startVertex.y+this.height)),e}containsPoint(e){const t=this.getCorners();return t[0].x<=e.x&&t[1].x>=e.x&&t[1].y<=e.y&&t[2].y>=e.y}overlaps(e){if(e instanceof m)return this.checkHorizontalEdgeOverlap(e)&&e.checkVerticalEdgeOverlap(this)?!0:!!(this.checkVerticalEdgeOverlap(e)&&e.checkHorizontalEdgeOverlap(this));for(let t=0;t<4;t++)if(e.containsPoint(this.getCorners()[t]))return!0;return!1}checkHorizontalEdgeOverlap(e){const t=this.getCorners(),s=e.getCorners();return t[0].y<=s[0].y&&t[2].y>=s[0].y?!0:t[0].y<=s[2].y&&t[2].y>=s[2].y}checkVerticalEdgeOverlap(e){const t=this.getCorners(),s=e.getCorners();return t[0].x<=s[0].x&&t[1].x>=s[0].x?!0:t[0].x<=s[1].x&&t[1].x>=s[1].x}containsShape(e){if(e instanceof m){const t=e.getCorners();return this.containsPoint(t[0])&&this.containsPoint(t[2])}else{for(let t=0;t<4;t++)if(!this.containsPoint(e.getWidestCoordinates()[t]))return!1;return!0}}toString(){return`A rectangle with
Top Left Vertex at: `+this.startVertex.toString()+", Width: "+this.width+", Height: "+this.height}}class d{constructor(e,t,s){this.rect=s??new m,this.identifier=e??"",this.origin=t??new o}containsPoint(e){return this.rect.containsPoint(e)}containsNode(e){return e instanceof d?this.rect.containsShape(e.rect):this.rect.containsShape(e.ellipse)}toString(){return"An atom representing the proposition: "+this.identifier+" and Boundary box of: "+this.rect.toString()}}class B{constructor(e,t,s){this.center=e??new o,this.radiusX=t??0,this.radiusY=s??0;const r=new o(this.center.x-this.radiusX,this.center.y-this.radiusY);this.boundingBox=new m(r,this.radiusX*2,this.radiusY*2)}toString(){return"An ellipse with Center at: "+this.center.toString()+`, 
Horizontal Radius of: `+this.radiusX+`, 
Vertical Radius of: `+this.radiusY+`, 
Bounding box: `+this.boundingBox.toString()}containsPoint(e){return Math.ceil(Math.pow(e.x-this.center.x,2)/Math.pow(this.radiusX,2)+Math.pow(e.y-this.center.y,2)/Math.pow(this.radiusY,2))<=1}overlaps(e){if(e instanceof m){for(let t=0;t<4;t++)if(this.containsPoint(e.getCorners()[t]))return!0;return!1}else{if(this.boundingBox.overlaps(e.boundingBox)){const t=e.getEllipsePoints();for(let s=0;s<t.length;s++)if(this.containsPoint(t[s]))return!0}return!1}}containsShape(e){if(e instanceof m){for(let t=0;t<4;t++)if(!this.containsPoint(e.getCorners()[t]))return!1;return!0}else if(e instanceof B){const t=e.getWidestCoordinates();for(let s=0;s<4;s++)if(!this.containsPoint(t[s]))return!1;return!0}throw Error("Invalid Shape passed to containsShape, must be a Rectangle | Ellipse")}getWidestCoordinates(){return[new o(this.center.x,this.center.y-this.radiusY),new o(this.center.x+this.radiusX,this.center.y),new o(this.center.x,this.center.y+this.radiusY),new o(this.center.x-this.radiusX,this.center.y)]}getEllipsePoints(){const e=[],t=this.radiusX/15;e[0]=this.getWidestCoordinates()[3];let s,r;for(let n=1;n<64;n++)n<33?(s=e[n-1].x+t,r=this.getCurvePoint(s,1)):(s=e[n-1].x-t,r=this.getCurvePoint(s,-1)),e[n]=new o(s,r);return e}getCurvePoint(e,t){return t*this.radiusY*Math.sqrt(1-Math.pow((e-this.center.x)/this.radiusX,2))+this.center.y}}class p{constructor(e,t){this.ellipse=e??new B,this.children=t??[]}getCurrentCut(e){for(let t=0;t<this.children.length;t++){const s=this.children[t];if(s instanceof p&&this.children[t].containsNode(e))return s.getCurrentCut(e)}return this}containsPoint(e){return this.ellipse===null?!0:this.ellipse.containsPoint(e)}containsNode(e){if(this.ellipse===null)return!0;if(e instanceof d)return this.ellipse.containsShape(e.rect);if(e instanceof p)return this.ellipse.containsShape(e.ellipse);throw Error("containsNode expected AtomNode or CutNode")}remove(e){if(this.containsPoint(e)){let t=!0;for(let s=0;s<this.children.length;s++)if(this.children[s].containsPoint(e))return t=!1,this.children[s]instanceof p?this.children[s].remove(e):(this.children=this.children.splice(s,1),!0);if(t)return!0}return!1}toString(){let e;return this.ellipse===null?e="Sheet of Assertion of the AEG Tree":e=`A cut node with boundary box of 
`+this.ellipse.toString(),this.children.length>0&&(e+=`, 
With nested nodes: `+this.children.toString()),e}toFormulaString(){let e="";for(const t of this.children)t instanceof d?e+=t.identifier:t instanceof p&&(e+=t.toFormulaString()),e+=" ";return e=e.slice(0,-1),this.ellipse===null?e="["+e+"]":e="("+e+")",e}}class ${constructor(e){this.sheet=e??new p,this.sheet.ellipse=null}verify(){return this.verifyAEG(this.sheet)}verifyAEG(e){for(let t=0;t<e.children.length;t++){if(!e.containsNode(e.children[t]))return!1;for(let s=t+1;s<e.children.length;s++)if(this.overlaps(e.children[t],e.children[s]))return!1}for(let t=0;t<e.children.length;t++)if(e.children[t]instanceof p&&!this.verifyAEG(e.children[t]))return!1;return!0}canInsert(e){const t=this.sheet.getCurrentCut(e);for(let s=0;s<t.children.length;s++)if(this.overlaps(e,t.children[s]))return!1;return!0}insert(e){if(!this.canInsert(e))throw new Error("Insertion failed. "+e+" had a collision.");const t=this.sheet.getCurrentCut(e),s=[...t.children];if(t.children.push(e),e instanceof p)for(let r=0;r<s.length;r++)e.containsNode(s[r])&&(e.children.push(s[r]),t.children=t.children.splice(r,1))}remove(e){this.sheet.remove(e)}overlaps(e,t){let s,r;return e instanceof d?t instanceof d?e.rect.overlaps(t.rect):(s=t.ellipse,e.rect.overlaps(s)):t instanceof d?(s=e.ellipse,s.overlaps(t.rect)):(s=e.ellipse,r=t.ellipse,s.overlaps(r))}toString(){return this.sheet.toFormulaString()}}const C=document.getElementById("canvas"),F=C.getContext("2d"),T=document.getElementById("showRect"),W=document.getElementById("mode");if(F===null)throw Error("2d rendering context not supported");const g=F;let M=!1,E=new B,b=new o;function w(i){let e=new p;const t=new o;i.type==="mousedown"?(M=!0,b.x=i.clientX,b.y=i.clientY):i.type==="mousemove"&&M?(t.x=i.clientX,t.y=i.clientY,g.clearRect(0,0,C.width,C.height),y(a.sheet),E=z(b,t),e.ellipse=E,a.canInsert(e)&&E.radiusX>15&&E.radiusY>15?A(e,"#00FF00"):A(e,"#FF0000")):i.type==="mouseup"&&M?(e=new p(E),a.canInsert(e)&&E.radiusX>15&&E.radiusY>15&&a.insert(e),M=!1,b=new o,g.clearRect(0,0,C.width,C.height),y(a.sheet),console.log(a.toString())):i.type==="mouseout"&&M&&(M=!1,b=new o,g.clearRect(0,0,C.width,C.height),y(a.sheet))}function z(i,e){const t=new o((e.x-i.x)/2+i.x,(e.y-i.y)/2+i.y),s=i.x-e.x,r=i.y-e.y,n=Math.abs(s),v=Math.abs(r);let X,Y;if(W.value==="circumscribed"){const I=Math.floor(t.distance(e));Y=Math.floor(I*(v/n)),X=Math.floor(I*(n/v))}else X=n/2,Y=v/2;return T.checked&&(g.beginPath(),g.rect(i.x,i.y,-s,-r),g.stroke()),new B(t,X,Y)}function A(i,e){g.strokeStyle=e;const t=i.ellipse,s=t.center;g.beginPath(),g.ellipse(s.x,s.y,t.radiusX,t.radiusY,0,0,2*Math.PI),g.stroke()}const x=document.getElementById("canvas"),O=x.getContext("2d");if(O===null)throw Error("2d rendering context not supported");const h=O;let P,L=!1,k=!1,c=new d;function f(i){if(i.type==="keypress"){const e=i;new RegExp(/^[A-Za-z]$/).test(e.key)&&(c.identifier=e.key,k=!0)}else if(i.type==="mousedown"&&k){const e=i;P=h.measureText(c.identifier);const t=new o(e.clientX,e.clientY-P.actualBoundingBoxAscent);c.rect=new m(t,P.width,P.fontBoundingBoxDescent+P.actualBoundingBoxAscent),c.origin=new o(e.clientX,e.clientY),h.clearRect(0,0,x.width,x.height),y(a.sheet),a.canInsert(c)?V(c,"#00FF00"):V(c,"#6600ff"),L=!0}else if(i.type==="mousemove"&&L){const e=i;c.origin=new o(e.clientX,e.clientY),c.rect.startVertex=new o(e.clientX,e.clientY-P.actualBoundingBoxAscent),h.clearRect(0,0,x.width,x.height),y(a.sheet),a.canInsert(c)?V(c,"#00FF00"):V(c,"#FF0000")}else i.type==="mouseup"&&L?(a.canInsert(c)&&a.insert(c),c=new d(c.identifier),h.clearRect(0,0,x.width,x.height),y(a.sheet),L=!1,console.log(a.toString())):i.type==="mouseout"&&L&&(L=!1,c=new d(c.identifier),h.clearRect(0,0,x.width,x.height),y(a.sheet))}function V(i,e){h.fillStyle=e,h.strokeStyle=e;const t=i.rect;h.beginPath(),h.fillText(i.identifier,i.origin.x,i.origin.y),h.rect(t.startVertex.x,t.startVertex.y,t.width,t.height),h.stroke()}const l=document.getElementById("canvas");l.width=window.innerWidth;l.height=window.innerHeight;const R=l.getContext("2d");if(R===null)throw Error("2d rendering context not supported");const u=R;u.font="35pt arial";const D=document.getElementById("graphString");let S;const a=new $;window.atomMode=q;window.ellipseMode=G;function G(){S!=="ellipseMode"&&(H(),S="ellipseMode"),l.addEventListener("mousedown",w),l.addEventListener("mousemove",w),l.addEventListener("mouseup",w),l.addEventListener("mouseout",w)}function q(){S!=="atomMode"&&(H(),S="atomMode"),window.addEventListener("keypress",f),l.addEventListener("mousedown",f),l.addEventListener("mousemove",f),l.addEventListener("mouseup",f),l.addEventListener("mouseout",f)}function H(){S==="ellipseMode"?(l.removeEventListener("mousedown",w),l.removeEventListener("mousemove",w),l.removeEventListener("mouseup",w),l.removeEventListener("mouseout",w)):S==="atomMode"&&(window.removeEventListener("keypress",f),l.removeEventListener("mousedown",f),l.removeEventListener("mousemove",f),l.removeEventListener("mouseup",f),l.removeEventListener("mouseout",f))}function y(i){D.innerHTML=a.toString();for(let e=0;i.children.length>e;e++)i.children[e]instanceof d?j(i.children[e]):y(i.children[e]);i.ellipse instanceof B&&(u.strokeStyle="#000000",u.beginPath(),u.ellipse(i.ellipse.center.x,i.ellipse.center.y,i.ellipse.radiusX,i.ellipse.radiusY,0,0,2*Math.PI),u.stroke())}function j(i){const e=i.rect;u.strokeStyle="#000000",u.fillStyle="#000000",u.beginPath(),u.rect(e.startVertex.x,e.startVertex.y,e.width,e.height),u.fillText(i.identifier,i.origin.x,i.origin.y),u.stroke()}
